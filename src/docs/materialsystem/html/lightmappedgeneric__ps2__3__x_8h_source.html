<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>materialsystem: materialsystem/stdshaders/lightmappedgeneric_ps2_3_x.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">materialsystem
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('lightmappedgeneric__ps2__3__x_8h_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">lightmappedgeneric_ps2_3_x.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="lightmappedgeneric__ps2__3__x_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//========= Copyright Valve Corporation, All rights reserved. ============//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  SKIP: $BUMPMAP2 &amp;&amp; $WARPLIGHTING</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  SKIP: $WARPLIGHTING &amp;&amp; $DETAILTEXTURE</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//  SKIP: $ENVMAPMASK &amp;&amp; $BUMPMAP</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  SKIP: $NORMALMAPALPHAENVMAPMASK &amp;&amp; $BASEALPHAENVMAPMASK</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//  SKIP: $NORMALMAPALPHAENVMAPMASK &amp;&amp; $ENVMAPMASK</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//  SKIP: $BASEALPHAENVMAPMASK &amp;&amp; $ENVMAPMASK</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//  SKIP: $BASEALPHAENVMAPMASK &amp;&amp; $SELFILLUM</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//  SKIP: !$FASTPATH &amp;&amp; $FASTPATHENVMAPCONTRAST</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//  SKIP: !$FASTPATH &amp;&amp; $FASTPATHENVMAPTINT</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//  SKIP: !$BUMPMAP &amp;&amp; $DIFFUSEBUMPMAP</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//  SKIP: !$BUMPMAP &amp;&amp; $BUMPMAP2</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//  SKIP: $ENVMAPMASK &amp;&amp; $BUMPMAP2</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//  SKIP: $BASETEXTURENOENVMAP &amp;&amp; ( !$BASETEXTURE2 || !$CUBEMAP )</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//  SKIP: $BASETEXTURE2NOENVMAP &amp;&amp; ( !$BASETEXTURE2 || !$CUBEMAP )</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//  SKIP: $BASEALPHAENVMAPMASK &amp;&amp; $BUMPMAP</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//  SKIP: $PARALLAXMAP &amp;&amp; $DETAILTEXTURE</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//  SKIP: $SEAMLESS &amp;&amp; $RELIEF_MAPPING</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//  SKIP: $SEAMLESS &amp;&amp; $DETAILTEXTURE</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//  SKIP: $SEAMLESS &amp;&amp; $MASKEDBLENDING</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//  SKIP: $BUMPMASK &amp;&amp; ( $SEAMLESS || $DETAILTEXTURE || $SELFILLUM || $BASETEXTURENOENVMAP || $BASETEXTURE2 )</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//  SKIP: !$BUMPMAP &amp;&amp; ($NORMAL_DECODE_MODE == 1)</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//  SKIP: !$BUMPMAP &amp;&amp; ($NORMAL_DECODE_MODE == 2)</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//  SKIP: !$BUMPMAP &amp;&amp; ($NORMALMASK_DECODE_MODE == 1)</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//  SKIP: !$BUMPMAP &amp;&amp; ($NORMALMASK_DECODE_MODE == 2)</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//  NOSKIP: $FANCY_BLENDING &amp;&amp; (!$FASTPATH)</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// 360 compiler craps out on some combo in this family.  Content doesn&#39;t use blendmode 10 anyway</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//  SKIP: $FASTPATH &amp;&amp; $PIXELFOGTYPE &amp;&amp; $BASETEXTURE2 &amp;&amp; $DETAILTEXTURE &amp;&amp; $CUBEMAP &amp;&amp; ($DETAIL_BLEND_MODE == 10 ) [XBOX]</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// debug crap:</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// NOSKIP: $DETAILTEXTURE</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// NOSKIP: $CUBEMAP</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// NOSKIP: $ENVMAPMASK</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// NOSKIP: $BASEALPHAENVMAPMASK</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// NOSKIP: $SELFILLUM</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a8671d41032a6c5ae1b6c184b92d6651e">   38</a></span>&#160;<span class="preprocessor">#define USE_32BIT_LIGHTMAPS_ON_360 //uncomment to use 32bit lightmaps, be sure to keep this in sync with the same #define in materialsystem/cmatlightmaps.cpp</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common__ps__fxc_8h.html">common_ps_fxc.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common__flashlight__fxc_8h.html">common_flashlight_fxc.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common__lightmappedgeneric__fxc_8h.html">common_lightmappedgeneric_fxc.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#if SEAMLESS</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#define USE_FAST_PATH 1</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#aff67d92cf907cea54f6cda43394a566d">   47</a></span>&#160;<span class="preprocessor">#define USE_FAST_PATH FASTPATH</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a82569f91263c399acad6fb28dc70456f">   50</a></span>&#160;<span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a82569f91263c399acad6fb28dc70456f">g_EnvmapTint</a> : <span class="keyword">register</span>( c0 );</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#if USE_FAST_PATH == 1</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#   if FASTPATHENVMAPCONTRAST == 0</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a62f176c996256e59437cd9cc98168a64">g_EnvmapContrast</a> = { 0.0f, 0.0f, 0.0f };</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#   else</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a62f176c996256e59437cd9cc98168a64">g_EnvmapContrast</a> = { 1.0f, 1.0f, 1.0f };</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#   endif</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#af7edefed80ee54b9ac2dc1669fc21347">g_EnvmapSaturation</a> = { 1.0f, 1.0f, 1.0f };</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a37c4c48ff47f0838f64b5a1fb3c803b2">HALF</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#aea93b507048273193ae25c0e8e1d4975">g_FresnelReflection</a> = 1.0f;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a37c4c48ff47f0838f64b5a1fb3c803b2">HALF</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a261d6c2b20cd15f371ddb967d94bb046">g_OneMinusFresnelReflection</a> = 0.0f;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#ace53346f96325e6c8d059a74672293ee">g_SelfIllumTint</a> = { 1.0f, 1.0f, 1.0f, 1.0f };</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#   if OUTLINE</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">const</span> float4 g_OutlineParams : <span class="keyword">register</span>( c2 );</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#define OUTLINE_MIN_VALUE0 g_OutlineParams.x</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#define OUTLINE_MIN_VALUE1 g_OutlineParams.y</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#define OUTLINE_MAX_VALUE0 g_OutlineParams.z</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#define OUTLINE_MAX_VALUE1 g_OutlineParams.w</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">const</span> float4 g_OutlineColor : <span class="keyword">register</span>( c3 );</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#define OUTLINE_COLOR g_OutlineColor</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#   endif</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#   if SOFTEDGES</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">const</span> float4 g_EdgeSoftnessParms : <span class="keyword">register</span>( c4 );</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#define SOFT_MASK_MIN g_EdgeSoftnessParms.x</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#define SOFT_MASK_MAX g_EdgeSoftnessParms.y</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#   endif</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a62f176c996256e59437cd9cc98168a64">   81</a></span>&#160;<span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a62f176c996256e59437cd9cc98168a64">g_EnvmapContrast</a>                : <span class="keyword">register</span>( c2 );</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#af7edefed80ee54b9ac2dc1669fc21347">   82</a></span>&#160;<span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#af7edefed80ee54b9ac2dc1669fc21347">g_EnvmapSaturation</a>              : <span class="keyword">register</span>( c3 );</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#acfba57a4e6bcb8a680b50a5fbfdaf920">   83</a></span>&#160;<span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#acfba57a4e6bcb8a680b50a5fbfdaf920">g_FresnelReflectionReg</a>          : <span class="keyword">register</span>( c4 );</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#aea93b507048273193ae25c0e8e1d4975">   84</a></span>&#160;<span class="preprocessor">#define g_FresnelReflection g_FresnelReflectionReg.a</span></div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a261d6c2b20cd15f371ddb967d94bb046">   85</a></span>&#160;<span class="preprocessor">#define g_OneMinusFresnelReflection g_FresnelReflectionReg.b</span></div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#ace53346f96325e6c8d059a74672293ee">   86</a></span>&#160;<span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#ace53346f96325e6c8d059a74672293ee">g_SelfIllumTint</a>                 : <span class="keyword">register</span>( c7 );</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a86b311efeef504ca16ba48e3c52f5b48">   89</a></span>&#160;<span class="keyword">const</span> float4 <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a86b311efeef504ca16ba48e3c52f5b48">g_DetailTint_and_BlendFactor</a>   : <span class="keyword">register</span>( c8 );</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a0f8142f158fe5964b2596848ac733f3c">   90</a></span>&#160;<span class="preprocessor">#define g_DetailTint (g_DetailTint_and_BlendFactor.rgb)</span></div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a69e1b4789f63df74f7e081245c4f96f4">   91</a></span>&#160;<span class="preprocessor">#define g_DetailBlendFactor (g_DetailTint_and_BlendFactor.w)</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a6c6eab3f29adb784031576179376668b">   93</a></span>&#160;<span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a6c6eab3f29adb784031576179376668b">g_EyePos</a>                        : <span class="keyword">register</span>( c10 );</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a71c8c9a36096be13aa6c59df81a20dfc">   94</a></span>&#160;<span class="keyword">const</span> <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a71c8c9a36096be13aa6c59df81a20dfc">g_FogParams</a>                     : <span class="keyword">register</span>( c11 );</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#adf0b326128f3299c8198c968cf8a1eda">   95</a></span>&#160;<span class="keyword">const</span> float4 <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#adf0b326128f3299c8198c968cf8a1eda">g_TintValuesAndLightmapScale</a>   : <span class="keyword">register</span>( c12 );</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a2f0a682b6b8e75ecef592237040ebc94">   97</a></span>&#160;<span class="preprocessor">#define g_flAlpha2 g_TintValuesAndLightmapScale.w</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a9c37331dc38fe04642176eb529b9b250">   99</a></span>&#160;<span class="keyword">const</span> float4 <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a9c37331dc38fe04642176eb529b9b250">g_FlashlightAttenuationFactors</a> : <span class="keyword">register</span>( c13 );</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#abe28ba8e5bd1012c1f1b4150c72e3741">  100</a></span>&#160;<span class="keyword">const</span> float3 <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#abe28ba8e5bd1012c1f1b4150c72e3741">g_FlashlightPos</a>                : <span class="keyword">register</span>( c14 );</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a7f7f83b829813250c0d027add034d5f2">  101</a></span>&#160;<span class="keyword">const</span> float4x4 <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a7f7f83b829813250c0d027add034d5f2">g_FlashlightWorldToTexture</a>   : <span class="keyword">register</span>( c15 ); <span class="comment">// through c18</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a5e3aa16b345510dd66f1000d5f49a6d4">  102</a></span>&#160;<span class="keyword">const</span> float4 <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a5e3aa16b345510dd66f1000d5f49a6d4">g_ShadowTweaks</a>                 : <span class="keyword">register</span>( c19 );</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a1b17b944cce4d29ad3d11b125f7ec656">  105</a></span>&#160;sampler <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a1b17b944cce4d29ad3d11b125f7ec656">BaseTextureSampler</a>      : <span class="keyword">register</span>( s0 );</div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a0269ccc18e320f83fcad882eafd2289f">  106</a></span>&#160;sampler <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a0269ccc18e320f83fcad882eafd2289f">LightmapSampler</a>         : <span class="keyword">register</span>( s1 );</div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a8fc2ef98233689922ea1e844899f1f6b">  107</a></span>&#160;sampler <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a8fc2ef98233689922ea1e844899f1f6b">EnvmapSampler</a>           : <span class="keyword">register</span>( s2 );</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#if FANCY_BLENDING</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;sampler BlendModulationSampler  : <span class="keyword">register</span>( s3 );</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#if DETAILTEXTURE</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;sampler DetailSampler           : <span class="keyword">register</span>( s12 );</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a3ac451759383db01abbb4134759e2e74">  116</a></span>&#160;sampler <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a3ac451759383db01abbb4134759e2e74">BumpmapSampler</a>          : <span class="keyword">register</span>( s4 );</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#if NORMAL_DECODE_MODE == NORM_DECODE_ATI2N_ALPHA</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;sampler <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a25c22a850bb768967056c7286d749ab3">AlphaMapSampler</a>     : <span class="keyword">register</span>( s9 );   <span class="comment">// alpha</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#a25c22a850bb768967056c7286d749ab3">  120</a></span>&#160;<span class="preprocessor">#define AlphaMapSampler     BumpmapSampler</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#if BUMPMAP2 == 1</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;sampler BumpmapSampler2         : <span class="keyword">register</span>( s5 );</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">#if NORMAL_DECODE_MODE == NORM_DECODE_ATI2N_ALPHA</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;sampler AlphaMapSampler2        : <span class="keyword">register</span>( s10 );  <span class="comment">// alpha</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#define AlphaMapSampler2        BumpmapSampler2</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#ac69e0559621f39238e034ad4545bc638">  131</a></span>&#160;sampler <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#ac69e0559621f39238e034ad4545bc638">EnvmapMaskSampler</a>       : <span class="keyword">register</span>( s5 );</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#if WARPLIGHTING</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;sampler WarpLightingSampler     : <span class="keyword">register</span>( s6 );</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="lightmappedgeneric__ps2__3__x_8h.html#aecd68aaedda8309584af6bc2033bc1f3">  138</a></span>&#160;sampler <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#aecd68aaedda8309584af6bc2033bc1f3">BaseTextureSampler2</a>     : <span class="keyword">register</span>( s7 );</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#if BUMPMASK == 1</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;sampler BumpMaskSampler         : <span class="keyword">register</span>( s8 );</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#if NORMALMASK_DECODE_MODE == NORM_DECODE_ATI2N_ALPHA</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;sampler AlphaMaskSampler        : <span class="keyword">register</span>( s11 );  <span class="comment">// alpha</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#define AlphaMaskSampler        BumpMaskSampler</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#if defined( _X360 ) &amp;&amp; FLASHLIGHT</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;sampler FlashlightSampler       : <span class="keyword">register</span>( s13 );</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;sampler ShadowDepthSampler      : <span class="keyword">register</span>( s14 );</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;sampler RandRotSampler          : <span class="keyword">register</span>( s15 );</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="struct_p_s___i_n_p_u_t.html">  155</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_p_s___i_n_p_u_t.html">PS_INPUT</a></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#if SEAMLESS</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    float3 SeamlessTexCoord         : TEXCOORD0;            <span class="comment">// zy xz</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    float4 <a class="code" href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">detailOrBumpAndEnvmapMaskTexCoord</a> : TEXCOORD1;   <span class="comment">// envmap mask</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="struct_p_s___i_n_p_u_t.html#af7032b284f6db8efeafc1abfe5263535">  161</a></span>&#160;    <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> <a class="code" href="struct_p_s___i_n_p_u_t.html#af7032b284f6db8efeafc1abfe5263535">baseTexCoord</a>              : TEXCOORD0;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// detail textures and bumpmaps are mutually exclusive so that we have enough texcoords.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#if ( RELIEF_MAPPING == 0 )</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">  164</a></span>&#160;    <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">detailOrBumpAndEnvmapMaskTexCoord</a> : TEXCOORD1;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">// CENTROID: TEXCOORD2</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="struct_p_s___i_n_p_u_t.html#a39fe9b54fa74671060e2caf7235acc51">  168</a></span>&#160;    <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="struct_p_s___i_n_p_u_t.html#a39fe9b54fa74671060e2caf7235acc51">lightmapTexCoord1And2</a>     : TEXCOORD2;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">// CENTROID: TEXCOORD3</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="struct_p_s___i_n_p_u_t.html#a0e7a66e66d2c9d4e8cb26930e411cae9">  170</a></span>&#160;    <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="struct_p_s___i_n_p_u_t.html#a0e7a66e66d2c9d4e8cb26930e411cae9">lightmapTexCoord3</a>         : TEXCOORD3;</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">  171</a></span>&#160;    <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">worldPos_projPosZ</a>         : TEXCOORD4;</div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="struct_p_s___i_n_p_u_t.html#a187b88232d262184173f10ab86b72565">  172</a></span>&#160;    <a class="code" href="common__fxc_8h.html#ab051e7816a6430fc1c099eafc49ead51">HALF3x3</a> <a class="code" href="struct_p_s___i_n_p_u_t.html#a187b88232d262184173f10ab86b72565">tangentSpaceTranspose</a>   : TEXCOORD5;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// tangentSpaceTranspose        : TEXCOORD6</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// tangentSpaceTranspose        : TEXCOORD7</span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="struct_p_s___i_n_p_u_t.html#a8a1d5fcebf90e6704528b4eb020f4fd3">  175</a></span>&#160;    <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> <a class="code" href="struct_p_s___i_n_p_u_t.html#a8a1d5fcebf90e6704528b4eb020f4fd3">vertexColor</a>               : COLOR;</div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="struct_p_s___i_n_p_u_t.html#a14a79b9c26e41188d9314402515cb243">  176</a></span>&#160;    float4 <a class="code" href="struct_p_s___i_n_p_u_t.html#a14a79b9c26e41188d9314402515cb243">vertexBlendX_fogFactorW</a>  : COLOR1;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// Extra iterators on 360, used in flashlight combo</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#if defined( _X360 ) &amp;&amp; FLASHLIGHT</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    float4 flashlightSpacePos       : TEXCOORD8;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    float4 vProjPos                 : TEXCOORD9;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;};</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#if LIGHTING_PREVIEW == 2</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<a class="code" href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html">LPREVIEW_PS_OUT</a> main( <a class="code" href="struct_p_s___i_n_p_u_t.html">PS_INPUT</a> i ) : COLOR</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;#<a class="code" href="cable__dx9_8cpp.html#a0544c3fe466e421738dae463968b70ba">else</a></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> main( <a class="code" href="struct_p_s___i_n_p_u_t.html">PS_INPUT</a> i ) : COLOR</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;#endif</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">bool</span> bBaseTexture2 = BASETEXTURE2 ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">bool</span> bDetailTexture = DETAILTEXTURE ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">bool</span> bBumpmap = BUMPMAP ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordtype">bool</span> bDiffuseBumpmap = DIFFUSEBUMPMAP ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">bool</span> bCubemap = CUBEMAP ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">bool</span> bEnvmapMask = ENVMAPMASK ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">bool</span> bBaseAlphaEnvmapMask = BASEALPHAENVMAPMASK ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">bool</span> bSelfIllum = SELFILLUM ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">bool</span> bNormalMapAlphaEnvmapMask = NORMALMAPALPHAENVMAPMASK ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">bool</span> bBaseTextureNoEnvmap = BASETEXTURENOENVMAP ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">bool</span> bBaseTexture2NoEnvmap = BASETEXTURE2NOENVMAP ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    float4 baseColor = 0.0f;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    float4 baseColor2 = 0.0f;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    float4 vNormal = float4(0, 0, 1, 1);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    float3 baseTexCoords = float3(0,0,0);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">#if SEAMLESS</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    baseTexCoords = i.SeamlessTexCoord.xyz;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    baseTexCoords.xy = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#af7032b284f6db8efeafc1abfe5263535">baseTexCoord</a>.xy;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="common__lightmappedgeneric__fxc_8h.html#a4091425bdc1136b8914fbfc188cdd3d0">GetBaseTextureAndNormal</a>( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a1b17b944cce4d29ad3d11b125f7ec656">BaseTextureSampler</a>, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#aecd68aaedda8309584af6bc2033bc1f3">BaseTextureSampler2</a>, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a3ac451759383db01abbb4134759e2e74">BumpmapSampler</a>, bBaseTexture2, bBumpmap || bNormalMapAlphaEnvmapMask, </div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        baseTexCoords, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a8a1d5fcebf90e6704528b4eb020f4fd3">vertexColor</a>.rgb, baseColor, baseColor2, vNormal );</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor">#if BUMPMAP == 1    // not ssbump</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    vNormal.xyz = vNormal.xyz * 2.0f - 1.0f;                    <span class="comment">// make signed if we&#39;re not ssbump</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> lightmapColor1 = <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a>( 1.0f, 1.0f, 1.0f );</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> lightmapColor2 = <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a>( 1.0f, 1.0f, 1.0f );</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> lightmapColor3 = <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a>( 1.0f, 1.0f, 1.0f );</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">#if LIGHTING_PREVIEW == 0</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span>( bBumpmap &amp;&amp; bDiffuseBumpmap )</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> bumpCoord1;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> bumpCoord2;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> bumpCoord3;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="common__fxc_8h.html#a3437a813ae692c055098dd2bf74372da">ComputeBumpedLightmapCoordinates</a>( i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a39fe9b54fa74671060e2caf7235acc51">lightmapTexCoord1And2</a>, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a0e7a66e66d2c9d4e8cb26930e411cae9">lightmapTexCoord3</a>.xy,</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            bumpCoord1, bumpCoord2, bumpCoord3 );</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        </div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        lightmapColor1 = <a class="code" href="common__lightmappedgeneric__fxc_8h.html#a7452f01a1f9682b087c615a9545aff74">LightMapSample</a>( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a0269ccc18e320f83fcad882eafd2289f">LightmapSampler</a>, bumpCoord1 );</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        lightmapColor2 = <a class="code" href="common__lightmappedgeneric__fxc_8h.html#a7452f01a1f9682b087c615a9545aff74">LightMapSample</a>( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a0269ccc18e320f83fcad882eafd2289f">LightmapSampler</a>, bumpCoord2 );</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        lightmapColor3 = <a class="code" href="common__lightmappedgeneric__fxc_8h.html#a7452f01a1f9682b087c615a9545aff74">LightMapSample</a>( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a0269ccc18e320f83fcad882eafd2289f">LightmapSampler</a>, bumpCoord3 );</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> bumpCoord1 = <a class="code" href="common__fxc_8h.html#af670f18af069607f89be3363d337f6c6">ComputeLightmapCoordinates</a>( i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a39fe9b54fa74671060e2caf7235acc51">lightmapTexCoord1And2</a>, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a0e7a66e66d2c9d4e8cb26930e411cae9">lightmapTexCoord3</a>.xy );</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        lightmapColor1 = <a class="code" href="common__lightmappedgeneric__fxc_8h.html#a7452f01a1f9682b087c615a9545aff74">LightMapSample</a>( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a0269ccc18e320f83fcad882eafd2289f">LightmapSampler</a>, bumpCoord1 );</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#if RELIEF_MAPPING</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// in the parallax case, all texcoords must be the same in order to free</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// up an iterator for the tangent space view vector</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> detailTexCoord = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#af7032b284f6db8efeafc1abfe5263535">baseTexCoord</a>.xy;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> bumpmapTexCoord = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#af7032b284f6db8efeafc1abfe5263535">baseTexCoord</a>.xy;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> envmapMaskTexCoord = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#af7032b284f6db8efeafc1abfe5263535">baseTexCoord</a>.xy;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">    #if ( DETAILTEXTURE == 1 )</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> detailTexCoord = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">detailOrBumpAndEnvmapMaskTexCoord</a>.xy;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> bumpmapTexCoord = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#af7032b284f6db8efeafc1abfe5263535">baseTexCoord</a>.xy;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">    #elif ( BUMPMASK == 1 )</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> detailTexCoord = 0.0f;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> bumpmapTexCoord = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">detailOrBumpAndEnvmapMaskTexCoord</a>.xy;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> bumpmap2TexCoord = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">detailOrBumpAndEnvmapMaskTexCoord</a>.wz;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">    #else</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> detailTexCoord = 0.0f;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> bumpmapTexCoord = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">detailOrBumpAndEnvmapMaskTexCoord</a>.xy;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">    #endif</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> envmapMaskTexCoord = i.<a class="code" href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">detailOrBumpAndEnvmapMaskTexCoord</a>.wz;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">#endif // !RELIEF_MAPPING</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> detailColor = <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a>( 1.0f, 1.0f, 1.0f, 1.0f );</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#if DETAILTEXTURE</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">#if SHADER_MODEL_PS_2_0</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    detailColor = tex2D( DetailSampler, detailTexCoord );</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    detailColor = float4( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a0f8142f158fe5964b2596848ac733f3c">g_DetailTint</a>, 1.0f ) * tex2D( DetailSampler, detailTexCoord );</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">#if ( OUTLINE || SOFTEDGES )</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordtype">float</span> distAlphaMask = baseColor.a;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#   if OUTLINE</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> ( ( distAlphaMask &gt;= OUTLINE_MIN_VALUE0 ) &amp;&amp;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;         ( distAlphaMask &lt;= OUTLINE_MAX_VALUE1 ) )</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordtype">float</span> oFactor=1.0;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span> ( distAlphaMask &lt;= OUTLINE_MIN_VALUE1 )</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            oFactor=smoothstep( OUTLINE_MIN_VALUE0, OUTLINE_MIN_VALUE1, distAlphaMask );</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            oFactor=smoothstep( OUTLINE_MAX_VALUE1, OUTLINE_MAX_VALUE0, distAlphaMask );</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        baseColor = lerp( baseColor, OUTLINE_COLOR, oFactor );</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">#   endif</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">#   if SOFTEDGES</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    baseColor.a *= smoothstep( SOFT_MASK_MAX, SOFT_MASK_MIN, distAlphaMask );</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">#   else</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    baseColor.a *= distAlphaMask &gt;= 0.5;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">#   endif</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="preprocessor">#if LIGHTING_PREVIEW == 2</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    baseColor.xyz=<a class="code" href="common__fxc_8h.html#af50aa3375b5680172aabe1679bc89b70">GammaToLinear</a>(baseColor.xyz);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordtype">float</span> blendedAlpha = baseColor.a;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="preprocessor">#if MASKEDBLENDING</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">float</span> blendfactor=0.5;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">float</span> blendfactor=i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a14a79b9c26e41188d9314402515cb243">vertexBlendX_fogFactorW</a>.r;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span>( bBaseTexture2 )</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">#if (SELFILLUM == 0) &amp;&amp; (PIXELFOGTYPE != PIXEL_FOG_TYPE_HEIGHT) &amp;&amp; (FANCY_BLENDING)</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        float4 modt=tex2D(BlendModulationSampler,i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a0e7a66e66d2c9d4e8cb26930e411cae9">lightmapTexCoord3</a>.zw);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">#if MASKEDBLENDING</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">// FXC is unable to optimize this, despite blendfactor=0.5 above</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">//float minb=modt.g-modt.r;</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="comment">//float maxb=modt.g+modt.r;</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="comment">//blendfactor=smoothstep(minb,maxb,blendfactor);</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        blendfactor=modt.g;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordtype">float</span> minb=saturate(modt.g-modt.r);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordtype">float</span> maxb=saturate(modt.g+modt.r);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        blendfactor=smoothstep(minb,maxb,blendfactor);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        baseColor.rgb = lerp( baseColor, baseColor2.rgb, blendfactor );</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        blendedAlpha = lerp( baseColor.a, baseColor2.a, blendfactor );</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> specularFactor = 1.0f;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    float4 vNormalMask = float4(0, 0, 1, 1);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span>( bBumpmap )</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">if</span>( bBaseTextureNoEnvmap )</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            vNormal.a = 0.0f;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">#if ( BUMPMAP2 == 1 )</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">    #if ( BUMPMASK == 1 )</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> b2TexCoord = bumpmap2TexCoord;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="preprocessor">    #else</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <a class="code" href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a> b2TexCoord = bumpmapTexCoord;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">    #endif</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a> vNormal2;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keywordflow">if</span> ( BUMPMAP == 2 )</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                vNormal2 = tex2D( BumpmapSampler2, b2TexCoord );</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                vNormal2 = <a class="code" href="common__ps__fxc_8h.html#a0e78bad9e80009ea186c318f1a27c70e">DecompressNormal</a>( BumpmapSampler2, b2TexCoord, NORMAL_DECODE_MODE, AlphaMapSampler2 );       <span class="comment">// Bump 2 coords</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">if</span>( bBaseTexture2NoEnvmap )</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                vNormal2.a = 0.0f;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">    #if ( BUMPMASK == 1 )</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            float3 vNormal1 = <a class="code" href="common__ps__fxc_8h.html#a0e78bad9e80009ea186c318f1a27c70e">DecompressNormal</a>( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a3ac451759383db01abbb4134759e2e74">BumpmapSampler</a>, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">detailOrBumpAndEnvmapMaskTexCoord</a>.xy, NORMALMASK_DECODE_MODE, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a25c22a850bb768967056c7286d749ab3">AlphaMapSampler</a> );</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            vNormal.xyz = normalize( vNormal1.xyz + vNormal2.xyz );</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="comment">// Third normal map...same coords as base</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            vNormalMask = <a class="code" href="common__ps__fxc_8h.html#a0e78bad9e80009ea186c318f1a27c70e">DecompressNormal</a>( BumpMaskSampler, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#af7032b284f6db8efeafc1abfe5263535">baseTexCoord</a>.xy, NORMALMASK_DECODE_MODE, AlphaMaskSampler );</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            vNormal.xyz = lerp( vNormalMask.xyz, vNormal.xyz, vNormalMask.a );      <span class="comment">// Mask out normals from vNormal</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            specularFactor = vNormalMask.a;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">    #else // BUMPMASK == 0</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">if</span> ( FANCY_BLENDING &amp;&amp; bNormalMapAlphaEnvmapMask )</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                vNormal = lerp( vNormal, vNormal2, blendfactor);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                vNormal.xyz = lerp( vNormal.xyz, vNormal2.xyz, blendfactor);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">    #endif</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#endif // BUMPMAP2 == 1</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">if</span>( bNormalMapAlphaEnvmapMask )</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            specularFactor *= vNormal.a;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( bNormalMapAlphaEnvmapMask )</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        specularFactor *= vNormal.a;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">#if ( BUMPMAP2 == 0 )</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span>( bEnvmapMask )</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        specularFactor *= tex2D( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#ac69e0559621f39238e034ad4545bc638">EnvmapMaskSampler</a>, envmapMaskTexCoord ).xyz;   </div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span>( bBaseAlphaEnvmapMask )</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        specularFactor *= 1.0 - blendedAlpha; <span class="comment">// Reversing alpha blows!</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    float4 albedo = float4( 1.0f, 1.0f, 1.0f, 1.0f );</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> = 1.0f;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    albedo *= baseColor;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span>( !bBaseAlphaEnvmapMask &amp;&amp; !bSelfIllum )</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> *= baseColor.a;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span>( bDetailTexture )</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        albedo = <a class="code" href="common__ps__fxc_8h.html#ab65cc819518cf408bd2917e71fbd36f5">TextureCombine</a>( albedo, detailColor, DETAIL_BLEND_MODE, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a69e1b4789f63df74f7e081245c4f96f4">g_DetailBlendFactor</a> );</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// The vertex color contains the modulation color + vertex color combined</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor">#if ( SEAMLESS == 0 )</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    albedo.xyz *= i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a8a1d5fcebf90e6704528b4eb020f4fd3">vertexColor</a>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> *= i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a8a1d5fcebf90e6704528b4eb020f4fd3">vertexColor</a>.a * <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a2f0a682b6b8e75ecef592237040ebc94">g_flAlpha2</a>; <span class="comment">// not sure about this one</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// Save this off for single-pass flashlight, since we&#39;ll still need the SSBump vector, not a real normal</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    float3 vSSBumpVector = vNormal.xyz;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> diffuseLighting;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span>( bBumpmap &amp;&amp; bDiffuseBumpmap )</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">// ssbump</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#if ( BUMPMAP == 2 )</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        diffuseLighting = vNormal.x * lightmapColor1 +</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                          vNormal.y * lightmapColor2 +</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                          vNormal.z * lightmapColor3;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        diffuseLighting *= <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#adf0b326128f3299c8198c968cf8a1eda">g_TintValuesAndLightmapScale</a>.rgb;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">// now, calculate vNormal for reflection purposes. if vNormal isn&#39;t needed, hopefully</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">// the compiler will eliminate these calculations</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        vNormal.xyz = normalize( bumpBasis[0]*vNormal.x + bumpBasis[1]*vNormal.y + bumpBasis[2]*vNormal.z);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        float3 dp;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        dp.x = saturate( dot( vNormal, bumpBasis[0] ) );</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        dp.y = saturate( dot( vNormal, bumpBasis[1] ) );</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        dp.z = saturate( dot( vNormal, bumpBasis[2] ) );</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        dp *= dp;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        </div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">#if ( DETAIL_BLEND_MODE == TCOMBINE_SSBUMP_BUMP )</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        dp *= 2*detailColor;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        diffuseLighting = dp.x * lightmapColor1 +</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                          dp.y * lightmapColor2 +</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                          dp.z * lightmapColor3;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordtype">float</span> sum = dot( dp, float3( 1.0f, 1.0f, 1.0f ) );</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        diffuseLighting *= <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#adf0b326128f3299c8198c968cf8a1eda">g_TintValuesAndLightmapScale</a>.rgb / sum;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        diffuseLighting = lightmapColor1 * <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#adf0b326128f3299c8198c968cf8a1eda">g_TintValuesAndLightmapScale</a>.rgb;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">#if WARPLIGHTING &amp;&amp; ( SEAMLESS == 0 )</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordtype">float</span> len=0.5*length(diffuseLighting);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">// FIXME: 8-bit lookup textures like this need a &quot;nice filtering&quot; VTF option, which converts</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">//        them to 16-bit on load or does filtering in the shader (since most hardware - 360</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">//        included - interpolates 8-bit textures at 8-bit precision, which causes banding)</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    diffuseLighting *= 2.0*tex2D(WarpLightingSampler,float2(len,0));</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="preprocessor">#if CUBEMAP || LIGHTING_PREVIEW || ( defined( _X360 ) &amp;&amp; FLASHLIGHT )</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    float3 worldSpaceNormal = mul( vNormal, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a187b88232d262184173f10ab86b72565">tangentSpaceTranspose</a> );</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    float3 diffuseComponent = albedo.xyz * diffuseLighting;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="preprocessor">#if defined( _X360 ) &amp;&amp; FLASHLIGHT</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// ssbump doesn&#39;t pass a normal to the flashlight...it computes shadowing a different way</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="preprocessor">#if ( BUMPMAP == 2 )</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordtype">bool</span> bHasNormal = <span class="keyword">false</span>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    float3 worldPosToLightVector = <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#abe28ba8e5bd1012c1f1b4150c72e3741">g_FlashlightPos</a> - i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">worldPos_projPosZ</a>.xyz;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    float3 tangentPosToLightVector;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    tangentPosToLightVector.x = dot( worldPosToLightVector, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a187b88232d262184173f10ab86b72565">tangentSpaceTranspose</a>[0] );</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    tangentPosToLightVector.y = dot( worldPosToLightVector, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a187b88232d262184173f10ab86b72565">tangentSpaceTranspose</a>[1] );</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    tangentPosToLightVector.z = dot( worldPosToLightVector, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a187b88232d262184173f10ab86b72565">tangentSpaceTranspose</a>[2] );</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    tangentPosToLightVector = normalize( tangentPosToLightVector );</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordtype">float</span> nDotL = saturate( vSSBumpVector.x*dot( tangentPosToLightVector, bumpBasis[0]) +</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                            vSSBumpVector.y*dot( tangentPosToLightVector, bumpBasis[1]) +</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                            vSSBumpVector.z*dot( tangentPosToLightVector, bumpBasis[2]) );</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordtype">bool</span> bHasNormal = <span class="keyword">true</span>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordtype">float</span> nDotL = 1.0f;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordtype">float</span> fFlashlight = <a class="code" href="common__flashlight__fxc_8h.html#a71aaba3ae1c61e487a2f1739a1f9e5bc">DoFlashlight</a>( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#abe28ba8e5bd1012c1f1b4150c72e3741">g_FlashlightPos</a>, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">worldPos_projPosZ</a>.xyz, i.flashlightSpacePos,</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        worldSpaceNormal, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a9c37331dc38fe04642176eb529b9b250">g_FlashlightAttenuationFactors</a>.xyz, </div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a9c37331dc38fe04642176eb529b9b250">g_FlashlightAttenuationFactors</a>.w, FlashlightSampler, ShadowDepthSampler,</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        RandRotSampler, 0, <span class="keyword">true</span>, <span class="keyword">false</span>, i.vProjPos.xy / i.vProjPos.w, <span class="keyword">false</span>, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a5e3aa16b345510dd66f1000d5f49a6d4">g_ShadowTweaks</a>, bHasNormal );</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    diffuseComponent = albedo.xyz * ( diffuseLighting + ( fFlashlight * nDotL ) );</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span>( bSelfIllum )</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        float3 selfIllumComponent = <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#ace53346f96325e6c8d059a74672293ee">g_SelfIllumTint</a> * albedo.xyz;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        diffuseComponent = lerp( diffuseComponent, selfIllumComponent, baseColor.a );</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> specularLighting = <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a>( 0.0f, 0.0f, 0.0f );</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="preprocessor">#if CUBEMAP</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">if</span>( bCubemap )</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        float3 worldVertToEyeVector = <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a6c6eab3f29adb784031576179376668b">g_EyePos</a> - i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">worldPos_projPosZ</a>.xyz;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        float3 reflectVect = <a class="code" href="common__fxc_8h.html#a5debce9b0422e4d6a54c19c6612b1cd1">CalcReflectionVectorUnnormalized</a>( worldSpaceNormal, worldVertToEyeVector );</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// Calc Fresnel factor</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        half3 eyeVect = normalize(worldVertToEyeVector);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="common__fxc_8h.html#a37c4c48ff47f0838f64b5a1fb3c803b2">HALF</a> fresnel = 1.0 - dot( worldSpaceNormal, eyeVect );</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        fresnel = pow( fresnel, 5.0 );</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        fresnel = fresnel * <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a261d6c2b20cd15f371ddb967d94bb046">g_OneMinusFresnelReflection</a> + <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#aea93b507048273193ae25c0e8e1d4975">g_FresnelReflection</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        </div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        specularLighting = <a class="code" href="common__ps__fxc_8h.html#a689a4075f7a9ad0661954f8af3fde3e4">ENV_MAP_SCALE</a> * texCUBE( <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a8fc2ef98233689922ea1e844899f1f6b">EnvmapSampler</a>, reflectVect );</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        specularLighting *= specularFactor;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                   </div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        specularLighting *= <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a82569f91263c399acad6fb28dc70456f">g_EnvmapTint</a>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="preprocessor">#if FANCY_BLENDING == 0</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> specularLightingSquared = specularLighting * specularLighting;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        specularLighting = lerp( specularLighting, specularLightingSquared, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a62f176c996256e59437cd9cc98168a64">g_EnvmapContrast</a> );</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> greyScale = dot( specularLighting, <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a>( 0.299f, 0.587f, 0.114f ) );</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        specularLighting = lerp( greyScale, specularLighting, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#af7edefed80ee54b9ac2dc1669fc21347">g_EnvmapSaturation</a> );</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        specularLighting *= fresnel;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a> result = diffuseComponent + specularLighting;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    </div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="preprocessor">#if LIGHTING_PREVIEW</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    worldSpaceNormal = mul( vNormal, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a187b88232d262184173f10ab86b72565">tangentSpaceTranspose</a> );</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="preprocessor">#   if LIGHTING_PREVIEW == 1</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordtype">float</span> dotprod = 0.7+0.25 * dot( worldSpaceNormal, normalize( float3( 1, 2, -.5 ) ) );</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="common__ps__fxc_8h.html#a7f7c4b11b2d3122f30714def8941dd4c">FinalOutput</a>( <a class="code" href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a>( dotprod*albedo.xyz, <a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> ), 0, <a class="code" href="common__ps__fxc_8h.html#a9a4811d77bb8bb46aacfd2e9296eb1a5">PIXEL_FOG_TYPE_NONE</a>, <a class="code" href="common__ps__fxc_8h.html#ac0fe8b6eff2811ca76d7ca7ac8d90854">TONEMAP_SCALE_NONE</a> );</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="preprocessor">#   else</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html">LPREVIEW_PS_OUT</a> ret;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    ret.<a class="code" href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html#abcfd5f860f4960e9a8766db8c81065fe">color</a> = float4( albedo.xyz,<a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> );</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    ret.<a class="code" href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html#aa598a8f2f35e13f29c0e9a24a48b42bf">normal</a> = float4( worldSpaceNormal,<a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> );</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    ret.<a class="code" href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html#a8a5f64c7a2372782c4f7061cd62b8c02">position</a> = float4( i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">worldPos_projPosZ</a>.xyz, <a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> );</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    ret.<a class="code" href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html#aeda1ae2b2713a711283d246d5d5b6dd7">flags</a> = float4( 1, 1, 1, <a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> );</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="common__ps__fxc_8h.html#a7f7c4b11b2d3122f30714def8941dd4c">FinalOutput</a>( ret, 0, <a class="code" href="common__ps__fxc_8h.html#a9a4811d77bb8bb46aacfd2e9296eb1a5">PIXEL_FOG_TYPE_NONE</a>, <a class="code" href="common__ps__fxc_8h.html#ac0fe8b6eff2811ca76d7ca7ac8d90854">TONEMAP_SCALE_NONE</a> );  </div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor">#   endif</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor">#else // == end LIGHTING_PREVIEW ==</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordtype">bool</span> bWriteDepthToAlpha = <span class="keyword">false</span>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// ps_2_b and beyond</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#if !(defined(SHADER_MODEL_PS_1_1) || defined(SHADER_MODEL_PS_1_4) || defined(SHADER_MODEL_PS_2_0))</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    bWriteDepthToAlpha = ( WRITE_DEPTH_TO_DESTALPHA != 0 ) &amp;&amp; ( WRITEWATERFOGTODESTALPHA == 0 );</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordtype">float</span> fogFactor = <a class="code" href="common__ps__fxc_8h.html#a55c8b01e0de7ca182b6ec221f7586665">CalcPixelFogFactor</a>( PIXELFOGTYPE, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a71c8c9a36096be13aa6c59df81a20dfc">g_FogParams</a>, <a class="code" href="lightmappedgeneric__ps2__3__x_8h.html#a6c6eab3f29adb784031576179376668b">g_EyePos</a>.z, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">worldPos_projPosZ</a>.z, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">worldPos_projPosZ</a>.w );</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="preprocessor">#if WRITEWATERFOGTODESTALPHA &amp;&amp; (PIXELFOGTYPE == PIXEL_FOG_TYPE_HEIGHT)</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> = fogFactor;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="common__ps__fxc_8h.html#a7f7c4b11b2d3122f30714def8941dd4c">FinalOutput</a>( float4( result.rgb, <a class="code" href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a> ), fogFactor, PIXELFOGTYPE, <a class="code" href="common__ps__fxc_8h.html#a2b1eb09f81cd4f2017d46e9846ef51cd">TONEMAP_SCALE_LINEAR</a>, bWriteDepthToAlpha, i.<a class="code" href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">worldPos_projPosZ</a>.w );</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div><div class="ttc" id="struct_l_p_r_e_v_i_e_w___p_s___o_u_t_html_abcfd5f860f4960e9a8766db8c81065fe"><div class="ttname"><a href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html#abcfd5f860f4960e9a8766db8c81065fe">LPREVIEW_PS_OUT::color</a></div><div class="ttdeci">float4 color</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:79</div></div>
<div class="ttc" id="common__ps__fxc_8h_html_a55c8b01e0de7ca182b6ec221f7586665"><div class="ttname"><a href="common__ps__fxc_8h.html#a55c8b01e0de7ca182b6ec221f7586665">CalcPixelFogFactor</a></div><div class="ttdeci">float CalcPixelFogFactor(int iPIXELFOGTYPE, const float4 fogParams, const float flEyePosZ, const float flWorldPosZ, const float flProjPosZ)</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:240</div></div>
<div class="ttc" id="struct_p_s___i_n_p_u_t_html_a6f37bb7e0728005ce7ea1a4d46bb4041"><div class="ttname"><a href="struct_p_s___i_n_p_u_t.html#a6f37bb7e0728005ce7ea1a4d46bb4041">PS_INPUT::worldPos_projPosZ</a></div><div class="ttdeci">HALF4 worldPos_projPosZ</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:171</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_aecd68aaedda8309584af6bc2033bc1f3"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#aecd68aaedda8309584af6bc2033bc1f3">BaseTextureSampler2</a></div><div class="ttdeci">sampler BaseTextureSampler2</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:138</div></div>
<div class="ttc" id="common__ps__fxc_8h_html_a0e78bad9e80009ea186c318f1a27c70e"><div class="ttname"><a href="common__ps__fxc_8h.html#a0e78bad9e80009ea186c318f1a27c70e">DecompressNormal</a></div><div class="ttdeci">float4 DecompressNormal(sampler NormalSampler, float2 tc, int nDecompressionMode, sampler AlphaSampler)</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:161</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_ace53346f96325e6c8d059a74672293ee"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#ace53346f96325e6c8d059a74672293ee">g_SelfIllumTint</a></div><div class="ttdeci">const HALF4 g_SelfIllumTint</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:86</div></div>
<div class="ttc" id="struct_p_s___i_n_p_u_t_html_af7032b284f6db8efeafc1abfe5263535"><div class="ttname"><a href="struct_p_s___i_n_p_u_t.html#af7032b284f6db8efeafc1abfe5263535">PS_INPUT::baseTexCoord</a></div><div class="ttdeci">HALF2 baseTexCoord</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:161</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a5e3aa16b345510dd66f1000d5f49a6d4"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a5e3aa16b345510dd66f1000d5f49a6d4">g_ShadowTweaks</a></div><div class="ttdeci">const float4 g_ShadowTweaks</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:102</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a82569f91263c399acad6fb28dc70456f"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a82569f91263c399acad6fb28dc70456f">g_EnvmapTint</a></div><div class="ttdeci">const HALF4 g_EnvmapTint</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:50</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_abe28ba8e5bd1012c1f1b4150c72e3741"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#abe28ba8e5bd1012c1f1b4150c72e3741">g_FlashlightPos</a></div><div class="ttdeci">const float3 g_FlashlightPos</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:100</div></div>
<div class="ttc" id="common__lightmappedgeneric__fxc_8h_html_a4091425bdc1136b8914fbfc188cdd3d0"><div class="ttname"><a href="common__lightmappedgeneric__fxc_8h.html#a4091425bdc1136b8914fbfc188cdd3d0">GetBaseTextureAndNormal</a></div><div class="ttdeci">void GetBaseTextureAndNormal(sampler base, sampler base2, sampler bump, bool bBase2, bool bBump, float3 coords, float3 vWeights, out float4 vResultBase, out float4 vResultBase2, out float4 vResultBump)</div><div class="ttdef"><b>Definition:</b> common_lightmappedgeneric_fxc.h:91</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a0269ccc18e320f83fcad882eafd2289f"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a0269ccc18e320f83fcad882eafd2289f">LightmapSampler</a></div><div class="ttdeci">sampler LightmapSampler</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:106</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a1b17b944cce4d29ad3d11b125f7ec656"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a1b17b944cce4d29ad3d11b125f7ec656">BaseTextureSampler</a></div><div class="ttdeci">sampler BaseTextureSampler</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:105</div></div>
<div class="ttc" id="struct_p_s___i_n_p_u_t_html_aa5dc45327b8a3ea4c384185fcd17c70d"><div class="ttname"><a href="struct_p_s___i_n_p_u_t.html#aa5dc45327b8a3ea4c384185fcd17c70d">PS_INPUT::detailOrBumpAndEnvmapMaskTexCoord</a></div><div class="ttdeci">HALF4 detailOrBumpAndEnvmapMaskTexCoord</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:164</div></div>
<div class="ttc" id="common__flashlight__fxc_8h_html_a71aaba3ae1c61e487a2f1739a1f9e5bc"><div class="ttname"><a href="common__flashlight__fxc_8h.html#a71aaba3ae1c61e487a2f1739a1f9e5bc">DoFlashlight</a></div><div class="ttdeci">float3 DoFlashlight(float3 flashlightPos, float3 worldPos, float4 flashlightSpacePosition, float3 worldNormal, float3 attenuationFactors, float farZ, sampler FlashlightSampler, sampler FlashlightDepthSampler, sampler RandomRotationSampler, int nShadowLevel, bool bDoShadows, bool bAllowHighQuality, const float2 vScreenPos, bool bClip, float4 vShadowTweaks=float4(3/1024.0f, 0.0005f, 0.0f, 0.0f), bool bHasNormal=true)</div><div class="ttdef"><b>Definition:</b> common_flashlight_fxc.h:732</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_acfba57a4e6bcb8a680b50a5fbfdaf920"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#acfba57a4e6bcb8a680b50a5fbfdaf920">g_FresnelReflectionReg</a></div><div class="ttdeci">const HALF4 g_FresnelReflectionReg</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:83</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a71c8c9a36096be13aa6c59df81a20dfc"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a71c8c9a36096be13aa6c59df81a20dfc">g_FogParams</a></div><div class="ttdeci">const HALF4 g_FogParams</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:94</div></div>
<div class="ttc" id="struct_p_s___i_n_p_u_t_html_a187b88232d262184173f10ab86b72565"><div class="ttname"><a href="struct_p_s___i_n_p_u_t.html#a187b88232d262184173f10ab86b72565">PS_INPUT::tangentSpaceTranspose</a></div><div class="ttdeci">HALF3x3 tangentSpaceTranspose</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:172</div></div>
<div class="ttc" id="struct_l_p_r_e_v_i_e_w___p_s___o_u_t_html_aeda1ae2b2713a711283d246d5d5b6dd7"><div class="ttname"><a href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html#aeda1ae2b2713a711283d246d5d5b6dd7">LPREVIEW_PS_OUT::flags</a></div><div class="ttdeci">float4 flags</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:82</div></div>
<div class="ttc" id="common__ps__fxc_8h_html_a9a4811d77bb8bb46aacfd2e9296eb1a5"><div class="ttname"><a href="common__ps__fxc_8h.html#a9a4811d77bb8bb46aacfd2e9296eb1a5">PIXEL_FOG_TYPE_NONE</a></div><div class="ttdeci">#define PIXEL_FOG_TYPE_NONE</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:68</div></div>
<div class="ttc" id="common__ps__fxc_8h_html"><div class="ttname"><a href="common__ps__fxc_8h.html">common_ps_fxc.h</a></div></div>
<div class="ttc" id="common__ps__fxc_8h_html_a7f7c4b11b2d3122f30714def8941dd4c"><div class="ttname"><a href="common__ps__fxc_8h.html#a7f7c4b11b2d3122f30714def8941dd4c">FinalOutput</a></div><div class="ttdeci">float4 FinalOutput(const float4 vShaderColor, float pixelFogFactor, const int iPIXELFOGTYPE, const int iTONEMAP_SCALE_TYPE, const bool bWriteDepthToDestAlpha=false, const float flProjZ=1.0f)</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:326</div></div>
<div class="ttc" id="common__fxc_8h_html_af670f18af069607f89be3363d337f6c6"><div class="ttname"><a href="common__fxc_8h.html#af670f18af069607f89be3363d337f6c6">ComputeLightmapCoordinates</a></div><div class="ttdeci">HALF2 ComputeLightmapCoordinates(HALF4 Lightmap1and2Coord, HALF2 Lightmap3Coord)</div><div class="ttdef"><b>Definition:</b> common_fxc.h:105</div></div>
<div class="ttc" id="struct_l_p_r_e_v_i_e_w___p_s___o_u_t_html"><div class="ttname"><a href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html">LPREVIEW_PS_OUT</a></div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:77</div></div>
<div class="ttc" id="common__fxc_8h_html_a1900a75979ef656f0a30c21364791f53"><div class="ttname"><a href="common__fxc_8h.html#a1900a75979ef656f0a30c21364791f53">HALF4</a></div><div class="ttdeci">#define HALF4</div><div class="ttdef"><b>Definition:</b> common_fxc.h:27</div></div>
<div class="ttc" id="common__fxc_8h_html_a4b89c2aa287db62d52b9660c777e6475"><div class="ttname"><a href="common__fxc_8h.html#a4b89c2aa287db62d52b9660c777e6475">HALF3</a></div><div class="ttdeci">#define HALF3</div><div class="ttdef"><b>Definition:</b> common_fxc.h:26</div></div>
<div class="ttc" id="struct_p_s___i_n_p_u_t_html_a8a1d5fcebf90e6704528b4eb020f4fd3"><div class="ttname"><a href="struct_p_s___i_n_p_u_t.html#a8a1d5fcebf90e6704528b4eb020f4fd3">PS_INPUT::vertexColor</a></div><div class="ttdeci">HALF4 vertexColor</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:175</div></div>
<div class="ttc" id="struct_l_p_r_e_v_i_e_w___p_s___o_u_t_html_a8a5f64c7a2372782c4f7061cd62b8c02"><div class="ttname"><a href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html#a8a5f64c7a2372782c4f7061cd62b8c02">LPREVIEW_PS_OUT::position</a></div><div class="ttdeci">float4 position</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:81</div></div>
<div class="ttc" id="struct_l_p_r_e_v_i_e_w___p_s___o_u_t_html_aa598a8f2f35e13f29c0e9a24a48b42bf"><div class="ttname"><a href="struct_l_p_r_e_v_i_e_w___p_s___o_u_t.html#aa598a8f2f35e13f29c0e9a24a48b42bf">LPREVIEW_PS_OUT::normal</a></div><div class="ttdeci">float4 normal</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:80</div></div>
<div class="ttc" id="common__ps__fxc_8h_html_ab65cc819518cf408bd2917e71fbd36f5"><div class="ttname"><a href="common__ps__fxc_8h.html#ab65cc819518cf408bd2917e71fbd36f5">TextureCombine</a></div><div class="ttdeci">float4 TextureCombine(float4 baseColor, float4 detailColor, int combine_mode, float fBlendFactor)</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:679</div></div>
<div class="ttc" id="struct_p_s___i_n_p_u_t_html_a14a79b9c26e41188d9314402515cb243"><div class="ttname"><a href="struct_p_s___i_n_p_u_t.html#a14a79b9c26e41188d9314402515cb243">PS_INPUT::vertexBlendX_fogFactorW</a></div><div class="ttdeci">float4 vertexBlendX_fogFactorW</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:176</div></div>
<div class="ttc" id="common__fxc_8h_html_af50aa3375b5680172aabe1679bc89b70"><div class="ttname"><a href="common__fxc_8h.html#af50aa3375b5680172aabe1679bc89b70">GammaToLinear</a></div><div class="ttdeci">float3 GammaToLinear(const float3 gamma)</div><div class="ttdef"><b>Definition:</b> common_fxc.h:189</div></div>
<div class="ttc" id="struct_p_s___i_n_p_u_t_html"><div class="ttname"><a href="struct_p_s___i_n_p_u_t.html">PS_INPUT</a></div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:155</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a69e1b4789f63df74f7e081245c4f96f4"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a69e1b4789f63df74f7e081245c4f96f4">g_DetailBlendFactor</a></div><div class="ttdeci">#define g_DetailBlendFactor</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:91</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_af7edefed80ee54b9ac2dc1669fc21347"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#af7edefed80ee54b9ac2dc1669fc21347">g_EnvmapSaturation</a></div><div class="ttdeci">const HALF3 g_EnvmapSaturation</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:82</div></div>
<div class="ttc" id="common__lightmappedgeneric__fxc_8h_html"><div class="ttname"><a href="common__lightmappedgeneric__fxc_8h.html">common_lightmappedgeneric_fxc.h</a></div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a86b311efeef504ca16ba48e3c52f5b48"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a86b311efeef504ca16ba48e3c52f5b48">g_DetailTint_and_BlendFactor</a></div><div class="ttdeci">const float4 g_DetailTint_and_BlendFactor</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:89</div></div>
<div class="ttc" id="common__ps__fxc_8h_html_a2b1eb09f81cd4f2017d46e9846ef51cd"><div class="ttname"><a href="common__ps__fxc_8h.html#a2b1eb09f81cd4f2017d46e9846ef51cd">TONEMAP_SCALE_LINEAR</a></div><div class="ttdeci">#define TONEMAP_SCALE_LINEAR</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:65</div></div>
<div class="ttc" id="struct_p_s___i_n_p_u_t_html_a0e7a66e66d2c9d4e8cb26930e411cae9"><div class="ttname"><a href="struct_p_s___i_n_p_u_t.html#a0e7a66e66d2c9d4e8cb26930e411cae9">PS_INPUT::lightmapTexCoord3</a></div><div class="ttdeci">HALF4 lightmapTexCoord3</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:170</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a25c22a850bb768967056c7286d749ab3"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a25c22a850bb768967056c7286d749ab3">AlphaMapSampler</a></div><div class="ttdeci">#define AlphaMapSampler</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:120</div></div>
<div class="ttc" id="common__flashlight__fxc_8h_html"><div class="ttname"><a href="common__flashlight__fxc_8h.html">common_flashlight_fxc.h</a></div></div>
<div class="ttc" id="lightmappedgeneric__dx9_8cpp_html_a52ee9c5a3e9552fd381e81e92a3cc349"><div class="ttname"><a href="lightmappedgeneric__dx9_8cpp.html#a52ee9c5a3e9552fd381e81e92a3cc349">alpha</a></div><div class="ttdeci">If this then when detail alpha</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_dx9.cpp:55</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_ac69e0559621f39238e034ad4545bc638"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#ac69e0559621f39238e034ad4545bc638">EnvmapMaskSampler</a></div><div class="ttdeci">sampler EnvmapMaskSampler</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:131</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a2f0a682b6b8e75ecef592237040ebc94"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a2f0a682b6b8e75ecef592237040ebc94">g_flAlpha2</a></div><div class="ttdeci">#define g_flAlpha2</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:97</div></div>
<div class="ttc" id="struct_p_s___i_n_p_u_t_html_a39fe9b54fa74671060e2caf7235acc51"><div class="ttname"><a href="struct_p_s___i_n_p_u_t.html#a39fe9b54fa74671060e2caf7235acc51">PS_INPUT::lightmapTexCoord1And2</a></div><div class="ttdeci">HALF4 lightmapTexCoord1And2</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:168</div></div>
<div class="ttc" id="common__lightmappedgeneric__fxc_8h_html_a7452f01a1f9682b087c615a9545aff74"><div class="ttname"><a href="common__lightmappedgeneric__fxc_8h.html#a7452f01a1f9682b087c615a9545aff74">LightMapSample</a></div><div class="ttdeci">float3 LightMapSample(sampler LightmapSampler, float2 vTexCoord)</div><div class="ttdef"><b>Definition:</b> common_lightmappedgeneric_fxc.h:155</div></div>
<div class="ttc" id="cable__dx9_8cpp_html_a0544c3fe466e421738dae463968b70ba"><div class="ttname"><a href="cable__dx9_8cpp.html#a0544c3fe466e421738dae463968b70ba">else</a></div><div class="ttdeci">else</div><div class="ttdef"><b>Definition:</b> cable_dx9.cpp:85</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a8fc2ef98233689922ea1e844899f1f6b"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a8fc2ef98233689922ea1e844899f1f6b">EnvmapSampler</a></div><div class="ttdeci">sampler EnvmapSampler</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:107</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a9c37331dc38fe04642176eb529b9b250"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a9c37331dc38fe04642176eb529b9b250">g_FlashlightAttenuationFactors</a></div><div class="ttdeci">const float4 g_FlashlightAttenuationFactors</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:99</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a6c6eab3f29adb784031576179376668b"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a6c6eab3f29adb784031576179376668b">g_EyePos</a></div><div class="ttdeci">const HALF3 g_EyePos</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:93</div></div>
<div class="ttc" id="common__fxc_8h_html_a37c4c48ff47f0838f64b5a1fb3c803b2"><div class="ttname"><a href="common__fxc_8h.html#a37c4c48ff47f0838f64b5a1fb3c803b2">HALF</a></div><div class="ttdeci">#define HALF</div><div class="ttdef"><b>Definition:</b> common_fxc.h:24</div></div>
<div class="ttc" id="common__fxc_8h_html_a3437a813ae692c055098dd2bf74372da"><div class="ttname"><a href="common__fxc_8h.html#a3437a813ae692c055098dd2bf74372da">ComputeBumpedLightmapCoordinates</a></div><div class="ttdeci">void ComputeBumpedLightmapCoordinates(HALF4 Lightmap1and2Coord, HALF2 Lightmap3Coord, out HALF2 bumpCoord1, out HALF2 bumpCoord2, out HALF2 bumpCoord3)</div><div class="ttdef"><b>Definition:</b> common_fxc.h:110</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a3ac451759383db01abbb4134759e2e74"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a3ac451759383db01abbb4134759e2e74">BumpmapSampler</a></div><div class="ttdeci">sampler BumpmapSampler</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:116</div></div>
<div class="ttc" id="common__ps__fxc_8h_html_a689a4075f7a9ad0661954f8af3fde3e4"><div class="ttname"><a href="common__ps__fxc_8h.html#a689a4075f7a9ad0661954f8af3fde3e4">ENV_MAP_SCALE</a></div><div class="ttdeci">#define ENV_MAP_SCALE</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:52</div></div>
<div class="ttc" id="common__fxc_8h_html_a5debce9b0422e4d6a54c19c6612b1cd1"><div class="ttname"><a href="common__fxc_8h.html#a5debce9b0422e4d6a54c19c6612b1cd1">CalcReflectionVectorUnnormalized</a></div><div class="ttdeci">HALF3 CalcReflectionVectorUnnormalized(HALF3 normal, HALF3 eyeVector)</div><div class="ttdef"><b>Definition:</b> common_fxc.h:60</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a261d6c2b20cd15f371ddb967d94bb046"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a261d6c2b20cd15f371ddb967d94bb046">g_OneMinusFresnelReflection</a></div><div class="ttdeci">#define g_OneMinusFresnelReflection</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:85</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a7f7f83b829813250c0d027add034d5f2"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a7f7f83b829813250c0d027add034d5f2">g_FlashlightWorldToTexture</a></div><div class="ttdeci">const float4x4 g_FlashlightWorldToTexture</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:101</div></div>
<div class="ttc" id="common__fxc_8h_html_afafc4b4fa1e8ef77ca729bb1823a2737"><div class="ttname"><a href="common__fxc_8h.html#afafc4b4fa1e8ef77ca729bb1823a2737">HALF2</a></div><div class="ttdeci">#define HALF2</div><div class="ttdef"><b>Definition:</b> common_fxc.h:25</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_aea93b507048273193ae25c0e8e1d4975"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#aea93b507048273193ae25c0e8e1d4975">g_FresnelReflection</a></div><div class="ttdeci">#define g_FresnelReflection</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:84</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a0f8142f158fe5964b2596848ac733f3c"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a0f8142f158fe5964b2596848ac733f3c">g_DetailTint</a></div><div class="ttdeci">#define g_DetailTint</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:90</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_adf0b326128f3299c8198c968cf8a1eda"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#adf0b326128f3299c8198c968cf8a1eda">g_TintValuesAndLightmapScale</a></div><div class="ttdeci">const float4 g_TintValuesAndLightmapScale</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:95</div></div>
<div class="ttc" id="common__ps__fxc_8h_html_ac0fe8b6eff2811ca76d7ca7ac8d90854"><div class="ttname"><a href="common__ps__fxc_8h.html#ac0fe8b6eff2811ca76d7ca7ac8d90854">TONEMAP_SCALE_NONE</a></div><div class="ttdeci">#define TONEMAP_SCALE_NONE</div><div class="ttdef"><b>Definition:</b> common_ps_fxc.h:64</div></div>
<div class="ttc" id="lightmappedgeneric__ps2__3__x_8h_html_a62f176c996256e59437cd9cc98168a64"><div class="ttname"><a href="lightmappedgeneric__ps2__3__x_8h.html#a62f176c996256e59437cd9cc98168a64">g_EnvmapContrast</a></div><div class="ttdeci">const HALF3 g_EnvmapContrast</div><div class="ttdef"><b>Definition:</b> lightmappedgeneric_ps2_3_x.h:81</div></div>
<div class="ttc" id="common__fxc_8h_html_ab051e7816a6430fc1c099eafc49ead51"><div class="ttname"><a href="common__fxc_8h.html#ab051e7816a6430fc1c099eafc49ead51">HALF3x3</a></div><div class="ttdeci">#define HALF3x3</div><div class="ttdef"><b>Definition:</b> common_fxc.h:28</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_df1e470bc8392a455b09841193f2f465.html">materialsystem</a></li><li class="navelem"><a class="el" href="dir_1fb050cf0f02a943813355fcd006d816.html">stdshaders</a></li><li class="navelem"><a class="el" href="lightmappedgeneric__ps2__3__x_8h.html">lightmappedgeneric_ps2_3_x.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
