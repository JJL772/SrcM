<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>interfaces: public/zip/XUnzip.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">interfaces
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_x_unzip_8h_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">XUnzip.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_x_unzip_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// XUnzip.h  Version 1.1</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Authors:      Mark Adler et al. (see below)</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Modified by:  Lucian Wischik</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//               lu@wischik.com</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// Version 1.0   - Turned C files into just a single CPP file</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//               - Made them compile cleanly as C++ files</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//               - Gave them simpler APIs</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//               - Added the ability to zip/unzip directly in memory without </span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//                 any intermediate files</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// Modified by:  Hans Dietrich</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//               hdietrich2@hotmail.com</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// Version 1.1:  - Added Unicode support to CreateZip() and ZipAdd()</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//               - Changed file names to avoid conflicts with Lucian&#39;s files</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"></span><span class="comment">//</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// Lucian Wischik&#39;s comments:</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// --------------------------</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// THIS FILE is almost entirely based upon code by info-zip.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// It has been modified by Lucian Wischik.</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// The original code may be found at http://www.info-zip.org</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// The original copyright text follows.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span><span class="comment">//</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// Original authors&#39; comments:</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// ---------------------------</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// This is version 2002-Feb-16 of the Info-ZIP copyright and license. The </span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// definitive version of this document should be available at </span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// ftp://ftp.info-zip.org/pub/infozip/license.html indefinitely.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// Copyright (c) 1990-2002 Info-ZIP.  All rights reserved.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// For the purposes of this copyright and license, &quot;Info-ZIP&quot; is defined as</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// the following set of individuals:</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">//   Mark Adler, John Bush, Karl Davis, Harald Denker, Jean-Michel Dubois,</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">//   Jean-loup Gailly, Hunter Goatley, Ian Gorman, Chris Herborth, Dirk Haase,</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">//   Greg Hartwig, Robert Heath, Jonathan Hudson, Paul Kienitz, </span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">//   David Kirschbaum, Johnny Lee, Onno van der Linden, Igor Mandrichenko, </span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//   Steve P. Miller, Sergio Monesi, Keith Owens, George Petrov, Greg Roelofs, </span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//   Kai Uwe Rommel, Steve Salisbury, Dave Smith, Christian Spieler, </span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//   Antoine Verheijen, Paul von Behren, Rich Wales, Mike White</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// This software is provided &quot;as is&quot;, without warranty of any kind, express</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// or implied.  In no event shall Info-ZIP or its contributors be held liable</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// for any direct, indirect, incidental, special or consequential damages</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// arising out of the use of or inability to use this software.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// Permission is granted to anyone to use this software for any purpose,</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// including commercial applications, and to alter it and redistribute it</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">// freely, subject to the following restrictions:</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//    1. Redistributions of source code must retain the above copyright notice,</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">//       definition, disclaimer, and this list of conditions.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//    2. Redistributions in binary form (compiled executables) must reproduce </span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">//       the above copyright notice, definition, disclaimer, and this list of </span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">//       conditions in documentation and/or other materials provided with the </span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">//       distribution. The sole exception to this condition is redistribution </span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">//       of a standard UnZipSFX binary as part of a self-extracting archive; </span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">//       that is permitted without inclusion of this license, as long as the </span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">//       normal UnZipSFX banner has not been removed from the binary or disabled.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//    3. Altered versions--including, but not limited to, ports to new </span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//       operating systems, existing ports with new graphical interfaces, and </span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//       dynamic, shared, or static library versions--must be plainly marked </span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">//       as such and must not be misrepresented as being the original source.  </span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">//       Such altered versions also must not be misrepresented as being </span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//       Info-ZIP releases--including, but not limited to, labeling of the </span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//       altered versions with the names &quot;Info-ZIP&quot; (or any variation thereof, </span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//       including, but not limited to, different capitalizations), </span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//       &quot;Pocket UnZip&quot;, &quot;WiZ&quot; or &quot;MacZip&quot; without the explicit permission of </span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//       Info-ZIP.  Such altered versions are further prohibited from </span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">//       misrepresentative use of the Zip-Bugs or Info-ZIP e-mail addresses or </span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//       of the Info-ZIP URL(s).</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">//    4. Info-ZIP retains the right to use the names &quot;Info-ZIP&quot;, &quot;Zip&quot;, &quot;UnZip&quot;,</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">//       &quot;UnZipSFX&quot;, &quot;WiZ&quot;, &quot;Pocket UnZip&quot;, &quot;Pocket Zip&quot;, and &quot;MacZip&quot; for its </span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">//       own source and binary releases.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#ifndef XUNZIP_H</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#define XUNZIP_H</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#if !defined( DWORD )</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="_x_unzip_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a798af1e30bc65f319c1a246cecf59e39">   96</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_x_unzip_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#if !defined( TCHAR )</span></div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a03bdb8ce5895c7e261aadc2529637546">  101</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">char</span> <a class="code" href="_x_unzip_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#if defined(POSIX) &amp;&amp; !defined(MAX_PATH)</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#define MAX_PATH PATH_MAX</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">bool</span> <a class="code" href="basetypes_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#ifndef XZIP_H</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#if !defined(DECLARE_HANDLE)</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#if !defined(HANDLE)</span></div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#aa8c0374618b33785ccb02f74bcfebc46">  113</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">void</span> *<a class="code" href="_x_unzip_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#aec4871ff366a33730b02718ef1c85c0c">  115</a></span>&#160;<span class="preprocessor">#define DECLARE_HANDLE(name) typedef struct name##__ { int unused; } *name</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<a class="code" href="_x_unzip_8h.html#aec4871ff366a33730b02718ef1c85c0c">DECLARE_HANDLE</a>(HZIP);       <span class="comment">// An HZIP identifies a zip file that is being created</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#if defined(_WIN32) &amp;&amp; !defined(_WINBASE_) &amp;&amp; !defined(_FILETIME_)</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#define _FILETIME_</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>_FILETIME</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="dxabstract__types_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwLowDateTime;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="dxabstract__types_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwHighDateTime;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;} FILETIME, * LPFILETIME, *PFILETIME;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#if defined(POSIX)</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="keyword">typedef</span> time_t FILETIME;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">  133</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="dxabstract__types_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// return codes from any of the zip functions. Listed later.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a57c1d6eea6f257dea453d29f8e882669">  136</a></span>&#160;<span class="preprocessor">#define ZIP_HANDLE   1</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#ad3d9f5d82ea79c54360e182dbcb2e56f">  137</a></span>&#160;<span class="preprocessor">#define ZIP_FILENAME 2</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a81e59ce3707b6ca84dfd5b14c8a1a1d7">  138</a></span>&#160;<span class="preprocessor">#define ZIP_MEMORY   3</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y.html">  140</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y.html#a5e43737666f60d5c208aa56aea66e69b">  141</a></span>&#160;{ <span class="keywordtype">int</span> <a class="code" href="struct_z_i_p_e_n_t_r_y.html#a5e43737666f60d5c208aa56aea66e69b">index</a>;                 <span class="comment">// index of this file within the zip</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y.html#a446b17edd579c12072c5716ac5385ee0">  142</a></span>&#160;  <span class="keywordtype">char</span> name[<a class="code" href="platform_8h.html#ab99ded389af74001a6298fc9e44e74e5">MAX_PATH</a>];       <span class="comment">// filename within the zip</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y.html#a450c7abba46eccdefd999abb8434b21b">  143</a></span>&#160;  <a class="code" href="dxabstract__types_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct_z_i_p_e_n_t_r_y.html#a450c7abba46eccdefd999abb8434b21b">attr</a>;                <span class="comment">// attributes, as in GetFileAttributes.</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y.html#af95a97a3d8be11c951d66bfee9bfe421">  144</a></span>&#160;  FILETIME atime,ctime,<a class="code" href="struct_z_i_p_e_n_t_r_y.html#af95a97a3d8be11c951d66bfee9bfe421">mtime</a>;<span class="comment">// access, create, modify filetimes</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y.html#a8f763f75556757c2e1b0729f9de10095">  145</a></span>&#160;  <span class="keywordtype">long</span> <a class="code" href="struct_z_i_p_e_n_t_r_y.html#a8f763f75556757c2e1b0729f9de10095">comp_size</a>;            <span class="comment">// sizes of item, compressed and uncompressed. These</span></div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y.html#aa857649ee4d66fcc7ba0d2f2086ca639">  146</a></span>&#160;  <span class="keywordtype">long</span> <a class="code" href="struct_z_i_p_e_n_t_r_y.html#aa857649ee4d66fcc7ba0d2f2086ca639">unc_size</a>;             <span class="comment">// may be -1 if not yet known (e.g. being streamed in)</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;} <a class="code" href="struct_z_i_p_e_n_t_r_y.html">ZIPENTRY</a>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y_w.html">  149</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y_w.html#aa3c1a622722c3e44773b431ec86bd412">  150</a></span>&#160;{ <span class="keywordtype">int</span> <a class="code" href="struct_z_i_p_e_n_t_r_y_w.html#aa3c1a622722c3e44773b431ec86bd412">index</a>;                 <span class="comment">// index of this file within the zip</span></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y_w.html#a65126bb5be5021912f169f297d6c7a51">  151</a></span>&#160;  <a class="code" href="_x_unzip_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> name[<a class="code" href="platform_8h.html#ab99ded389af74001a6298fc9e44e74e5">MAX_PATH</a>];      <span class="comment">// filename within the zip</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y_w.html#a9d0e6113c0de1db2a3fa0e568b37324f">  152</a></span>&#160;  <a class="code" href="dxabstract__types_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct_z_i_p_e_n_t_r_y_w.html#a9d0e6113c0de1db2a3fa0e568b37324f">attr</a>;                <span class="comment">// attributes, as in GetFileAttributes.</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y_w.html#a7bec199163bc632274a2b0ca2a1f3d66">  153</a></span>&#160;  FILETIME atime,ctime,<a class="code" href="struct_z_i_p_e_n_t_r_y_w.html#a7bec199163bc632274a2b0ca2a1f3d66">mtime</a>;<span class="comment">// access, create, modify filetimes</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y_w.html#a0d2bd651d387de527fafd02ed99cae49">  154</a></span>&#160;  <span class="keywordtype">long</span> <a class="code" href="struct_z_i_p_e_n_t_r_y_w.html#a0d2bd651d387de527fafd02ed99cae49">comp_size</a>;            <span class="comment">// sizes of item, compressed and uncompressed. These</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="struct_z_i_p_e_n_t_r_y_w.html#a4e7ff4540e2e9bccf0f22c5b8f73e862">  155</a></span>&#160;  <span class="keywordtype">long</span> <a class="code" href="struct_z_i_p_e_n_t_r_y_w.html#a4e7ff4540e2e9bccf0f22c5b8f73e862">unc_size</a>;             <span class="comment">// may be -1 if not yet known (e.g. being streamed in)</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;} <a class="code" href="struct_z_i_p_e_n_t_r_y_w.html">ZIPENTRYW</a>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">// OpenZip()</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">// Purpose:     Open an existing zip archive file</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">// Parameters:  z      - archive file name if flags is ZIP_FILENAME;  for other</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">//                       uses see below</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">//              len    - for memory (ZIP_MEMORY) should be the buffer size;</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">//                       for other uses, should be 0</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">//              flags  - indicates usage, see below;  for files, this will be</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">//                       ZIP_FILENAME</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">// Returns:     HZIP   - non-zero if zip archive opened ok, otherwise 0</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;HZIP <a class="code" href="_x_unzip_8h.html#a2e0b74182c0abcc87bc5235b11e7e90e">OpenZip</a>(<span class="keywordtype">void</span> *z, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len, <a class="code" href="dxabstract__types_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">// OpenZip - opens a zip file and returns a handle with which you can</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">// subsequently examine its contents. You can open a zip file from:</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">// from a pipe:             OpenZip(hpipe_read,0, ZIP_HANDLE);</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">// from a file (by handle): OpenZip(hfile,0,      ZIP_HANDLE);</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">// from a file (by name):   OpenZip(&quot;c:\\test.zip&quot;,0, ZIP_FILENAME);</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">// from a memory block:     OpenZip(bufstart, buflen, ZIP_MEMORY);</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">// If the file is opened through a pipe, then items may only be</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">// accessed in increasing order, and an item may only be unzipped once,</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// although GetZipItem can be called immediately before and after unzipping</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">// it. If it&#39;s opened i n any other way, then full random access is possible.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">// Note: pipe input is not yet implemented.</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">// GetZipItem()</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">// Purpose:     Get information about an item in an open zip archive</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">// Parameters:  hz      - handle of open zip archive</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">//              index   - index number (0 based) of item in zip </span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">//              ze      - pointer to a ZIPENTRY (if ANSI) or ZIPENTRYW struct</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">//                        (if Unicode)</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">// Returns:     ZRESULT - ZR_OK if success, otherwise some other value</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">#ifdef _UNICODE</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">#define GetZipItem GetZipItemW</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#afa284f5e73b1834b44354cea26a8ae01">  205</a></span>&#160;<span class="preprocessor">#define GetZipItem GetZipItemA</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a> <a class="code" href="_x_unzip_8h.html#abe158303e59218a7455da2a110d65b65">GetZipItemA</a>(HZIP hz, <span class="keywordtype">int</span> index, <a class="code" href="struct_z_i_p_e_n_t_r_y.html">ZIPENTRY</a> *ze);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a> <a class="code" href="_x_unzip_8h.html#a5f3c6b810ca6850f842e526165425144">GetZipItemW</a>(HZIP hz, <span class="keywordtype">int</span> index, <a class="code" href="struct_z_i_p_e_n_t_r_y_w.html">ZIPENTRYW</a> *ze);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">// GetZipItem - call this to get information about an item in the zip.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">// If index is -1 and the file wasn&#39;t opened through a pipe,</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">// then it returns information about the whole zipfile</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">// (and in particular ze.index returns the number of index items).</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">// Note: the item might be a directory (ze.attr &amp; FILE_ATTRIBUTE_DIRECTORY)</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">// See below for notes on what happens when you unzip such an item.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">// Note: if you are opening the zip through a pipe, then random access</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">// is not possible and GetZipItem(-1) fails and you can&#39;t discover the number</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">// of items except by calling GetZipItem on each one of them in turn,</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// starting at 0, until eventually the call fails. Also, in the event that</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">// you are opening through a pipe and the zip was itself created into a pipe,</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">// then then comp_size and sometimes unc_size as well may not be known until</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// after the item has been unzipped.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">// FindZipItem()</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">// Purpose:     Find item by name and return information about it</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">// Parameters:  hz      - handle of open zip archive</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">//              name    - name of file to look for inside zip archive</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">//              ic      - TRUE = case insensitive</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">//              index   - pointer to index number returned, or -1</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">//              ze      - pointer to a ZIPENTRY (if ANSI) or ZIPENTRYW struct</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">//                        (if Unicode)</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">// Returns:     ZRESULT - ZR_OK if success, otherwise some other value</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#ifdef _UNICODE</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#define FindZipItem FindZipItemW</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a5ba7c69748588b61fc946dbc3297c26f">  244</a></span>&#160;<span class="preprocessor">#define FindZipItem FindZipItemA</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a> <a class="code" href="_x_unzip_8h.html#a6190edf675c5bfb1a47109bf31f0d814">FindZipItemA</a>(HZIP hz, <span class="keyword">const</span> <a class="code" href="_x_unzip_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *name, <span class="keywordtype">bool</span> ic, <span class="keywordtype">int</span> *index, <a class="code" href="struct_z_i_p_e_n_t_r_y.html">ZIPENTRY</a> *ze);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a> <a class="code" href="_x_unzip_8h.html#a72a8f9d4b7b782a49295d286529ee933">FindZipItemW</a>(HZIP hz, <span class="keyword">const</span> <a class="code" href="_x_unzip_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *name, <span class="keywordtype">bool</span> ic, <span class="keywordtype">int</span> *index, <a class="code" href="struct_z_i_p_e_n_t_r_y_w.html">ZIPENTRYW</a> *ze);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">// FindZipItem - finds an item by name. ic means &#39;insensitive to case&#39;.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">// It returns the index of the item, and returns information about it.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">// If nothing was found, then index is set to -1 and the function returns</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">// an error code.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">// UnzipItem()</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">// Purpose:     Find item by index and unzip it</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">// Parameters:  hz      - handle of open zip archive</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">//              index   - index number of file to unzip</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">//              dst     - target file name of unzipped file</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">//              len     - for memory (ZIP_MEMORY. length of buffer;</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">//                        otherwise 0</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">//              flags   - indicates usage, see below;  for files, this will be</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">//                        ZIP_FILENAME</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">// Returns:     ZRESULT - ZR_OK if success, otherwise some other value</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a> <a class="code" href="_x_unzip_8h.html#aef0b644ade52671e24d08674c732dd20">UnzipItem</a>(HZIP hz, <span class="keywordtype">int</span> index, <span class="keywordtype">void</span> *dst, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len, <a class="code" href="dxabstract__types_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">// UnzipItem - given an index to an item, unzips it. You can unzip to:</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">// to a pipe:             UnzipItem(hz,i, hpipe_write,0,ZIP_HANDLE);</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// to a file (by handle): UnzipItem(hz,i, hfile,0,ZIP_HANDLE);</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// to a file (by name):   UnzipItem(hz,i, ze.name,0,ZIP_FILENAME);</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">// to a memory block:     UnzipItem(hz,i, buf,buflen,ZIP_MEMORY);</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">// In the final case, if the buffer isn&#39;t large enough to hold it all,</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">// then the return code indicates that more is yet to come. If it was</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">// large enough, and you want to know precisely how big, GetZipItem.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">// Note: zip files are normally stored with relative pathnames. If you</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">// unzip with ZIP_FILENAME a relative pathname then the item gets created</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">// relative to the current directory - it first ensures that all necessary</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">// subdirectories have been created. Also, the item may itself be a directory.</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">// If you unzip a directory with ZIP_FILENAME, then the directory gets created.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">// If you unzip it to a handle or a memory block, then nothing gets created</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">// and it emits 0 bytes.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">// CloseZip()</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">// Purpose:     Close an open zip archive</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">// Parameters:  hz      - handle to an open zip archive</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">// Returns:     ZRESULT - ZR_OK if success, otherwise some other value</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a> <a class="code" href="_x_unzip_8h.html#a27d41111663a816363ed2f5abfb7107d">CloseZip</a>(HZIP hz);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// CloseZip - the zip handle must be closed with this function.</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_x_unzip_8h.html#ad1cf6c76ae2d38246c3190248dc29b0f">FormatZipMessage</a>(<a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a> code, <span class="keywordtype">char</span> *buf,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">// FormatZipMessage - given an error code, formats it as a string.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">// It returns the length of the error message. If buf/len points</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// to a real buffer, then it also writes as much as possible into there.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">// These are the result codes:</span></div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a73a776dd2bf2df30cd66656186a1d91c">  310</a></span>&#160;<span class="preprocessor">#define ZR_OK         0x00000000     // nb. the pseudo-code zr-recent is never returned,</span></div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#ab9017a722f40ad7c8e3750588fb6f035">  311</a></span>&#160;<span class="preprocessor">#define ZR_RECENT     0x00000001     // but can be passed to FormatZipMessage.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">// The following come from general system stuff (e.g. files not openable)</span></div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a40ba4f5c440ed48513933ce9994a6658">  313</a></span>&#160;<span class="preprocessor">#define ZR_GENMASK    0x0000FF00</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a9543f02880a364ae99f41d52840d7173">  314</a></span>&#160;<span class="preprocessor">#define ZR_NODUPH     0x00000100     // couldn&#39;t duplicate the handle</span></div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#aef1727e0240e0cf2a6ff274e23b9af57">  315</a></span>&#160;<span class="preprocessor">#define ZR_NOFILE     0x00000200     // couldn&#39;t create/open the file</span></div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#aa3dd19c5b310300f3251c18f35f69a69">  316</a></span>&#160;<span class="preprocessor">#define ZR_NOALLOC    0x00000300     // failed to allocate some resource</span></div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a47dd0d6869573a3f918fed82962bf0f5">  317</a></span>&#160;<span class="preprocessor">#define ZR_WRITE      0x00000400     // a general error writing to the file</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a3b2594fb10796e83ab80dd13e7a3b78a">  318</a></span>&#160;<span class="preprocessor">#define ZR_NOTFOUND   0x00000500     // couldn&#39;t find that file in the zip</span></div><div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#adf62f679d0629164c5c3d55084c93222">  319</a></span>&#160;<span class="preprocessor">#define ZR_MORE       0x00000600     // there&#39;s still more data to be unzipped</span></div><div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a7c85b039ddee9436d88b17b919e7bb00">  320</a></span>&#160;<span class="preprocessor">#define ZR_CORRUPT    0x00000700     // the zipfile is corrupt or not a zipfile</span></div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#aa392aeb74f77c45ed681fefd58cc0a89">  321</a></span>&#160;<span class="preprocessor">#define ZR_READ       0x00000800     // a general error reading the file</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">// The following come from mistakes on the part of the caller</span></div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#ac0f4da0df349c9423d1c9a881553c77f">  323</a></span>&#160;<span class="preprocessor">#define ZR_CALLERMASK 0x00FF0000</span></div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#ae99224e5afbd19c0041072808b25cf27">  324</a></span>&#160;<span class="preprocessor">#define ZR_ARGS       0x00010000     // general mistake with the arguments</span></div><div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a7fa455c3f5ceefceb6977f142075a788">  325</a></span>&#160;<span class="preprocessor">#define ZR_NOTMMAP    0x00020000     // tried to ZipGetMemory, but that only works on mmap zipfiles, which yours wasn&#39;t</span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#acb604b741a91fb905805a7985c810f42">  326</a></span>&#160;<span class="preprocessor">#define ZR_MEMSIZE    0x00030000     // the memory size is too small</span></div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a77547b80440f59bfd28a4ac89fd033c6">  327</a></span>&#160;<span class="preprocessor">#define ZR_FAILED     0x00040000     // the thing was already failed when you called this function</span></div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a02120ed2ebc636ff1bcf9d6ba5328149">  328</a></span>&#160;<span class="preprocessor">#define ZR_ENDED      0x00050000     // the zip creation has already been closed</span></div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#aa7c250761e018104552ab588716c2d6b">  329</a></span>&#160;<span class="preprocessor">#define ZR_MISSIZE    0x00060000     // the indicated input file size turned out mistaken</span></div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a4ff0dca25ccbb214c97c07e33abd5846">  330</a></span>&#160;<span class="preprocessor">#define ZR_PARTIALUNZ 0x00070000     // the file had already been partially unzipped</span></div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a8f61a3c82a2a5eec83ad5488533aac93">  331</a></span>&#160;<span class="preprocessor">#define ZR_ZMODE      0x00080000     // tried to mix creating/opening a zip </span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">// The following come from bugs within the zip library itself</span></div><div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a729156494aa981344ff1f3c06c8b9682">  333</a></span>&#160;<span class="preprocessor">#define ZR_BUGMASK    0xFF000000</span></div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a2867ba7f83ebb5ffcbdb14b0f23a2b98">  334</a></span>&#160;<span class="preprocessor">#define ZR_NOTINITED  0x01000000     // initialisation didn&#39;t work</span></div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a048781d52b176de34f03c6bff24bfbf9">  335</a></span>&#160;<span class="preprocessor">#define ZR_SEEK       0x02000000     // trying to seek in an unseekable file</span></div><div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#aea74b1c007e064d51d68a4ca5008b152">  336</a></span>&#160;<span class="preprocessor">#define ZR_NOCHANGE   0x04000000     // changed its mind on storage, but not allowed</span></div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a64b7ebad02a03d3f890f8bd088e5550a">  337</a></span>&#160;<span class="preprocessor">#define ZR_FLATE      0x05000000     // an internal error in the de/inflation code</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">// e.g.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">// SetCurrentDirectory(&quot;c:\\docs\\stuff&quot;);</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">// HZIP hz = OpenZip(&quot;c:\\stuff.zip&quot;,0,ZIP_FILENAME);</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">// ZIPENTRY ze; GetZipItem(hz,-1,&amp;ze); int numitems=ze.index;</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">// for (int i=0; i&lt;numitems; i++)</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">// { GetZipItem(hz,i,&amp;ze);</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">//   UnzipItem(hz,i,ze.name,0,ZIP_FILENAME);</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">// }</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">// CloseZip(hz);</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">// HRSRC hrsrc = FindResource(hInstance,MAKEINTRESOURCE(1),RT_RCDATA);</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">// HANDLE hglob = LoadResource(hInstance,hrsrc);</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">// void *zipbuf=LockResource(hglob);</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">// unsigned int ziplen=SizeofResource(hInstance,hrsrc);</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">// HZIP hz = OpenZip(zipbuf, ziplen, ZIP_MEMORY);</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">//   - unzip to a membuffer -</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">// ZIPENTRY ze; int i; FindZipItem(hz,&quot;file.dat&quot;,&amp;i,&amp;ze);</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">// char *ibuf = new char[ze.unc_size];</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">// UnzipItem(hz,i, ibuf, ze.unc_size,ZIP_MEMORY);</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">// delete[] buf;</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">//   - unzip to a fixed membuff -</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">// ZIPENTRY ze; int i; FindZipItem(hz,&quot;file.dat&quot;,&amp;i,&amp;ze);</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">// char ibuf[1024]; ZIPRESULT zr=ZR_MORE; unsigned long totsize=0;</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">// while (zr==ZR_MORE)</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">// { zr = UnzipItem(hz,i, ibuf,1024,ZIP_MEMORY);</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">//   unsigned long bufsize=1024; if (zr==ZR_OK) bufsize=ze.unc_size-totsize;</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">//   totsize+=bufsize;</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">// }</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">//   - unzip to a pipe -</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">// HANDLE hthread=CreateWavReaderThread(&amp;hread,&amp;hwrite);</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">// FindZipItem(hz,&quot;sound.wav&quot;,&amp;i,&amp;ze);</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">// UnzipItem(hz,i, hwrite,0,ZIP_HANDLE);</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">// CloseHandle(hwrite);</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">// WaitForSingleObject(hthread,INFINITE);</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">// CloseHandle(hread); CloseHandle(hthread);</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">//   - finished -</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">// CloseZip(hz);</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">// // note: no need to free resources obtained through Find/Load/LockResource</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">// SetCurrentDirectory(&quot;c:\\docs\\pipedzipstuff&quot;);</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">// HANDLE hread,hwrite; CreatePipe(&amp;hread,&amp;hwrite);</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">// CreateZipWriterThread(hwrite);</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">// HZIP hz = OpenZip(hread,0,ZIP_HANDLE);</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">// for (int i=0; ; i++)</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">// { ZIPENTRY ze; ZRESULT res = GetZipItem(hz,i,&amp;ze);</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">//   if (res!=ZE_OK) break; // no more</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">//   UnzipItem(hz,i, ze.name,0,ZIP_FILENAME);</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">// }</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// CloseZip(hz);</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">// Now we indulge in a little skullduggery so that the code works whether</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">// the user has included just zip or both zip and unzip.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">// Idea: if header files for both zip and unzip are present, then presumably</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">// the cpp files for zip and unzip are both present, so we will call</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">// one or the other of them based on a dynamic choice. If the header file</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">// for only one is present, then we will bind to that particular one.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;HZIP <a class="code" href="_x_unzip_8h.html#ae0d6353f90b190130ba54b35835de447">OpenZipU</a>(<span class="keywordtype">void</span> *z,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len,<a class="code" href="dxabstract__types_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a>);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a> <a class="code" href="_x_unzip_8h.html#a8d45ad67072131cd3e492c063a67a149">CloseZipU</a>(HZIP hz);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_x_unzip_8h.html#acbf8f7cf35dad80a422087f092f96758">FormatZipMessageU</a>(<a class="code" href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a> code, <span class="keywordtype">char</span> *buf,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_x_unzip_8h.html#a3d454599562c016d6532401e0a1856a9">IsZipHandleU</a>(HZIP hz);</div><div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a2e0b74182c0abcc87bc5235b11e7e90e">  410</a></span>&#160;<span class="preprocessor">#define OpenZip OpenZipU</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="preprocessor">#ifdef XZIP_H</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="preprocessor">#undef CloseZip</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="preprocessor">#define CloseZip(hz) (IsZipHandleU(hz)?CloseZipU(hz):CloseZipZ(hz))</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#a27d41111663a816363ed2f5abfb7107d">  416</a></span>&#160;<span class="preprocessor">#define CloseZip CloseZipU</span></div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="_x_unzip_8h.html#ad1cf6c76ae2d38246c3190248dc29b0f">  417</a></span>&#160;<span class="preprocessor">#define FormatZipMessage FormatZipMessageU</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">// safe defintion of unzip, catches exceptions</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_x_unzip_8h.html#a71ae42e6171da5b7157d9fc21fa14735">SafeUnzipMemory</a>( <span class="keyword">const</span> <span class="keywordtype">void</span> *pvZipped, <span class="keywordtype">int</span> cubZipped, <span class="keywordtype">void</span> *pvDest, <span class="keywordtype">int</span> cubDest <span class="comment">/* should be the exact expected unzipped size */</span> );</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="preprocessor">#endif //XUNZIP_H</span></div><div class="ttc" id="platform_8h_html_ab99ded389af74001a6298fc9e44e74e5"><div class="ttname"><a href="platform_8h.html#ab99ded389af74001a6298fc9e44e74e5">MAX_PATH</a></div><div class="ttdeci">#define MAX_PATH</div><div class="ttdef"><b>Definition:</b> platform.h:394</div></div>
<div class="ttc" id="_x_unzip_8h_html_a5f3c6b810ca6850f842e526165425144"><div class="ttname"><a href="_x_unzip_8h.html#a5f3c6b810ca6850f842e526165425144">GetZipItemW</a></div><div class="ttdeci">ZRESULT GetZipItemW(HZIP hz, int index, ZIPENTRYW *ze)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4347</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_w_html_a9d0e6113c0de1db2a3fa0e568b37324f"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y_w.html#a9d0e6113c0de1db2a3fa0e568b37324f">ZIPENTRYW::attr</a></div><div class="ttdeci">DWORD attr</div><div class="ttdef"><b>Definition:</b> XUnzip.h:152</div></div>
<div class="ttc" id="_x_unzip_8h_html_a71ae42e6171da5b7157d9fc21fa14735"><div class="ttname"><a href="_x_unzip_8h.html#a71ae42e6171da5b7157d9fc21fa14735">SafeUnzipMemory</a></div><div class="ttdeci">bool SafeUnzipMemory(const void *pvZipped, int cubZipped, void *pvDest, int cubDest)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4469</div></div>
<div class="ttc" id="glfuncs_8h_html_aa6c93bd4221a61daf80570d28f06267c"><div class="ttname"><a href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a></div><div class="ttdeci">GLenum a GLhandleARB GLhandleARB b GLhandleARB GLuint const GLcharARB c GLenum GLuint b GLclampf GLclampf GLclampf GLclampf d GLenum GLenum b GLbitfield a GLclampd a GLenum const GLdouble b GLhandleARB a GLenum GLint GLenum GLsizei GLsizei GLsizei GLint GLsizei const GLvoid i GLenum a GLhandleARB a GLsizei const GLuint b GLsizei const GLuint b GLboolean a GLhandleARB GLhandleARB b GLuint a GLenum a GLenum GLuint GLuint GLsizei GLenum const GLvoid f GLenum a GLsizei GLuint b GLsizei GLuint b GLenum GLboolean b GLenum GLdouble b GLhandleARB GLsizei GLsizei GLcharARB d GLhandleARB GLenum GLint c const GLubyte GLenum a GLhandleARB const GLcharARB b GLuint a GLvoid GLenum GLenum b GLenum GLint b GLfloat GLfloat b GLenum GLenum GLsizei const GLvoid d GLenum a GLhandleARB GLsizei const GLcharARB const GLint d GLuint a GLfloat GLfloat b GLenum GLint GLint GLsizei GLsizei GLsizei GLint GLenum GLenum const GLvoid j GLenum GLenum GLint c GLint GLfloat b GLint GLint b GLenum a GLfloat GLfloat GLfloat c GLint GLint GLsizei GLsizei d GLenum a GLint GLenum GLsizei const GLvoid d GLenum GLuint GLsizei const GLfloat d GLenum GLenum GLenum GLenum d GLenum GLint GLenum GLint d GLenum GLuint b GLenum a GLenum GLenum GLenum GLuint d GLenum GLenum GLenum GLuint GLint GLint f GLsizei GLuint b GLint GLint GLint GLint GLint GLint GLint GLint GLbitfield GLenum j GLuint a GLuint a GLsizei GLuint b GLuint GLenum b GLsizei const GLuint b GLuint GLboolean GLboolean GLboolean GLboolean e GLenum GLuint b GLuint GLint GLuint c GLenum GLenum b GLenum GLintptr GLsizeiptr c GLenum GLintptr GLsizeiptr c GLenum GLuint b GLuint GLenum GLint c GLenum GLsizei void c GLenum GLuint b GLenum a GLenum GLenum GLenum GLuint d GLenum GLenum GLenum GLuint GLint GLint f GLsizei GLuint b GLint GLint GLint GLint GLint GLint GLint GLint GLbitfield GLenum j GLsizei const void b GLenum GLenum GLenum GLsizei const GLuint GLboolean f GLuint GLuint b GLuint GLuint b GLuint GLenum GLfloat c GLuint texture GLuint64 handle GLint GLuint64 value GLuint GLint GLuint64 value GLuint64 handle GLsizei const GLuint ids GLenum target GLuint GLenum GLint params GLenum GLenum GLintptr GLintptr GLsizeiptr size GLsizei GLuint arrays GLbitfield a GLenum GLsizeiptr const void GLbitfield flags</div><div class="ttdef"><b>Definition:</b> glfuncs.h:270</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_html_aa857649ee4d66fcc7ba0d2f2086ca639"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y.html#aa857649ee4d66fcc7ba0d2f2086ca639">ZIPENTRY::unc_size</a></div><div class="ttdeci">long unc_size</div><div class="ttdef"><b>Definition:</b> XUnzip.h:146</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_w_html"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y_w.html">ZIPENTRYW</a></div><div class="ttdef"><b>Definition:</b> XUnzip.h:149</div></div>
<div class="ttc" id="dxabstract__types_8h_html_a798af1e30bc65f319c1a246cecf59e39"><div class="ttname"><a href="dxabstract__types_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a></div><div class="ttdeci">unsigned int DWORD</div><div class="ttdef"><b>Definition:</b> dxabstract_types.h:96</div></div>
<div class="ttc" id="_x_unzip_8h_html_acbf8f7cf35dad80a422087f092f96758"><div class="ttname"><a href="_x_unzip_8h.html#acbf8f7cf35dad80a422087f092f96758">FormatZipMessageU</a></div><div class="ttdeci">unsigned int FormatZipMessageU(ZRESULT code, char *buf, unsigned int len)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4275</div></div>
<div class="ttc" id="_x_unzip_8h_html_a798af1e30bc65f319c1a246cecf59e39"><div class="ttname"><a href="_x_unzip_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a></div><div class="ttdeci">unsigned int DWORD</div><div class="ttdef"><b>Definition:</b> XUnzip.h:96</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_w_html_a4e7ff4540e2e9bccf0f22c5b8f73e862"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y_w.html#a4e7ff4540e2e9bccf0f22c5b8f73e862">ZIPENTRYW::unc_size</a></div><div class="ttdeci">long unc_size</div><div class="ttdef"><b>Definition:</b> XUnzip.h:155</div></div>
<div class="ttc" id="_x_unzip_8h_html_a72a8f9d4b7b782a49295d286529ee933"><div class="ttname"><a href="_x_unzip_8h.html#a72a8f9d4b7b782a49295d286529ee933">FindZipItemW</a></div><div class="ttdeci">ZRESULT FindZipItemW(HZIP hz, const TCHAR *name, bool ic, int *index, ZIPENTRYW *ze)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4399</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_w_html_aa3c1a622722c3e44773b431ec86bd412"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y_w.html#aa3c1a622722c3e44773b431ec86bd412">ZIPENTRYW::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> XUnzip.h:150</div></div>
<div class="ttc" id="_x_unzip_8h_html_a27d41111663a816363ed2f5abfb7107d"><div class="ttname"><a href="_x_unzip_8h.html#a27d41111663a816363ed2f5abfb7107d">CloseZip</a></div><div class="ttdeci">#define CloseZip</div><div class="ttdef"><b>Definition:</b> XUnzip.h:416</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_html_a5e43737666f60d5c208aa56aea66e69b"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y.html#a5e43737666f60d5c208aa56aea66e69b">ZIPENTRY::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> XUnzip.h:141</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_w_html_a7bec199163bc632274a2b0ca2a1f3d66"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y_w.html#a7bec199163bc632274a2b0ca2a1f3d66">ZIPENTRYW::mtime</a></div><div class="ttdeci">FILETIME mtime</div><div class="ttdef"><b>Definition:</b> XUnzip.h:153</div></div>
<div class="ttc" id="_x_unzip_8h_html_a84e83d544ba10017a4674ff397206382"><div class="ttname"><a href="_x_unzip_8h.html#a84e83d544ba10017a4674ff397206382">ZRESULT</a></div><div class="ttdeci">DWORD ZRESULT</div><div class="ttdef"><b>Definition:</b> XUnzip.h:133</div></div>
<div class="ttc" id="_x_unzip_8h_html_a6190edf675c5bfb1a47109bf31f0d814"><div class="ttname"><a href="_x_unzip_8h.html#a6190edf675c5bfb1a47109bf31f0d814">FindZipItemA</a></div><div class="ttdeci">ZRESULT FindZipItemA(HZIP hz, const TCHAR *name, bool ic, int *index, ZIPENTRY *ze)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4381</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_w_html_a0d2bd651d387de527fafd02ed99cae49"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y_w.html#a0d2bd651d387de527fafd02ed99cae49">ZIPENTRYW::comp_size</a></div><div class="ttdeci">long comp_size</div><div class="ttdef"><b>Definition:</b> XUnzip.h:154</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_html_af95a97a3d8be11c951d66bfee9bfe421"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y.html#af95a97a3d8be11c951d66bfee9bfe421">ZIPENTRY::mtime</a></div><div class="ttdeci">FILETIME mtime</div><div class="ttdef"><b>Definition:</b> XUnzip.h:144</div></div>
<div class="ttc" id="_x_unzip_8h_html_abe158303e59218a7455da2a110d65b65"><div class="ttname"><a href="_x_unzip_8h.html#abe158303e59218a7455da2a110d65b65">GetZipItemA</a></div><div class="ttdeci">ZRESULT GetZipItemA(HZIP hz, int index, ZIPENTRY *ze)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4329</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_html_a8f763f75556757c2e1b0729f9de10095"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y.html#a8f763f75556757c2e1b0729f9de10095">ZIPENTRY::comp_size</a></div><div class="ttdeci">long comp_size</div><div class="ttdef"><b>Definition:</b> XUnzip.h:145</div></div>
<div class="ttc" id="_x_unzip_8h_html_aa8c0374618b33785ccb02f74bcfebc46"><div class="ttname"><a href="_x_unzip_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a></div><div class="ttdeci">void * HANDLE</div><div class="ttdef"><b>Definition:</b> XUnzip.h:113</div></div>
<div class="ttc" id="basetypes_8h_html_a050c65e107f0c828f856a231f4b4e788"><div class="ttname"><a href="basetypes_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a></div><div class="ttdeci">int BOOL</div><div class="ttdef"><b>Definition:</b> basetypes.h:136</div></div>
<div class="ttc" id="_x_unzip_8h_html_ad1cf6c76ae2d38246c3190248dc29b0f"><div class="ttname"><a href="_x_unzip_8h.html#ad1cf6c76ae2d38246c3190248dc29b0f">FormatZipMessage</a></div><div class="ttdeci">#define FormatZipMessage</div><div class="ttdef"><b>Definition:</b> XUnzip.h:417</div></div>
<div class="ttc" id="_x_unzip_8h_html_ae0d6353f90b190130ba54b35835de447"><div class="ttname"><a href="_x_unzip_8h.html#ae0d6353f90b190130ba54b35835de447">OpenZipU</a></div><div class="ttdeci">HZIP OpenZipU(void *z, unsigned int len, DWORD flags)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4314</div></div>
<div class="ttc" id="_x_unzip_8h_html_aef0b644ade52671e24d08674c732dd20"><div class="ttname"><a href="_x_unzip_8h.html#aef0b644ade52671e24d08674c732dd20">UnzipItem</a></div><div class="ttdeci">ZRESULT UnzipItem(HZIP hz, int index, void *dst, unsigned int len, DWORD flags)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4434</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_html_a450c7abba46eccdefd999abb8434b21b"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y.html#a450c7abba46eccdefd999abb8434b21b">ZIPENTRY::attr</a></div><div class="ttdeci">DWORD attr</div><div class="ttdef"><b>Definition:</b> XUnzip.h:143</div></div>
<div class="ttc" id="_x_unzip_8h_html_a3d454599562c016d6532401e0a1856a9"><div class="ttname"><a href="_x_unzip_8h.html#a3d454599562c016d6532401e0a1856a9">IsZipHandleU</a></div><div class="ttdeci">bool IsZipHandleU(HZIP hz)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4463</div></div>
<div class="ttc" id="_x_unzip_8h_html_a2e0b74182c0abcc87bc5235b11e7e90e"><div class="ttname"><a href="_x_unzip_8h.html#a2e0b74182c0abcc87bc5235b11e7e90e">OpenZip</a></div><div class="ttdeci">#define OpenZip</div><div class="ttdef"><b>Definition:</b> XUnzip.h:410</div></div>
<div class="ttc" id="_x_unzip_8h_html_aec4871ff366a33730b02718ef1c85c0c"><div class="ttname"><a href="_x_unzip_8h.html#aec4871ff366a33730b02718ef1c85c0c">DECLARE_HANDLE</a></div><div class="ttdeci">#define DECLARE_HANDLE(name)</div><div class="ttdef"><b>Definition:</b> XUnzip.h:115</div></div>
<div class="ttc" id="_x_unzip_8h_html_a8d45ad67072131cd3e492c063a67a149"><div class="ttname"><a href="_x_unzip_8h.html#a8d45ad67072131cd3e492c063a67a149">CloseZipU</a></div><div class="ttdeci">ZRESULT CloseZipU(HZIP hz)</div><div class="ttdef"><b>Definition:</b> XUnzip.cpp:4452</div></div>
<div class="ttc" id="_x_unzip_8h_html_a03bdb8ce5895c7e261aadc2529637546"><div class="ttname"><a href="_x_unzip_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a></div><div class="ttdeci">char TCHAR</div><div class="ttdef"><b>Definition:</b> XUnzip.h:101</div></div>
<div class="ttc" id="struct_z_i_p_e_n_t_r_y_html"><div class="ttname"><a href="struct_z_i_p_e_n_t_r_y.html">ZIPENTRY</a></div><div class="ttdef"><b>Definition:</b> XUnzip.h:140</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f832923ad3cb060bc87ad85e68b8a1c3.html">public</a></li><li class="navelem"><a class="el" href="dir_84b711edc8586edb7dd8db720157e0f6.html">zip</a></li><li class="navelem"><a class="el" href="_x_unzip_8h.html">XUnzip.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
