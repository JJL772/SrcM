<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>interfaces: public/vstdlib/jobthread.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">interfaces
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('jobthread_8h_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">jobthread.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="jobthread_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//========= Copyright Valve Corporation, All rights reserved. ============//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Purpose: A utility for a discrete job-oriented worker thread.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//          The class CThreadPool is both the job queue, and the </span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//          worker thread. Except when the main thread attempts to </span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//          synchronously execute a job, most of the inter-thread locking </span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//          on the queue. </span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//          The queue threading model uses a manual reset event for optimal </span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//          throughput. Adding to the queue is guarded by a semaphore that </span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//          will block the inserting thread if the queue has overflown. </span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//          This prevents the worker thread from being starved out even if </span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//          not running at a higher priority than the master thread.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//          The thread function waits for jobs, services jobs, and manages </span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//          communication between the worker and master threads. The nature </span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//          of the work is opaque to the Executer.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//          CJob instances actually do the work. The base class </span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//          calls virtual methods for job primitives, so derivations don&#39;t </span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//          need to worry about threading models. All of the variants of </span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//          job and OS can be expressed in this hierarchy. Instances of </span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//          CJob are the items placed in the queue, and by </span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//          overriding the job primitives they are the manner by which </span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//          users of the Executer control the state of the job. </span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//=============================================================================</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="threadtools_8h.html">tier0/threadtools.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="refcount_8h.html">tier1/refcount.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="utllinkedlist_8h.html">tier1/utllinkedlist.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="utlvector_8h.html">tier1/utlvector.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="functors_8h.html">tier1/functors.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vprof__telemetry_8h.html">tier0/vprof_telemetry.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vstdlib_8h.html">vstdlib/vstdlib.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#ifndef JOBTHREAD_H</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#define JOBTHREAD_H</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#ifdef AddJob  // windows.h print function collisions</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#undef AddJob</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#undef GetJob</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#ifdef VSTDLIB_DLL_EXPORT</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#define JOB_INTERFACE   DLL_EXPORT</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#define JOB_OVERLOAD    DLL_GLOBAL_EXPORT</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#define JOB_CLASS       DLL_CLASS_EXPORT</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ad78a4a7ee01b6605dc60ca2dda8e39f1">   53</a></span>&#160;<span class="preprocessor">#define JOB_INTERFACE   DLL_IMPORT</span></div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a4c30840413fd9ee39d2624571c50a497">   54</a></span>&#160;<span class="preprocessor">#define JOB_OVERLOAD    DLL_GLOBAL_IMPORT</span></div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a5cbac65edf72c1959f77ade8fea6cad9">   55</a></span>&#160;<span class="preprocessor">#define JOB_CLASS       DLL_CLASS_IMPORT</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#if defined( _WIN32 )</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">class </span><a class="code" href="class_c_job.html">CJob</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84">   71</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84">JobStatusEnum_t</a></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// Use negative for errors</span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2">   74</a></span>&#160;    <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2">JOB_OK</a>,                     <span class="comment">// operation is successful</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84aa4dbdf81bd456cab3707bba1d4122209">   75</a></span>&#160;    <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84aa4dbdf81bd456cab3707bba1d4122209">JOB_STATUS_PENDING</a>,         <span class="comment">// file is properly queued, waiting for service</span></div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84ab0a033d526ecc47379d5d8cd6e772210">   76</a></span>&#160;    <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84ab0a033d526ecc47379d5d8cd6e772210">JOB_STATUS_INPROGRESS</a>,      <span class="comment">// file is being accessed</span></div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a9a5bf31f62fc158d7e2222b7c1b10126">   77</a></span>&#160;    <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a9a5bf31f62fc158d7e2222b7c1b10126">JOB_STATUS_ABORTED</a>,         <span class="comment">// file was aborted by caller</span></div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a92e09aa9ba0a2acedba1de86916bccfb">   78</a></span>&#160;    <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a92e09aa9ba0a2acedba1de86916bccfb">JOB_STATUS_UNSERVICED</a>,      <span class="comment">// file is not yet queued</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;};</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">   81</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893">   83</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893">JobFlags_t</a></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893a0e6988d9c843c4674b3c73f1295ff722">   85</a></span>&#160;    <a class="code" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893a0e6988d9c843c4674b3c73f1295ff722">JF_IO</a>               = ( 1 &lt;&lt; 0 ),   <span class="comment">// The job primarily blocks on IO or hardware</span></div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893a785a00b41003a7f0324a868f928dde69">   86</a></span>&#160;    <a class="code" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893a785a00b41003a7f0324a868f928dde69">JF_BOOST_THREAD</a>     = ( 1 &lt;&lt; 1 ),   <span class="comment">// Up the thread priority to max allowed while processing task</span></div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893abf851ea21543e38c12ab9423f09ac053">   87</a></span>&#160;    <a class="code" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893abf851ea21543e38c12ab9423f09ac053">JF_SERIAL</a>           = ( 1 &lt;&lt; 2 ),   <span class="comment">// Job cannot be executed out of order relative to other &quot;strict&quot; jobs</span></div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893a638c913fd80c13d4977a5aebfd085ccd">   88</a></span>&#160;    <a class="code" href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893a638c913fd80c13d4977a5aebfd085ccd">JF_QUEUE</a>            = ( 1 &lt;&lt; 3 ),   <span class="comment">// Queue it, even if not an IO job</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;};</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559c">   91</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559c">JobPriority_t</a></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559ca06e3229bc79bbc2011b49366b1dcfe72">   93</a></span>&#160;    <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559ca06e3229bc79bbc2011b49366b1dcfe72">JP_LOW</a>,</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559caa872989cfe5f01d95f726e1752b23a86">   94</a></span>&#160;    <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559caa872989cfe5f01d95f726e1752b23a86">JP_NORMAL</a>,</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559ca1e983dfcd13fad25a5267e047cd2037e">   95</a></span>&#160;    <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559ca1e983dfcd13fad25a5267e047cd2037e">JP_HIGH</a></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;};</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a1dc9a20475762831c4861c92083db54d">   98</a></span>&#160;<span class="preprocessor">#define TP_MAX_POOL_THREADS 64</span></div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html">   99</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_thread_pool_start_params__t.html">ThreadPoolStartParams_t</a></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#ab46e7b6391794d613b78175a7d077753">  101</a></span>&#160;    <a class="code" href="struct_thread_pool_start_params__t.html#ab46e7b6391794d613b78175a7d077753">ThreadPoolStartParams_t</a>( <span class="keywordtype">bool</span> <a class="code" href="struct_thread_pool_start_params__t.html#a81418808769a82e3716d2aa570274a8c">bIOThreads</a> = <span class="keyword">false</span>, <span class="keywordtype">unsigned</span> <a class="code" href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">nThreads</a> = -1, <span class="keywordtype">int</span> *pAffinities = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="basetypes_8h.html#afa0d335ed0b412aeae9eabcbafc7fc23">ThreeState_t</a> <a class="code" href="struct_thread_pool_start_params__t.html#ae68de40a9f3a8b04a595b635b16ca400">fDistribute</a> = <a class="code" href="basetypes_8h.html#afa0d335ed0b412aeae9eabcbafc7fc23ac629bb3eb063aeff45d3d05b19c5a948">TRS_NONE</a>, <span class="keywordtype">unsigned</span> <a class="code" href="struct_thread_pool_start_params__t.html#a21c3d9db3b3b56a4c609ac98495ea843">nStackSize</a> = -1, <span class="keywordtype">int</span> <a class="code" href="struct_thread_pool_start_params__t.html#aab6ce0fc57b4ab1a1a358ed3734d530e">iThreadPriority</a> = SHRT_MIN )</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        : <a class="code" href="struct_thread_pool_start_params__t.html#a81418808769a82e3716d2aa570274a8c">bIOThreads</a>( <a class="code" href="struct_thread_pool_start_params__t.html#a81418808769a82e3716d2aa570274a8c">bIOThreads</a> ), <a class="code" href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">nThreads</a>( <a class="code" href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">nThreads</a> ), <a class="code" href="struct_thread_pool_start_params__t.html#ae68de40a9f3a8b04a595b635b16ca400">fDistribute</a>( <a class="code" href="struct_thread_pool_start_params__t.html#ae68de40a9f3a8b04a595b635b16ca400">fDistribute</a> ), <a class="code" href="struct_thread_pool_start_params__t.html#a21c3d9db3b3b56a4c609ac98495ea843">nStackSize</a>( <a class="code" href="struct_thread_pool_start_params__t.html#a21c3d9db3b3b56a4c609ac98495ea843">nStackSize</a> ), <a class="code" href="struct_thread_pool_start_params__t.html#aab6ce0fc57b4ab1a1a358ed3734d530e">iThreadPriority</a>( <a class="code" href="struct_thread_pool_start_params__t.html#aab6ce0fc57b4ab1a1a358ed3734d530e">iThreadPriority</a> ), <a class="code" href="struct_thread_pool_start_params__t.html#a1bbfa55101d03a9364f83d2a9fb813e7">nThreadsMax</a>( -1 )</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="struct_thread_pool_start_params__t.html#abb3b4840fb90d6154c258faa6db78724">bExecOnThreadPoolThreadsOnly</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="struct_thread_pool_start_params__t.html#a3aef79d158390257d7177203f7a6d52d">bUseAffinityTable</a> = ( pAffinities != <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) &amp;&amp; ( <a class="code" href="struct_thread_pool_start_params__t.html#ae68de40a9f3a8b04a595b635b16ca400">fDistribute</a> == <a class="code" href="basetypes_8h.html#afa0d335ed0b412aeae9eabcbafc7fc23a727fcb8dc827b0fe0228e55142411d32">TRS_TRUE</a> ) &amp;&amp; ( <a class="code" href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">nThreads</a> != -1 );</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="struct_thread_pool_start_params__t.html#a3aef79d158390257d7177203f7a6d52d">bUseAffinityTable</a> )</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="comment">// user supplied an optional 1:1 affinity mapping to override normal distribute behavior</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <a class="code" href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">nThreads</a> = <a class="code" href="basetypes_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>( <a class="code" href="jobthread_8h.html#a1dc9a20475762831c4861c92083db54d">TP_MAX_POOL_THREADS</a>, <a class="code" href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">nThreads</a> );</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = 0; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> &lt; <a class="code" href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">nThreads</a>; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>++ )</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <a class="code" href="struct_thread_pool_start_params__t.html#a52a596a865ac21a088a1ebc59b9598b4">iAffinityTable</a>[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>] = pAffinities[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>];</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">  118</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">nThreads</a>;</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#a1bbfa55101d03a9364f83d2a9fb813e7">  119</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_thread_pool_start_params__t.html#a1bbfa55101d03a9364f83d2a9fb813e7">nThreadsMax</a>;</div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#ae68de40a9f3a8b04a595b635b16ca400">  120</a></span>&#160;    <a class="code" href="basetypes_8h.html#afa0d335ed0b412aeae9eabcbafc7fc23">ThreeState_t</a>    <a class="code" href="struct_thread_pool_start_params__t.html#ae68de40a9f3a8b04a595b635b16ca400">fDistribute</a>;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#a21c3d9db3b3b56a4c609ac98495ea843">  121</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_thread_pool_start_params__t.html#a21c3d9db3b3b56a4c609ac98495ea843">nStackSize</a>;</div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#aab6ce0fc57b4ab1a1a358ed3734d530e">  122</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_thread_pool_start_params__t.html#aab6ce0fc57b4ab1a1a358ed3734d530e">iThreadPriority</a>;</div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#a52a596a865ac21a088a1ebc59b9598b4">  123</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_thread_pool_start_params__t.html#a52a596a865ac21a088a1ebc59b9598b4">iAffinityTable</a>[<a class="code" href="jobthread_8h.html#a1dc9a20475762831c4861c92083db54d">TP_MAX_POOL_THREADS</a>];</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#a81418808769a82e3716d2aa570274a8c">  125</a></span>&#160;    <span class="keywordtype">bool</span>            <a class="code" href="struct_thread_pool_start_params__t.html#a81418808769a82e3716d2aa570274a8c">bIOThreads</a> : 1;</div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#a3aef79d158390257d7177203f7a6d52d">  126</a></span>&#160;    <span class="keywordtype">bool</span>            <a class="code" href="struct_thread_pool_start_params__t.html#a3aef79d158390257d7177203f7a6d52d">bUseAffinityTable</a> : 1;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="struct_thread_pool_start_params__t.html#abb3b4840fb90d6154c258faa6db78724">  127</a></span>&#160;    <span class="keywordtype">bool</span>            <a class="code" href="struct_thread_pool_start_params__t.html#abb3b4840fb90d6154c258faa6db78724">bExecOnThreadPoolThreadsOnly</a> : 1;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;};</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// IThreadPool</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a48e720a8999d2628017a0b7337b53102">  136</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="isteamhtmlsurface_8h.html#ad7a5adb15ac603220f56da3e41a6e506">bool</a> (*<a class="code" href="jobthread_8h.html#a48e720a8999d2628017a0b7337b53102">JobFilter_t</a>)( <a class="code" href="class_c_job.html">CJob</a> * );</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// Messages supported through the CallWorker() method</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01">  141</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01">ThreadPoolMessages_t</a></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01a887532806c41d9028837b771fe8494bb">  143</a></span>&#160;    <a class="code" href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01a887532806c41d9028837b771fe8494bb">TPM_EXIT</a>,       <span class="comment">// Exit the thread</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01a37a350542a12aefca0fa6f40abd22570">  144</a></span>&#160;    <a class="code" href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01a37a350542a12aefca0fa6f40abd22570">TPM_SUSPEND</a>,        <span class="comment">// Suspend after next operation</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01affd1b463a93c925b4b47082fc11dd881">  145</a></span>&#160;    <a class="code" href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01affd1b463a93c925b4b47082fc11dd881">TPM_RUNFUNCTOR</a>, <span class="comment">// Run functor, reply when done.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;};</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<a class="code" href="platform_8h.html#a81ca50c3427d19bbb1aae0dd73e56431">abstract_class</a> <a class="code" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a> : <span class="keyword">public</span> <a class="code" href="class_i_ref_counted.html">IRefCounted</a></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">  153</a></span>&#160;    <span class="keyword">virtual</span> ~<a class="code" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a>() {};</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Thread functions</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="jobthread_8h.html#a8c78545ef5776ef8636894fe83314949">Start</a>( <span class="keyword">const</span> <a class="code" href="struct_thread_pool_start_params__t.html">ThreadPoolStartParams_t</a> &amp;startParams = <a class="code" href="struct_thread_pool_start_params__t.html">ThreadPoolStartParams_t</a>() ) = 0;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="jobthread_8h.html#a5b7a414bb118e4586bf4debc190f696f">Stop</a>( <span class="keywordtype">int</span> timeout = <a class="code" href="threadtools_8h.html#a903b3deeb33ae9ae30e285b8c7a1796d">TT_INFINITE</a> ) = 0;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// Functions for any thread</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <a class="code" href="jobthread_8h.html#a1c7dd0bc184f5a80f15a47f1564d76b7">GetJobCount</a>() = 0;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#a060f7ecf7110ebd56e6f9365bbb6c511">NumThreads</a>() = 0;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#acd7af5eec524be36c62234eb458d14b9">NumIdleThreads</a>() = 0;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// Pause/resume processing jobs</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#a4ec997eabb5ac3b7bb7973b939ce896c">SuspendExecution</a>() = 0;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#ad15fe84b7ee4c8d8851d3df362c36883">ResumeExecution</a>() = 0;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// Offer the current thread to the pool</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#a7d461eee6e1498ee1694ab4d36b8c7b3">YieldWait</a>( <a class="code" href="class_c_thread_event.html">CThreadEvent</a> **pEvents, <span class="keywordtype">int</span> nEvents, <span class="keywordtype">bool</span> bWaitAll = <span class="keyword">true</span>, <span class="keywordtype">unsigned</span> timeout = <a class="code" href="threadtools_8h.html#a903b3deeb33ae9ae30e285b8c7a1796d">TT_INFINITE</a> ) = 0;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#a7d461eee6e1498ee1694ab4d36b8c7b3">YieldWait</a>( <a class="code" href="class_c_job.html">CJob</a> **, <span class="keywordtype">int</span> nJobs, <span class="keywordtype">bool</span> bWaitAll = <span class="keyword">true</span>, <span class="keywordtype">unsigned</span> timeout = <a class="code" href="threadtools_8h.html#a903b3deeb33ae9ae30e285b8c7a1796d">TT_INFINITE</a> ) = 0;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#af7213d278f1a1e3c101395246756dac4">Yield</a>( <span class="keywordtype">unsigned</span> timeout ) = 0;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="jobthread_8h.html#a7d461eee6e1498ee1694ab4d36b8c7b3">YieldWait</a>( <a class="code" href="class_c_thread_event.html">CThreadEvent</a> &amp;event, <span class="keywordtype">unsigned</span> timeout = <a class="code" href="threadtools_8h.html#a903b3deeb33ae9ae30e285b8c7a1796d">TT_INFINITE</a> );</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="jobthread_8h.html#a7d461eee6e1498ee1694ab4d36b8c7b3">YieldWait</a>( <a class="code" href="class_c_job.html">CJob</a> *, <span class="keywordtype">unsigned</span> timeout = <a class="code" href="threadtools_8h.html#a903b3deeb33ae9ae30e285b8c7a1796d">TT_INFINITE</a> );</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// Add a native job to the queue (master thread)</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#ace87b942eaa7b091275032e66502adb5">AddJob</a>( <a class="code" href="class_c_job.html">CJob</a> * ) = 0;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// All threads execute pFunctor asap. Thread will either wake up</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">//  and execute or execute pFunctor right after completing current job and</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">//  before looking for another job.</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a1a782aa7ee8221d1ee846e51bb20e778">ExecuteHighPriorityFunctor</a>( <a class="code" href="functors_8h.html#a4a69e8e3de9c540974f71fb20eb35c3a">CFunctor</a> *pFunctor ) = 0;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">// Add an function object to the queue (master thread)</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a76f8e944de1a48a985a14826b613fc95">  199</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a76f8e944de1a48a985a14826b613fc95">AddFunctor</a>( <a class="code" href="functors_8h.html#a4a69e8e3de9c540974f71fb20eb35c3a">CFunctor</a> *pFunctor, <a class="code" href="class_c_job.html">CJob</a> **ppJob = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">unsigned</span> <a class="code" href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a> = 0 ) { AddFunctorInternal( <a class="code" href="refcount_8h.html#a4216552ec5cd122cf8a7ad2594fe95dd">RetAddRef</a>( pFunctor ), ppJob, pszDescription, <a class="code" href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a> ); }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">// Change the priority of an active job</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a3f474596bb1e4a9f9788b22b6e9a5255">ChangePriority</a>( <a class="code" href="class_c_job.html">CJob</a> *p, <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559c">JobPriority_t</a> priority ) = 0;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// Bulk job manipulation (blocking)</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a28f6723ba6984f6c54042efe27688c86">  209</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#a28f6723ba6984f6c54042efe27688c86">ExecuteAll</a>( <a class="code" href="jobthread_8h.html#a48e720a8999d2628017a0b7337b53102">JobFilter_t</a> pfnFilter = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )  { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#acbfbcccdfe9ebfd8291ac67575f35467">ExecuteToPriority</a>( <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559ca06e3229bc79bbc2011b49366b1dcfe72">JP_LOW</a>, pfnFilter ); }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#acbfbcccdfe9ebfd8291ac67575f35467">ExecuteToPriority</a>( <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559c">JobPriority_t</a> toPriority, <a class="code" href="jobthread_8h.html#a48e720a8999d2628017a0b7337b53102">JobFilter_t</a> pfnFilter = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>  ) = 0;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="jobthread_8h.html#a2af07c9cbc929e665b3d0e2509f0ba5d">AbortAll</a>() = 0;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a3462381a08acfb15a6e3fb2aa4a4834d">Reserved1</a>() = 0;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// Add an arbitrary call to the queue (master thread) </span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// Avert thy eyes! Imagine rather:</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// CJob *AddCall( &lt;function&gt;, [args1, [arg2,]...]</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">// CJob *AddCall( &lt;object&gt;, &lt;function&gt;, [args1, [arg2,]...]</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// CJob *AddRefCall( &lt;object&gt;, &lt;function&gt;, [args1, [arg2,]...]</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">// CJob *QueueCall( &lt;function&gt;, [args1, [arg2,]...]</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// CJob *QueueCall( &lt;object&gt;, &lt;function&gt;, [args1, [arg2,]...]</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a8ec06279af0ba66841b60764dfc6c17a">  228</a></span>&#160;<span class="preprocessor">    #define DEFINE_NONMEMBER_ADD_CALL(N) \</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">        template &lt;typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">        CJob *AddCall(FUNCTION_RETTYPE (*pfnProxied)( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">            if ( !NumIdleThreads() ) \</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">                pJob = GetDummyJob(); \</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">                FunctorDirectCall( pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">            else \</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="preprocessor">                AddFunctorInternal( CreateFunctor( pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob ); \</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">            \</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">//-------------------------------------</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a19737a101dfe32ead3905805c74b3d8a">  248</a></span>&#160;<span class="preprocessor">    #define DEFINE_MEMBER_ADD_CALL(N) \</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor">        template &lt;typename OBJECT_TYPE, typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">        CJob *AddCall(OBJECT_TYPE *pObject, FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">            if ( !NumIdleThreads() ) \</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">                pJob = GetDummyJob(); \</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">                FunctorDirectCall( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">            else \</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">                AddFunctorInternal( CreateFunctor( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob ); \</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">            \</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">//-------------------------------------</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="jobthread_8h.html#acd24ca0dd5d08d03eacdf9ceb03be225">  268</a></span>&#160;<span class="preprocessor">    #define DEFINE_CONST_MEMBER_ADD_CALL(N) \</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">        template &lt;typename OBJECT_TYPE, typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">        CJob *AddCall(OBJECT_TYPE *pObject, FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) const FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">            if ( !NumIdleThreads() ) \</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">                pJob = GetDummyJob(); \</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">                FunctorDirectCall( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">            else \</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">                AddFunctorInternal( CreateFunctor( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob ); \</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">            \</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">//-------------------------------------</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a0c8d309d90664104c1f61a62d6c7f198">  288</a></span>&#160;<span class="preprocessor">    #define DEFINE_REF_COUNTING_MEMBER_ADD_CALL(N) \</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="preprocessor">        template &lt;typename OBJECT_TYPE, typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">        CJob *AddRefCall(OBJECT_TYPE *pObject, FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">            if ( !NumIdleThreads() ) \</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="preprocessor">                pJob = GetDummyJob(); \</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">                FunctorDirectCall( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="preprocessor">            else \</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">                AddFunctorInternal( CreateRefCountingFunctor( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob ); \</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">            \</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">//-------------------------------------</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a5f16a92181dc7b25f66543677b1ef325">  308</a></span>&#160;<span class="preprocessor">    #define DEFINE_REF_COUNTING_CONST_MEMBER_ADD_CALL(N) \</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">        template &lt;typename OBJECT_TYPE, typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">        CJob *AddRefCall(OBJECT_TYPE *pObject, FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) const FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">            if ( !NumIdleThreads() ) \</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">                pJob = GetDummyJob(); \</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">                FunctorDirectCall( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor">            else \</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor">                AddFunctorInternal( CreateRefCountingFunctor( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob ); \</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">            \</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a496b4e164a1b95748ef0cd56a3cd466d">  328</a></span>&#160;<span class="preprocessor">    #define DEFINE_NONMEMBER_QUEUE_CALL(N) \</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">        template &lt;typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">        CJob *QueueCall(FUNCTION_RETTYPE (*pfnProxied)( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="preprocessor">            AddFunctorInternal( CreateFunctor( pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob, NULL, JF_QUEUE ); \</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">//-------------------------------------</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a3565f29ba32c92ed680597196a907634">  339</a></span>&#160;<span class="preprocessor">    #define DEFINE_MEMBER_QUEUE_CALL(N) \</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="preprocessor">        template &lt;typename OBJECT_TYPE, typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="preprocessor">        CJob *QueueCall(OBJECT_TYPE *pObject, FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">            AddFunctorInternal( CreateFunctor( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob, NULL, JF_QUEUE ); \</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">//-------------------------------------</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a800d00ea312fa5ffb4fe14bbfd197aa4">  350</a></span>&#160;<span class="preprocessor">    #define DEFINE_CONST_MEMBER_QUEUE_CALL(N) \</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">        template &lt;typename OBJECT_TYPE, typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">        CJob *QueueCall(OBJECT_TYPE *pObject, FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) const FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="preprocessor">            AddFunctorInternal( CreateFunctor( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob, NULL, JF_QUEUE ); \</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">//-------------------------------------</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a6eb5bd3051a2d535d4d60209e9dfe31f">  361</a></span>&#160;<span class="preprocessor">    #define DEFINE_REF_COUNTING_MEMBER_QUEUE_CALL(N) \</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">        template &lt;typename OBJECT_TYPE, typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">        CJob *QueueRefCall(OBJECT_TYPE *pObject, FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">            AddFunctorInternal( CreateRefCountingFunctor( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob, NULL, JF_QUEUE ); \</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">//-------------------------------------</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a28a9dbb22fc1505827021359463407fb">  372</a></span>&#160;<span class="preprocessor">    #define DEFINE_REF_COUNTING_CONST_MEMBER_QUEUE_CALL(N) \</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">        template &lt;typename OBJECT_TYPE, typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N&gt; \</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">        CJob *QueueRefCall(OBJECT_TYPE *pObject, FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( FUNC_BASE_TEMPLATE_FUNC_PARAMS_##N ) const FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">            CJob *pJob; \</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="preprocessor">            AddFunctorInternal( CreateRefCountingFunctor( pObject, pfnProxied FUNC_FUNCTOR_CALL_ARGS_##N ), &amp;pJob, NULL, JF_QUEUE ); \</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="preprocessor">            \</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="preprocessor">            return pJob; \</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">        }</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a8ec06279af0ba66841b60764dfc6c17a">DEFINE_NONMEMBER_ADD_CALL</a> );</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a19737a101dfe32ead3905805c74b3d8a">DEFINE_MEMBER_ADD_CALL</a> );</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#acd24ca0dd5d08d03eacdf9ceb03be225">DEFINE_CONST_MEMBER_ADD_CALL</a> );</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a0c8d309d90664104c1f61a62d6c7f198">DEFINE_REF_COUNTING_MEMBER_ADD_CALL</a> );</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a5f16a92181dc7b25f66543677b1ef325">DEFINE_REF_COUNTING_CONST_MEMBER_ADD_CALL</a> );</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a496b4e164a1b95748ef0cd56a3cd466d">DEFINE_NONMEMBER_QUEUE_CALL</a> );</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a3565f29ba32c92ed680597196a907634">DEFINE_MEMBER_QUEUE_CALL</a> );</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a800d00ea312fa5ffb4fe14bbfd197aa4">DEFINE_CONST_MEMBER_QUEUE_CALL</a> );</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a6eb5bd3051a2d535d4d60209e9dfe31f">DEFINE_REF_COUNTING_MEMBER_QUEUE_CALL</a> );</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a28a9dbb22fc1505827021359463407fb">DEFINE_REF_COUNTING_CONST_MEMBER_QUEUE_CALL</a> );</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">    #undef DEFINE_NONMEMBER_ADD_CALL</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">    #undef DEFINE_MEMBER_ADD_CALL</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor">    #undef DEFINE_CONST_MEMBER_ADD_CALL</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">    #undef DEFINE_REF_COUNTING_MEMBER_ADD_CALL</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">    #undef DEFINE_REF_COUNTING_CONST_MEMBER_ADD_CALL</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor">    #undef DEFINE_NONMEMBER_QUEUE_CALL</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">    #undef DEFINE_MEMBER_QUEUE_CALL</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="preprocessor">    #undef DEFINE_CONST_MEMBER_QUEUE_CALL</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">    #undef DEFINE_REF_COUNTING_MEMBER_QUEUE_CALL</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor">    #undef DEFINE_REF_COUNTING_CONST_MEMBER_QUEUE_CALL</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> AddFunctorInternal( <a class="code" href="functors_8h.html#a4a69e8e3de9c540974f71fb20eb35c3a">CFunctor</a> *, <a class="code" href="class_c_job.html">CJob</a> ** = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">unsigned</span> <a class="code" href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a> = 0 ) = 0;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// Services for internal use by job instances</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a3824cda8b82f51d8ce4ead3165aaebcc">  410</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_c_job.html">CJob</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="class_c_job.html">CJob</a> *GetDummyJob() = 0;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a65bef4b88b367879c5b2a1383d2ea901">Distribute</a>( <span class="keywordtype">bool</span> bDistribute = <span class="keyword">true</span>, <span class="keywordtype">int</span> *pAffinityTable = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) = 0;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="jobthread_8h.html#a8c78545ef5776ef8636894fe83314949">Start</a>( <span class="keyword">const</span> <a class="code" href="struct_thread_pool_start_params__t.html">ThreadPoolStartParams_t</a> &amp;startParams, <span class="keyword">const</span> <span class="keywordtype">char</span> *pszNameOverride ) = 0;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;};</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<a class="code" href="jobthread_8h.html#ad78a4a7ee01b6605dc60ca2dda8e39f1">JOB_INTERFACE</a> <a class="code" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a> *<a class="code" href="jobthread_8h.html#a4250ac44298b35b9d79dd5092fc8ed1a">CreateThreadPool</a>();</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<a class="code" href="jobthread_8h.html#ad78a4a7ee01b6605dc60ca2dda8e39f1">JOB_INTERFACE</a> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a2b61118805c66c1b425c0acb52e99c0a">DestroyThreadPool</a>( <a class="code" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a> *pPool );</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">//-------------------------------------</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<a class="code" href="jobthread_8h.html#ad78a4a7ee01b6605dc60ca2dda8e39f1">JOB_INTERFACE</a> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#ae99f3594a36ac8d3165dd0223db90c2e">RunThreadPoolTests</a>();</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a3025f8802dabb05faf3b7223726a7686">  431</a></span>&#160;<a class="code" href="jobthread_8h.html#ad78a4a7ee01b6605dc60ca2dda8e39f1">JOB_INTERFACE</a> <a class="code" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a> *<a class="code" href="jobthread_8h.html#a3025f8802dabb05faf3b7223726a7686">g_pThreadPool</a>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">// Class to combine the metadata for an operation and the ability to perform</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">// the operation. Meant for inheritance. All functions inline, defers to executor</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<a class="code" href="jobthread_8h.html#aee472a78893cd630b00ca3a49a4e026b">DECLARE_POINTER_HANDLE</a>( ThreadPoolData_t );</div><div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a5d6b8f0756b2e63b1a7683e750f145c1">  438</a></span>&#160;<span class="preprocessor">#define JOB_NO_DATA ((ThreadPoolData_t)-1)</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="class_c_job.html">  440</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_job.html">CJob</a> : <span class="keyword">public</span> <a class="code" href="class_c_ref_counted1.html">CRefCounted1</a>&lt;IRefCounted, CRefCountServiceMT&gt;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="class_c_job.html#aeb49cb5d4dbdaedbbf60a2afb6e32f78">  443</a></span>&#160;    <a class="code" href="class_c_job.html#aeb49cb5d4dbdaedbbf60a2afb6e32f78">CJob</a>( <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559c">JobPriority_t</a> priority = <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559caa872989cfe5f01d95f726e1752b23a86">JP_NORMAL</a> )</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      : m_status( <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a92e09aa9ba0a2acedba1de86916bccfb">JOB_STATUS_UNSERVICED</a> ),</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        m_ThreadPoolData( <a class="code" href="jobthread_8h.html#a5d6b8f0756b2e63b1a7683e750f145c1">JOB_NO_DATA</a> ),</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        m_priority( priority ),</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        m_flags( 0 ),</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        m_pThreadPool( <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ),</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        m_CompleteEvent( <a class="code" href="glfuncs_8h.html#ac86d871be14fc81b82317273a0137feb">true</a> ),</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        m_iServicingThread( -1 )</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        m_szDescription[ 0 ] = 0;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// Priority (not thread safe)</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="class_c_job.html#a8fc4f700218de57f1611cb5ed7f5bebf">  458</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job.html#a8fc4f700218de57f1611cb5ed7f5bebf">SetPriority</a>( <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559c">JobPriority_t</a> priority )      { m_priority = priority; }</div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="class_c_job.html#adb55846202ff425646946332b0ee05de">  459</a></span>&#160;    <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559c">JobPriority_t</a> <a class="code" href="class_c_job.html#adb55846202ff425646946332b0ee05de">GetPriority</a>()<span class="keyword"> const               </span>{ <span class="keywordflow">return</span> m_priority; }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="class_c_job.html#aec18a17f2fd57ed966d1d436c1ef2d76">  463</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job.html#aec18a17f2fd57ed966d1d436c1ef2d76">SetFlags</a>( <span class="keywordtype">unsigned</span> <a class="code" href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a> )                 { m_flags = <a class="code" href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a>; }</div><div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="class_c_job.html#a4bc8c7427b32b672846c49a2ca04645f">  464</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="class_c_job.html#a4bc8c7427b32b672846c49a2ca04645f">GetFlags</a>()<span class="keyword"> const                       </span>{ <span class="keywordflow">return</span> m_flags; }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="class_c_job.html#a0be5ef74335616081f87250137a52fb1">  468</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job.html#a0be5ef74335616081f87250137a52fb1">SetServiceThread</a>( <span class="keywordtype">int</span> iServicingThread )   { m_iServicingThread = (char)iServicingThread; }</div><div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="class_c_job.html#ad87e0a9d392260030aac940353ef3794">  469</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="class_c_job.html#ad87e0a9d392260030aac940353ef3794">GetServiceThread</a>()<span class="keyword"> const                    </span>{ <span class="keywordflow">return</span> m_iServicingThread; }</div><div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="class_c_job.html#a8d74fc0757cbe33cc1e0371c9f7da410">  470</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job.html#a8d74fc0757cbe33cc1e0371c9f7da410">ClearServiceThread</a>()                       { m_iServicingThread = -1; }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// Fast queries</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="class_c_job.html#a9ce71dff960cc92565203ea1831b097b">  475</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_job.html#a9ce71dff960cc92565203ea1831b097b">Executed</a>()<span class="keyword"> const                           </span>{ <span class="keywordflow">return</span> ( m_status == <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2">JOB_OK</a> );    }</div><div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="class_c_job.html#a64fdf79076779fa424b7d252936011bd">  476</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_job.html#a64fdf79076779fa424b7d252936011bd">CanExecute</a>()<span class="keyword"> const                         </span>{ <span class="keywordflow">return</span> ( m_status == <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84aa4dbdf81bd456cab3707bba1d4122209">JOB_STATUS_PENDING</a> || m_status == <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a92e09aa9ba0a2acedba1de86916bccfb">JOB_STATUS_UNSERVICED</a> ); }</div><div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="class_c_job.html#a3369ccd7e945b07663f8f559edae752f">  477</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_job.html#a3369ccd7e945b07663f8f559edae752f">IsFinished</a>()<span class="keyword"> const                         </span>{ <span class="keywordflow">return</span> ( m_status != <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84aa4dbdf81bd456cab3707bba1d4122209">JOB_STATUS_PENDING</a> &amp;&amp; m_status != <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84ab0a033d526ecc47379d5d8cd6e772210">JOB_STATUS_INPROGRESS</a> &amp;&amp; m_status != <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a92e09aa9ba0a2acedba1de86916bccfb">JOB_STATUS_UNSERVICED</a> ); }</div><div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="class_c_job.html#a9c7765a0f7b30e2b5fc7ece5a4d9f79c">  478</a></span>&#160;    <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_job.html#a9c7765a0f7b30e2b5fc7ece5a4d9f79c">GetStatus</a>()<span class="keyword"> const                   </span>{ <span class="keywordflow">return</span> m_status; }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="class_c_job.html#a2ed50d7fdad6765ae2bf7ad3ef04ed16">  483</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job.html#a2ed50d7fdad6765ae2bf7ad3ef04ed16">SlamStatus</a>(<a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> s) { m_status = s; }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    </div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// Try to acquire ownership (to satisfy). If you take the lock, you must either execute or abort.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="class_c_job.html#a76e715f51f935c8aa969c22031af99f9">  488</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_job.html#a76e715f51f935c8aa969c22031af99f9">TryLock</a>()                                      { <span class="keywordflow">return</span> m_mutex.<a class="code" href="class_c_thread_mutex.html#a6bc5ae2ea6b75b37af5c9c6c6587e370">TryLock</a>(); }</div><div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="class_c_job.html#a797bdfeda328f1b32047583ff0a5953e">  489</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job.html#a797bdfeda328f1b32047583ff0a5953e">Lock</a>()                                         { m_mutex.<a class="code" href="class_c_thread_mutex.html#a870b10e6865b8eadc18c9ddeb29a13d4">Lock</a>(); }</div><div class="line"><a name="l00490"></a><span class="lineno"><a class="line" href="class_c_job.html#acca9286be73e0ab2b8a96222eb3af58f">  490</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job.html#acca9286be73e0ab2b8a96222eb3af58f">Unlock</a>()                                       { m_mutex.<a class="code" href="class_c_thread_mutex.html#aa3819aed8c29b55a9d82b1a48de3f2ba">Unlock</a>(); }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">// Thread event support (safe for NULL this to simplify code )</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="class_c_job.html#a75361c2e30f670a1dfa0f2d6cf4bcfed">  495</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_job.html#a75361c2e30f670a1dfa0f2d6cf4bcfed">WaitForFinish</a>( <a class="code" href="steamtypes_8h.html#a4f44b79851297d71fd90a3c87786c725">uint32</a> dwTimeout = <a class="code" href="threadtools_8h.html#a903b3deeb33ae9ae30e285b8c7a1796d">TT_INFINITE</a> ) { <span class="keywordflow">if</span> (!<span class="keyword">this</span>) <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="keywordflow">return</span> ( !<a class="code" href="class_c_job.html#a3369ccd7e945b07663f8f559edae752f">IsFinished</a>() ) ? <a class="code" href="jobthread_8h.html#a3025f8802dabb05faf3b7223726a7686">g_pThreadPool</a>-&gt;YieldWait( <span class="keyword">this</span>, dwTimeout ) : <span class="keyword">true</span>; }</div><div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="class_c_job.html#ab5e38dc5b7ec63976a70e3f81eeca0b9">  496</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_job.html#ab5e38dc5b7ec63976a70e3f81eeca0b9">WaitForFinishAndRelease</a>( <a class="code" href="steamtypes_8h.html#a4f44b79851297d71fd90a3c87786c725">uint32</a> dwTimeout = <a class="code" href="threadtools_8h.html#a903b3deeb33ae9ae30e285b8c7a1796d">TT_INFINITE</a> ) { <span class="keywordflow">if</span> (!<span class="keyword">this</span>) <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="keywordtype">bool</span> bResult = <a class="code" href="class_c_job.html#a75361c2e30f670a1dfa0f2d6cf4bcfed">WaitForFinish</a>( dwTimeout); <a class="code" href="class_c_ref_counted1.html#a3196e6e34288bb17fdd40b0e0afd860d">Release</a>(); <span class="keywordflow">return</span> bResult; }</div><div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="class_c_job.html#a1d15475847fcea0551d5c8374bf57b81">  497</a></span>&#160;    <a class="code" href="class_c_thread_event.html">CThreadEvent</a> *<a class="code" href="class_c_job.html#a1d15475847fcea0551d5c8374bf57b81">AccessEvent</a>()                     { <span class="keywordflow">return</span> &amp;m_CompleteEvent; }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// Perform the job</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_job.html#a867999296019786bbb2b8f7b2fcd4abe">Execute</a>();</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_job.html#ac23f06a647e349eeb213eaa58b47faf2">TryExecute</a>();</div><div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="class_c_job.html#a1169c3014fd3805122d71582060a063f">  504</a></span>&#160;    <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_job.html#a1169c3014fd3805122d71582060a063f">ExecuteAndRelease</a>()                 { <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> status = <a class="code" href="class_c_job.html#a867999296019786bbb2b8f7b2fcd4abe">Execute</a>(); <a class="code" href="class_c_ref_counted1.html#a3196e6e34288bb17fdd40b0e0afd860d">Release</a>(); <span class="keywordflow">return</span> status; }</div><div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="class_c_job.html#a07b98a45097b08a61efe0875fc21ed41">  505</a></span>&#160;    <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_job.html#a07b98a45097b08a61efe0875fc21ed41">TryExecuteAndRelease</a>()              { <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> status = <a class="code" href="class_c_job.html#ac23f06a647e349eeb213eaa58b47faf2">TryExecute</a>(); <a class="code" href="class_c_ref_counted1.html#a3196e6e34288bb17fdd40b0e0afd860d">Release</a>(); <span class="keywordflow">return</span> status;  }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="comment">// Terminate the job, discard if partially or wholly fulfilled</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_job.html#a2ca884d6865bcc9db34df36a81405327">Abort</a>( <span class="keywordtype">bool</span> bDiscard = <span class="keyword">true</span> );</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="class_c_job.html#ad1f68d8ff719bd713b382fd0b2a43590">  512</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">char</span> <span class="keyword">const</span> *<a class="code" href="class_c_job.html#ad1f68d8ff719bd713b382fd0b2a43590">Describe</a>()                  { <span class="keywordflow">return</span> m_szDescription[ 0 ] ? m_szDescription : <span class="stringliteral">&quot;Job&quot;</span>; }</div><div class="line"><a name="l00513"></a><span class="lineno"><a class="line" href="class_c_job.html#a5a50ff5390a60b0b61dce309ec470fe1">  513</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_c_job.html#a5a50ff5390a60b0b61dce309ec470fe1">SetDescription</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription )</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordflow">if</span>( pszDescription )</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <a class="code" href="strtools_8h.html#aa202e650fe16914f8c0446247bffd9e8">Q_strncpy</a>( m_szDescription, pszDescription, <span class="keyword">sizeof</span>( m_szDescription ) );</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            m_szDescription[ 0 ] = 0;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="class_c_job.html#a95e2ec218cf17c3eeff5f5a8f72ba249">  527</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_c_job.html#a95e2ec218cf17c3eeff5f5a8f72ba249">CThreadPool</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a>         m_status;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559c">JobPriority_t</a>       m_priority;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="class_c_thread_mutex.html">CThreadMutex</a>        m_mutex;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       m_flags;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordtype">char</span>                m_iServicingThread;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordtype">short</span>               m_reserved;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    ThreadPoolData_t    m_ThreadPoolData;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a> *       m_pThreadPool;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="class_c_thread_event.html">CThreadEvent</a>        m_CompleteEvent;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordtype">char</span>                m_szDescription[ 32 ];</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">//-----------------------------------------------------</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="class_c_job.html#aeb49cb5d4dbdaedbbf60a2afb6e32f78">CJob</a>( <span class="keyword">const</span> <a class="code" href="class_c_job.html">CJob</a> &amp;fromRequest );</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> <a class="code" href="class_c_job.html">CJob</a> &amp;fromRequest );</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> DoExecute() = 0;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> DoAbort( <span class="keywordtype">bool</span> bDiscard ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a9a5bf31f62fc158d7e2222b7c1b10126">JOB_STATUS_ABORTED</a>; }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> DoCleanup() {}</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;};</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="class_c_functor_job.html">  552</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_functor_job.html">CFunctorJob</a> : <span class="keyword">public</span> <a class="code" href="class_c_job.html">CJob</a></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="class_c_functor_job.html#aa67c57660ab37cc29fe780d73034dc55">  555</a></span>&#160;    <a class="code" href="class_c_functor_job.html#aa67c57660ab37cc29fe780d73034dc55">CFunctorJob</a>( <a class="code" href="functors_8h.html#a4a69e8e3de9c540974f71fb20eb35c3a">CFunctor</a> *pFunctor, <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        : m_pFunctor( pFunctor )</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">if</span> ( pszDescription )</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <a class="code" href="strtools_8h.html#aa202e650fe16914f8c0446247bffd9e8">Q_strncpy</a>( m_szDescription, pszDescription, <span class="keyword">sizeof</span>(m_szDescription) );</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            m_szDescription[0] = 0;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="class_c_functor_job.html#a2fbcf94ed5be3275356d86afebb63ff1">  568</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_functor_job.html#a2fbcf94ed5be3275356d86afebb63ff1">DoExecute</a>()</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        (*m_pFunctor)();</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2">JOB_OK</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="class_c_functor_job.html#a7912c6e0b2e383bbfd300308a5de509c">  574</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_c_functor_job.html#a7912c6e0b2e383bbfd300308a5de509c">Describe</a>()</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">return</span> m_szDescription;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="class_c_ref_ptr.html">CRefPtr&lt;CFunctor&gt;</a> m_pFunctor;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordtype">char</span> m_szDescription[16];</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;};</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">// Utility for managing multiple jobs</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="class_c_job_set.html">  588</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_job_set.html">CJobSet</a></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;{</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="class_c_job_set.html#a2226c9ce2553fd25ebe499a193da25f0">  591</a></span>&#160;    <a class="code" href="class_c_job_set.html#a2226c9ce2553fd25ebe499a193da25f0">CJobSet</a>( <a class="code" href="class_c_job.html">CJob</a> *pJob = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">if</span> ( pJob )</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            m_jobs.<a class="code" href="class_c_utl_vector.html#acc6e768eb5f791dff487d23195f95091">AddToTail</a>( pJob );</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="class_c_job_set.html#af71ad1ac30bd03dcecc9b232d0226a19">  599</a></span>&#160;    <a class="code" href="class_c_job_set.html#af71ad1ac30bd03dcecc9b232d0226a19">CJobSet</a>( <a class="code" href="class_c_job.html">CJob</a> **ppJobs, <span class="keywordtype">int</span> nJobs )</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">if</span> ( ppJobs )</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            m_jobs.<a class="code" href="class_c_utl_vector.html#a72771ac1761e735b01ca05e223a1eaa9">AddMultipleToTail</a>( nJobs, ppJobs );</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    }</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="class_c_job_set.html#a84b4d1296627d0c7d75ae7591ef41a48">  607</a></span>&#160;    <a class="code" href="class_c_job_set.html#a84b4d1296627d0c7d75ae7591ef41a48">~CJobSet</a>()</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = 0; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> &lt; m_jobs.<a class="code" href="class_c_utl_vector.html#ab2121fe63ed0d82600f7424c19cdaf63">Count</a>(); <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>++ )</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            m_jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;Release();</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno"><a class="line" href="class_c_job_set.html#a9f4e92c62897bd510927d7f7ac0c1d2c">  615</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job_set.html#a9f4e92c62897bd510927d7f7ac0c1d2c">operator+=</a>( <a class="code" href="class_c_job.html">CJob</a> *pJob )</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        m_jobs.<a class="code" href="class_c_utl_vector.html#acc6e768eb5f791dff487d23195f95091">AddToTail</a>( pJob );</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="class_c_job_set.html#a3f17d2a5b8d0a503d8d79297609e9705">  620</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job_set.html#a3f17d2a5b8d0a503d8d79297609e9705">operator-=</a>( <a class="code" href="class_c_job.html">CJob</a> *pJob )</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        m_jobs.<a class="code" href="class_c_utl_vector.html#a6a15535fb8f7f3321e99084f5c9d7f98">FindAndRemove</a>( pJob );</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="class_c_job_set.html#a6b91d7dd26bed26f3fc29eb2a9325143">  625</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job_set.html#a6b91d7dd26bed26f3fc29eb2a9325143">Execute</a>( <span class="keywordtype">bool</span> bRelease = <span class="keyword">true</span> )</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = 0; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> &lt; m_jobs.<a class="code" href="class_c_utl_vector.html#ab2121fe63ed0d82600f7424c19cdaf63">Count</a>(); <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>++ )</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            m_jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;Execute();</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="keywordflow">if</span> ( bRelease )</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                m_jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;Release();</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">if</span> ( bRelease )</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            m_jobs.<a class="code" href="class_c_utl_vector.html#a5d631c52d330cdfe44e4ad32cd7a6e3b">RemoveAll</a>();</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="class_c_job_set.html#a1248eafd7ab5b3e92491b0a9b6836b5d">  642</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job_set.html#a1248eafd7ab5b3e92491b0a9b6836b5d">Abort</a>( <span class="keywordtype">bool</span> bRelease = <span class="keyword">true</span> )</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = 0; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> &lt; m_jobs.<a class="code" href="class_c_utl_vector.html#ab2121fe63ed0d82600f7424c19cdaf63">Count</a>(); <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>++ )</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            m_jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;Abort();</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            <span class="keywordflow">if</span> ( bRelease )</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                m_jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;Release();</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> ( bRelease )</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            m_jobs.<a class="code" href="class_c_utl_vector.html#a5d631c52d330cdfe44e4ad32cd7a6e3b">RemoveAll</a>();</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="class_c_job_set.html#adea5df8b8a5cd838770f4b362d4a9103">  659</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job_set.html#adea5df8b8a5cd838770f4b362d4a9103">WaitForFinish</a>( <span class="keywordtype">bool</span> bRelease = <span class="keyword">true</span> )</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = 0; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> &lt; m_jobs.<a class="code" href="class_c_utl_vector.html#ab2121fe63ed0d82600f7424c19cdaf63">Count</a>(); <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>++ )</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            m_jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;WaitForFinish();</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <span class="keywordflow">if</span> ( bRelease )</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                m_jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;Release();</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">if</span> ( bRelease )</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            m_jobs.<a class="code" href="class_c_utl_vector.html#a5d631c52d330cdfe44e4ad32cd7a6e3b">RemoveAll</a>();</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="class_c_job_set.html#a675faa91ec65753cbac7fb43c065aa75">  676</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job_set.html#a675faa91ec65753cbac7fb43c065aa75">WaitForFinish</a>( <a class="code" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a> *pPool, <span class="keywordtype">bool</span> bRelease = <span class="keyword">true</span> )</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        pPool-&gt;YieldWait( m_jobs.<a class="code" href="class_c_utl_vector.html#afda10b4c843c8844b9a9f19fd35bf6b6">Base</a>(), m_jobs.<a class="code" href="class_c_utl_vector.html#ab2121fe63ed0d82600f7424c19cdaf63">Count</a>() );</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">if</span> ( bRelease )</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = 0; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> &lt; m_jobs.<a class="code" href="class_c_utl_vector.html#ab2121fe63ed0d82600f7424c19cdaf63">Count</a>(); <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>++ )</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                m_jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;Release();</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            m_jobs.<a class="code" href="class_c_utl_vector.html#a5d631c52d330cdfe44e4ad32cd7a6e3b">RemoveAll</a>();</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="class_c_utl_vector_fixed.html">CUtlVectorFixed&lt;CJob *, 16&gt;</a> m_jobs;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;};</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">// Job helpers</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="jobthread_8h.html#aeaee9ab399d8b47e622d9c4073273158">  699</a></span>&#160;<span class="preprocessor">#define ThreadExecute g_pThreadPool-&gt;QueueCall</span></div><div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a6dcf14b1ad9eddd55dcf6a7260911ad8">  700</a></span>&#160;<span class="preprocessor">#define ThreadExecuteRef g_pThreadPool-&gt;QueueRefCall</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a00a001bb5b98f175968bde7cc297f4a9">  702</a></span>&#160;<span class="preprocessor">#define BeginExecuteParallel()  do { CJobSet jobSet</span></div><div class="line"><a name="l00703"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a503bc325a932a931104d4e60a1483048">  703</a></span>&#160;<span class="preprocessor">#define EndExecuteParallel()    jobSet.WaitForFinish( g_pThreadPool ); } while (0)</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ab431d725f7572cf76dfb67f97dc6d3db">  705</a></span>&#160;<span class="preprocessor">#define ExecuteParallel         jobSet += g_pThreadPool-&gt;QueueCall</span></div><div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a9248241a396d804dfae4af9783b1452f">  706</a></span>&#160;<span class="preprocessor">#define ExecuteRefParallel      jobSet += g_pThreadPool-&gt;QueueCallRef</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">// Work splitting: array split, best when cost per item is roughly equal</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="preprocessor">#pragma warning(push)</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="preprocessor">#pragma warning(disable:4389)</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="preprocessor">#pragma warning(disable:4018)</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="preprocessor">#pragma warning(disable:4701)</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ac3172abae0b08a697ad7262b6a3be432">  720</a></span>&#160;<span class="preprocessor">#define DEFINE_NON_MEMBER_ITER_RANGE_PARALLEL(N) \</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="preprocessor">    template &lt;typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N, typename ITERTYPE1, typename ITERTYPE2&gt; \</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="preprocessor">    void IterRangeParallel(FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( ITERTYPE1, ITERTYPE2 FUNC_ADDL_TEMPLATE_FUNC_PARAMS_##N ), ITERTYPE1 from, ITERTYPE2 to FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="preprocessor">    { \</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="preprocessor">        const int MAX_THREADS = 16; \</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="preprocessor">        int nIdle = g_pThreadPool-&gt;NumIdleThreads(); \</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="preprocessor">        ITERTYPE1 range = to - from; \</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="preprocessor">        int nThreads = MIN( nIdle + 1, range ); \</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="preprocessor">        if ( nThreads &gt; MAX_THREADS ) \</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="preprocessor">            nThreads = MAX_THREADS; \</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="preprocessor">        if ( nThreads &lt; 2 ) \</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="preprocessor">            FunctorDirectCall( pfnProxied, from, to FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="preprocessor">        else \</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="preprocessor">            ITERTYPE1 nIncrement = range / nThreads; \</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="preprocessor">            \</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="preprocessor">            CJobSet jobSet; \</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="preprocessor">            while ( --nThreads ) \</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="preprocessor">                ITERTYPE2 thisTo = from + nIncrement; \</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="preprocessor">                jobSet += g_pThreadPool-&gt;AddCall( pfnProxied, from, thisTo FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="preprocessor">                from = thisTo; \</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="preprocessor">            FunctorDirectCall( pfnProxied, from, to FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="preprocessor">            jobSet.WaitForFinish( g_pThreadPool ); \</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="preprocessor">        \</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="preprocessor">    }</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#ac3172abae0b08a697ad7262b6a3be432">DEFINE_NON_MEMBER_ITER_RANGE_PARALLEL</a> );</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a93743477aef204f1a24be1b5c0197e24">  755</a></span>&#160;<span class="preprocessor">#define DEFINE_MEMBER_ITER_RANGE_PARALLEL(N) \</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="preprocessor">    template &lt;typename OBJECT_TYPE, typename FUNCTION_CLASS, typename FUNCTION_RETTYPE FUNC_TEMPLATE_FUNC_PARAMS_##N FUNC_TEMPLATE_ARG_PARAMS_##N, typename ITERTYPE1, typename ITERTYPE2&gt; \</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="preprocessor">    void IterRangeParallel(OBJECT_TYPE *pObject, FUNCTION_RETTYPE ( FUNCTION_CLASS::*pfnProxied )( ITERTYPE1, ITERTYPE2 FUNC_ADDL_TEMPLATE_FUNC_PARAMS_##N ), ITERTYPE1 from, ITERTYPE2 to FUNC_ARG_FORMAL_PARAMS_##N ) \</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="preprocessor">    { \</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="preprocessor">        const int MAX_THREADS = 16; \</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="preprocessor">        int nIdle = g_pThreadPool-&gt;NumIdleThreads(); \</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="preprocessor">        ITERTYPE1 range = to - from; \</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="preprocessor">        int nThreads = MIN( nIdle + 1, range ); \</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="preprocessor">        if ( nThreads &gt; MAX_THREADS ) \</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="preprocessor">            nThreads = MAX_THREADS; \</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="preprocessor">        if ( nThreads &lt; 2 ) \</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="preprocessor">            FunctorDirectCall( pObject, pfnProxied, from, to FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="preprocessor">        else \</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="preprocessor">        { \</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">            ITERTYPE1 nIncrement = range / nThreads; \</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="preprocessor">            \</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="preprocessor">            CJobSet jobSet; \</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="preprocessor">            while ( --nThreads ) \</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="preprocessor">            { \</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="preprocessor">                ITERTYPE2 thisTo = from + nIncrement; \</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="preprocessor">                jobSet += g_pThreadPool-&gt;AddCall( pObject, pfnProxied, from, thisTo FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="preprocessor">                from = thisTo; \</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">            FunctorDirectCall( pObject, pfnProxied, from, to FUNC_FUNCTOR_CALL_ARGS_##N ); \</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="preprocessor">            jobSet.WaitForFinish( g_pThreadPool ); \</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="preprocessor">        \</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="preprocessor">    }</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<a class="code" href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a>( <a class="code" href="jobthread_8h.html#a93743477aef204f1a24be1b5c0197e24">DEFINE_MEMBER_ITER_RANGE_PARALLEL</a> );</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">// Work splitting: competitive, best when cost per item varies a lot</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00795"></a><span class="lineno"><a class="line" href="class_c_job_item_processor.html">  795</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_job_item_processor.html">CJobItemProcessor</a></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;{</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00798"></a><span class="lineno"><a class="line" href="class_c_job_item_processor.html#af842fdd1f38052868ca280ed79c741ec">  798</a></span>&#160;    <span class="keyword">typedef</span> T <a class="code" href="class_c_job_item_processor.html#af842fdd1f38052868ca280ed79c741ec">ItemType_t</a>;</div><div class="line"><a name="l00799"></a><span class="lineno"><a class="line" href="class_c_job_item_processor.html#ac00d9282ce98ec5d20f7aa6e1e1187d7">  799</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job_item_processor.html#ac00d9282ce98ec5d20f7aa6e1e1187d7">Begin</a>() {}</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// void Process( ItemType_t &amp; ) {}</span></div><div class="line"><a name="l00801"></a><span class="lineno"><a class="line" href="class_c_job_item_processor.html#ab4eba4fc446b3cf508dc634fe5d4e484">  801</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_job_item_processor.html#ab4eba4fc446b3cf508dc634fe5d4e484">End</a>() {}</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;};</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00805"></a><span class="lineno"><a class="line" href="class_c_func_job_item_processor.html">  805</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_func_job_item_processor.html">CFuncJobItemProcessor</a> : <span class="keyword">public</span> <a class="code" href="class_c_job_item_processor.html">CJobItemProcessor</a>&lt;T&gt;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;{</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00808"></a><span class="lineno"><a class="line" href="class_c_func_job_item_processor.html#a4802f8c4bface092b1273d6072663ef0">  808</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_func_job_item_processor.html#a4802f8c4bface092b1273d6072663ef0">Init</a>(<span class="keywordtype">void</span> (*pfnProcess)( T &amp; ), <span class="keywordtype">void</span> (*pfnBegin)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">void</span> (*pfnEnd)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <a class="code" href="class_c_func_job_item_processor.html#a3c70fc79a722c74b5c491a44227c6d23">m_pfnProcess</a> = pfnProcess;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="class_c_func_job_item_processor.html#a9cbf1f3d28a25fde53984cff0903b2ec">m_pfnBegin</a> = pfnBegin;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <a class="code" href="class_c_func_job_item_processor.html#ac08ddfa96b637624de0f3c52240e31de">m_pfnEnd</a> = pfnEnd;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="comment">//CFuncJobItemProcessor(OBJECT_TYPE_PTR pObject, void (FUNCTION_CLASS::*pfnProcess)( ITEM_TYPE &amp; ), void (*pfnBegin)() = NULL, void (*pfnEnd)() = NULL );</span></div><div class="line"><a name="l00816"></a><span class="lineno"><a class="line" href="class_c_func_job_item_processor.html#aa6d69e359937781cbbc3fcc01fd3d90d">  816</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_func_job_item_processor.html#aa6d69e359937781cbbc3fcc01fd3d90d">Begin</a>()                        { <span class="keywordflow">if</span> ( <a class="code" href="class_c_func_job_item_processor.html#a9cbf1f3d28a25fde53984cff0903b2ec">m_pfnBegin</a> ) (*m_pfnBegin)(); }</div><div class="line"><a name="l00817"></a><span class="lineno"><a class="line" href="class_c_func_job_item_processor.html#a91462b1a0fb37a0a71a2b249dccfeafb">  817</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_func_job_item_processor.html#a91462b1a0fb37a0a71a2b249dccfeafb">Process</a>( T &amp;item ) { (*m_pfnProcess)( item ); }</div><div class="line"><a name="l00818"></a><span class="lineno"><a class="line" href="class_c_func_job_item_processor.html#ae6ca4d330686285fecb122f8615c6d55">  818</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_func_job_item_processor.html#ae6ca4d330686285fecb122f8615c6d55">End</a>()                          { <span class="keywordflow">if</span> ( <a class="code" href="class_c_func_job_item_processor.html#ac08ddfa96b637624de0f3c52240e31de">m_pfnEnd</a> ) (*m_pfnEnd)(); }</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="class_c_func_job_item_processor.html#a3c70fc79a722c74b5c491a44227c6d23">  821</a></span>&#160;    <a class="code" href="glfuncs_8h.html#aa7a90bbb7984c3b9323618418fde71f7">void</a> (*<a class="code" href="class_c_func_job_item_processor.html#a3c70fc79a722c74b5c491a44227c6d23">m_pfnProcess</a>)( T &amp; );</div><div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="class_c_func_job_item_processor.html#a9cbf1f3d28a25fde53984cff0903b2ec">  822</a></span>&#160;    <a class="code" href="glfuncs_8h.html#aa7a90bbb7984c3b9323618418fde71f7">void</a> (*<a class="code" href="class_c_func_job_item_processor.html#a9cbf1f3d28a25fde53984cff0903b2ec">m_pfnBegin</a>)();</div><div class="line"><a name="l00823"></a><span class="lineno"><a class="line" href="class_c_func_job_item_processor.html#ac08ddfa96b637624de0f3c52240e31de">  823</a></span>&#160;    <a class="code" href="glfuncs_8h.html#aa7a90bbb7984c3b9323618418fde71f7">void</a> (*<a class="code" href="class_c_func_job_item_processor.html#ac08ddfa96b637624de0f3c52240e31de">m_pfnEnd</a>)();</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;};</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">class</span> OBJECT_TYPE, <span class="keyword">class</span> FUNCTION_CLASS = OBJECT_TYPE &gt;</div><div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="class_c_member_func_job_item_processor.html">  827</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_member_func_job_item_processor.html">CMemberFuncJobItemProcessor</a> : <span class="keyword">public</span> <a class="code" href="class_c_job_item_processor.html">CJobItemProcessor</a>&lt;T&gt;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;{</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="class_c_member_func_job_item_processor.html#a4fdfbd8bdc90534a079374dbf5e32aa4">  830</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_member_func_job_item_processor.html#a4fdfbd8bdc90534a079374dbf5e32aa4">Init</a>( OBJECT_TYPE *pObject, <span class="keywordtype">void</span> (FUNCTION_CLASS::*pfnProcess)( T &amp; ), <span class="keywordtype">void</span> (FUNCTION_CLASS::*pfnBegin)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">void</span> (FUNCTION_CLASS::*pfnEnd)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <a class="code" href="class_c_member_func_job_item_processor.html#a20a6e74bbf369a495c877416c6f8a9a0">m_pObject</a> = pObject;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <a class="code" href="class_c_member_func_job_item_processor.html#a7d507558819ad266d57ccb6a459f5f17">m_pfnProcess</a> = pfnProcess;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <a class="code" href="class_c_member_func_job_item_processor.html#a17210c4a62210663a26787226a25e522">m_pfnBegin</a> = pfnBegin;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <a class="code" href="class_c_member_func_job_item_processor.html#a2f9ef97d1be7c65ec9a0278a2d5a6236">m_pfnEnd</a> = pfnEnd;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="class_c_member_func_job_item_processor.html#ab903ccda1b69196e693400af86953744">  838</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_member_func_job_item_processor.html#ab903ccda1b69196e693400af86953744">Begin</a>()                        { <span class="keywordflow">if</span> ( <a class="code" href="class_c_member_func_job_item_processor.html#a17210c4a62210663a26787226a25e522">m_pfnBegin</a> ) ((*m_pObject).*<a class="code" href="class_c_member_func_job_item_processor.html#a17210c4a62210663a26787226a25e522">m_pfnBegin</a>)(); }</div><div class="line"><a name="l00839"></a><span class="lineno"><a class="line" href="class_c_member_func_job_item_processor.html#a8c21a2448201e9be1820083926a6ef36">  839</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_member_func_job_item_processor.html#a8c21a2448201e9be1820083926a6ef36">Process</a>( T &amp;item )             { ((*m_pObject).*<a class="code" href="class_c_member_func_job_item_processor.html#a7d507558819ad266d57ccb6a459f5f17">m_pfnProcess</a>)( item ); }</div><div class="line"><a name="l00840"></a><span class="lineno"><a class="line" href="class_c_member_func_job_item_processor.html#a160020b037d4fd70e0c2704258d90de1">  840</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_member_func_job_item_processor.html#a160020b037d4fd70e0c2704258d90de1">End</a>()                          { <span class="keywordflow">if</span> ( <a class="code" href="class_c_member_func_job_item_processor.html#a2f9ef97d1be7c65ec9a0278a2d5a6236">m_pfnEnd</a> ) ((*m_pObject).*<a class="code" href="class_c_member_func_job_item_processor.html#a2f9ef97d1be7c65ec9a0278a2d5a6236">m_pfnEnd</a>)(); }</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l00843"></a><span class="lineno"><a class="line" href="class_c_member_func_job_item_processor.html#a20a6e74bbf369a495c877416c6f8a9a0">  843</a></span>&#160;    OBJECT_TYPE *<a class="code" href="class_c_member_func_job_item_processor.html#a20a6e74bbf369a495c877416c6f8a9a0">m_pObject</a>;</div><div class="line"><a name="l00844"></a><span class="lineno"><a class="line" href="class_c_member_func_job_item_processor.html#a7d507558819ad266d57ccb6a459f5f17">  844</a></span>&#160;    <a class="code" href="glfuncs_8h.html#aa7a90bbb7984c3b9323618418fde71f7">void</a> (FUNCTION_CLASS::*<a class="code" href="class_c_member_func_job_item_processor.html#a7d507558819ad266d57ccb6a459f5f17">m_pfnProcess</a>)( T &amp; );</div><div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="class_c_member_func_job_item_processor.html#a17210c4a62210663a26787226a25e522">  845</a></span>&#160;    <a class="code" href="glfuncs_8h.html#aa7a90bbb7984c3b9323618418fde71f7">void</a> (FUNCTION_CLASS::*<a class="code" href="class_c_member_func_job_item_processor.html#a17210c4a62210663a26787226a25e522">m_pfnBegin</a>)();</div><div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="class_c_member_func_job_item_processor.html#a2f9ef97d1be7c65ec9a0278a2d5a6236">  846</a></span>&#160;    <a class="code" href="glfuncs_8h.html#aa7a90bbb7984c3b9323618418fde71f7">void</a> (FUNCTION_CLASS::*<a class="code" href="class_c_member_func_job_item_processor.html#a2f9ef97d1be7c65ec9a0278a2d5a6236">m_pfnEnd</a>)();</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;};</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ITEM_TYPE, <span class="keyword">class</span> ITEM_PROCESSOR_TYPE&gt;</div><div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="class_c_parallel_processor.html">  850</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_parallel_processor.html">CParallelProcessor</a></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;{</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="class_c_parallel_processor.html#a5ba699cb745eeac0e5e1812d3ab465ff">  853</a></span>&#160;    <a class="code" href="class_c_parallel_processor.html#a5ba699cb745eeac0e5e1812d3ab465ff">CParallelProcessor</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription )</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        m_pItems = m_pLimit= 0;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        m_szDescription = pszDescription;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno"><a class="line" href="class_c_parallel_processor.html#abfd635636cc71b0fbf4b463d1a4da63c">  859</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_parallel_processor.html#abfd635636cc71b0fbf4b463d1a4da63c">Run</a>( ITEM_TYPE *pItems, <span class="keywordtype">unsigned</span> nItems, <span class="keywordtype">int</span> nMaxParallel = INT_MAX, <a class="code" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a> *pThreadPool = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <a class="code" href="tmapi__dummy_8h.html#aec1bea702cd5a15ce0605b5efbfeb88b">tmZone</a>( TELEMETRY_LEVEL0, TMZF_NONE, <span class="stringliteral">&quot;Run %s %d&quot;</span>, m_szDescription, nItems );</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">if</span> ( nItems == 0 )</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">if</span> ( !pThreadPool )</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            pThreadPool = <a class="code" href="jobthread_8h.html#a3025f8802dabb05faf3b7223726a7686">g_pThreadPool</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        }</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        m_pItems = pItems;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        m_pLimit = pItems + nItems;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keywordtype">int</span> nJobs = nItems - 1;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="keywordflow">if</span> ( nJobs &gt; nMaxParallel )</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            nJobs = nMaxParallel;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">if</span> (! pThreadPool )                                 <span class="comment">// only possible on linux</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        {</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            DoExecute( );</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordtype">int</span> nThreads = pThreadPool-&gt;NumThreads();</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keywordflow">if</span> ( nJobs &gt; nThreads )</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            nJobs = nThreads;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">if</span> ( nJobs &gt; 1 )</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <a class="code" href="class_c_job.html">CJob</a> **jobs = (<a class="code" href="class_c_job.html">CJob</a> **)stackalloc( nJobs * <span class="keyword">sizeof</span>(<a class="code" href="class_c_job.html">CJob</a> **) );</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = nJobs;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <span class="keywordflow">while</span>( <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>-- )</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>] = pThreadPool-&gt;QueueCall( <span class="keyword">this</span>, &amp;<a class="code" href="class_c_parallel_processor.html">CParallelProcessor&lt;ITEM_TYPE, ITEM_PROCESSOR_TYPE&gt;::DoExecute</a> );</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;<a class="code" href="class_c_job.html#a5a50ff5390a60b0b61dce309ec470fe1">SetDescription</a>( m_szDescription );</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            DoExecute();</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">for</span> ( <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = 0; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> &lt; nJobs; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>++ )</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;<a class="code" href="class_c_job.html#a2ca884d6865bcc9db34df36a81405327">Abort</a>(); <span class="comment">// will either abort ones that never got a thread, or noop on ones that did</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                jobs[<a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>]-&gt;<a class="code" href="class_c_ref_counted1.html#a3196e6e34288bb17fdd40b0e0afd860d">Release</a>();</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            DoExecute();</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        }</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno"><a class="line" href="class_c_parallel_processor.html#a4eabe08c976bfe8e63f95e4b5952786b">  918</a></span>&#160;    ITEM_PROCESSOR_TYPE <a class="code" href="class_c_parallel_processor.html#a4eabe08c976bfe8e63f95e4b5952786b">m_ItemProcessor</a>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordtype">void</span> DoExecute()</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <a class="code" href="tmapi__dummy_8h.html#aec1bea702cd5a15ce0605b5efbfeb88b">tmZone</a>( TELEMETRY_LEVEL0, TMZF_NONE, <span class="stringliteral">&quot;DoExecute %s&quot;</span>, m_szDescription );</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">if</span> ( m_pItems &lt; m_pLimit )</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        {</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            <a class="code" href="class_c_parallel_processor.html#a4eabe08c976bfe8e63f95e4b5952786b">m_ItemProcessor</a>.Begin();</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            ITEM_TYPE *pLimit = m_pLimit;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            {</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                ITEM_TYPE *pCurrent = m_pItems++;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                <span class="keywordflow">if</span> ( pCurrent &lt; pLimit )</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                    <a class="code" href="class_c_parallel_processor.html#a4eabe08c976bfe8e63f95e4b5952786b">m_ItemProcessor</a>.Process( *pCurrent );</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <a class="code" href="class_c_parallel_processor.html#a4eabe08c976bfe8e63f95e4b5952786b">m_ItemProcessor</a>.End();</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        }</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <a class="code" href="class_c_interlocked_ptr.html">CInterlockedPtr&lt;ITEM_TYPE&gt;</a>  m_pItems;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    ITEM_TYPE *                 m_pLimit;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *                m_szDescription;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;};</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ITEM_TYPE&gt; </div><div class="line"><a name="l00953"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a9acb14f54322c771a0af85a9b9a67c79">  953</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a9acb14f54322c771a0af85a9b9a67c79">ParallelProcess</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription, ITEM_TYPE *pItems, <span class="keywordtype">unsigned</span> nItems, <span class="keywordtype">void</span> (*pfnProcess)( ITEM_TYPE &amp; ), <span class="keywordtype">void</span> (*pfnBegin)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">void</span> (*pfnEnd)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">int</span> nMaxParallel = INT_MAX )</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;{</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="class_c_parallel_processor.html">CParallelProcessor&lt;ITEM_TYPE, CFuncJobItemProcessor&lt;ITEM_TYPE&gt;</a> &gt; processor( pszDescription );</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    processor.<a class="code" href="class_c_parallel_processor.html#a4eabe08c976bfe8e63f95e4b5952786b">m_ItemProcessor</a>.Init( pfnProcess, pfnBegin, pfnEnd );</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    processor.<a class="code" href="class_c_parallel_processor.html#abfd635636cc71b0fbf4b463d1a4da63c">Run</a>( pItems, nItems, nMaxParallel );</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;}</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ITEM_TYPE, <span class="keyword">typename</span> OBJECT_TYPE, <span class="keyword">typename</span> FUNCTION_CLASS &gt; </div><div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a7ae46e814604806fa84911f006f326bf">  962</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a9acb14f54322c771a0af85a9b9a67c79">ParallelProcess</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription, ITEM_TYPE *pItems, <span class="keywordtype">unsigned</span> nItems, OBJECT_TYPE *pObject, <span class="keywordtype">void</span> (FUNCTION_CLASS::*pfnProcess)( ITEM_TYPE &amp; ), <span class="keywordtype">void</span> (FUNCTION_CLASS::*pfnBegin)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">void</span> (FUNCTION_CLASS::*pfnEnd)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">int</span> nMaxParallel = INT_MAX )</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;{</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <a class="code" href="class_c_parallel_processor.html">CParallelProcessor&lt;ITEM_TYPE, CMemberFuncJobItemProcessor&lt;ITEM_TYPE, OBJECT_TYPE, FUNCTION_CLASS&gt;</a> &gt; processor( pszDescription );</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    processor.<a class="code" href="class_c_parallel_processor.html#a4eabe08c976bfe8e63f95e4b5952786b">m_ItemProcessor</a>.Init( pObject, pfnProcess, pfnBegin, pfnEnd );</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    processor.<a class="code" href="class_c_parallel_processor.html#abfd635636cc71b0fbf4b463d1a4da63c">Run</a>( pItems, nItems, nMaxParallel );</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">// Parallel Process that lets you specify threadpool</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ITEM_TYPE&gt; </div><div class="line"><a name="l00971"></a><span class="lineno"><a class="line" href="jobthread_8h.html#add68975c3e810a3441769c94a207892f">  971</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a9acb14f54322c771a0af85a9b9a67c79">ParallelProcess</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription, <a class="code" href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a> *pPool, ITEM_TYPE *pItems, <span class="keywordtype">unsigned</span> nItems, <span class="keywordtype">void</span> (*pfnProcess)( ITEM_TYPE &amp; ), <span class="keywordtype">void</span> (*pfnBegin)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">void</span> (*pfnEnd)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">int</span> nMaxParallel = INT_MAX )</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;{</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <a class="code" href="class_c_parallel_processor.html">CParallelProcessor&lt;ITEM_TYPE, CFuncJobItemProcessor&lt;ITEM_TYPE&gt;</a> &gt; processor( pszDescription );</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    processor.<a class="code" href="class_c_parallel_processor.html#a4eabe08c976bfe8e63f95e4b5952786b">m_ItemProcessor</a>.Init( pfnProcess, pfnBegin, pfnEnd );</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    processor.<a class="code" href="class_c_parallel_processor.html#abfd635636cc71b0fbf4b463d1a4da63c">Run</a>( pItems, nItems, nMaxParallel, pPool );</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;}</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> ITEM_PROCESSOR_TYPE&gt;</div><div class="line"><a name="l00980"></a><span class="lineno"><a class="line" href="class_c_parallel_loop_processor.html">  980</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_parallel_loop_processor.html">CParallelLoopProcessor</a></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;{</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="class_c_parallel_loop_processor.html#a8e6a3c9415ece3af392fb231c6370c84">  983</a></span>&#160;    <a class="code" href="class_c_parallel_loop_processor.html#a8e6a3c9415ece3af392fb231c6370c84">CParallelLoopProcessor</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription )</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        m_lIndex = m_lLimit= 0;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        m_nActive = 0;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        m_szDescription = pszDescription;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno"><a class="line" href="class_c_parallel_loop_processor.html#aaabd2d28ac6a4a4f82abd43a5ace0548">  990</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_parallel_loop_processor.html#aaabd2d28ac6a4a4f82abd43a5ace0548">Run</a>( <span class="keywordtype">long</span> lBegin, <span class="keywordtype">long</span> nItems, <span class="keywordtype">int</span> nMaxParallel = INT_MAX )</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">if</span> ( nItems )</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        {</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            m_lIndex = lBegin;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            m_lLimit = lBegin + nItems;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = <a class="code" href="jobthread_8h.html#a3025f8802dabb05faf3b7223726a7686">g_pThreadPool</a>-&gt;NumIdleThreads();</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="keywordflow">if</span> ( nMaxParallel &lt; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>)</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = nMaxParallel;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            }</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="keywordflow">while</span>( <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>-- )</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                ++m_nActive;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                <a class="code" href="jobthread_8h.html#aeaee9ab399d8b47e622d9c4073273158">ThreadExecute</a>( <span class="keyword">this</span>, &amp;<a class="code" href="class_c_parallel_loop_processor.html">CParallelLoopProcessor&lt;ITEM_PROCESSOR_TYPE&gt;::DoExecute</a> )-&gt;Release();</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            ++m_nActive;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            DoExecute();</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="keywordflow">while</span> ( m_nActive )</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                <a class="code" href="threadtools_8h.html#a391787a2f33dde1ece5549c1565033b3">ThreadPause</a>();</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        }</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="class_c_parallel_loop_processor.html#a7d3cc76807a1dc593301f41d034e32a6"> 1019</a></span>&#160;    ITEM_PROCESSOR_TYPE <a class="code" href="class_c_parallel_loop_processor.html#a7d3cc76807a1dc593301f41d034e32a6">m_ItemProcessor</a>;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordtype">void</span> DoExecute()</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <a class="code" href="tmapi__dummy_8h.html#aec1bea702cd5a15ce0605b5efbfeb88b">tmZone</a>( TELEMETRY_LEVEL0, TMZF_NONE, <span class="stringliteral">&quot;DoExecute %s&quot;</span>, m_szDescription );</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <a class="code" href="class_c_parallel_loop_processor.html#a7d3cc76807a1dc593301f41d034e32a6">m_ItemProcessor</a>.Begin();</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="keywordtype">long</span> lLimit = m_lLimit;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordtype">long</span> lIndex = m_lIndex ++;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="keywordflow">if</span> ( lIndex &lt; lLimit )</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                <a class="code" href="class_c_parallel_loop_processor.html#a7d3cc76807a1dc593301f41d034e32a6">m_ItemProcessor</a>.Process( lIndex );</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        }</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <a class="code" href="class_c_parallel_loop_processor.html#a7d3cc76807a1dc593301f41d034e32a6">m_ItemProcessor</a>.End();</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        --m_nActive;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="class_c_interlocked_int_t.html">CInterlockedInt</a>             m_lIndex;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordtype">long</span>                        m_lLimit;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="class_c_interlocked_int_t.html">CInterlockedInt</a>             m_nActive;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *                m_szDescription;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;};</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a582d004c8cb34086f27bdfde186af566"> 1053</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a582d004c8cb34086f27bdfde186af566">ParallelLoopProcess</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *szDescription, <span class="keywordtype">long</span> lBegin, <span class="keywordtype">unsigned</span> nItems, <span class="keywordtype">void</span> (*pfnProcess)( <span class="keywordtype">long</span> <span class="keyword">const</span> &amp; ), <span class="keywordtype">void</span> (*pfnBegin)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">void</span> (*pfnEnd)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">int</span> nMaxParallel = INT_MAX )</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;{</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <a class="code" href="class_c_parallel_loop_processor.html">CParallelLoopProcessor&lt; CFuncJobItemProcessor&lt; long const &gt;</a> &gt; processor( szDescription );</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    processor.<a class="code" href="class_c_parallel_loop_processor.html#a7d3cc76807a1dc593301f41d034e32a6">m_ItemProcessor</a>.Init( pfnProcess, pfnBegin, pfnEnd );</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    processor.<a class="code" href="class_c_parallel_loop_processor.html#aaabd2d28ac6a4a4f82abd43a5ace0548">Run</a>( lBegin, nItems, nMaxParallel );</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;}</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="keyword">template</span> &lt; <span class="keyword">typename</span> OBJECT_TYPE, <span class="keyword">typename</span> FUNCTION_CLASS &gt; </div><div class="line"><a name="l01062"></a><span class="lineno"><a class="line" href="jobthread_8h.html#acf43268ad0aec2d9c3a717cd184ca3d4"> 1062</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="jobthread_8h.html#a582d004c8cb34086f27bdfde186af566">ParallelLoopProcess</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *szDescription, <span class="keywordtype">long</span> lBegin, <span class="keywordtype">unsigned</span> nItems, OBJECT_TYPE *pObject, <span class="keywordtype">void</span> (FUNCTION_CLASS::*pfnProcess)( <span class="keywordtype">long</span> <span class="keyword">const</span> &amp; ), <span class="keywordtype">void</span> (FUNCTION_CLASS::*pfnBegin)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">void</span> (FUNCTION_CLASS::*pfnEnd)() = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">int</span> nMaxParallel = INT_MAX )</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;{</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <a class="code" href="class_c_parallel_loop_processor.html">CParallelLoopProcessor&lt; CMemberFuncJobItemProcessor&lt;long const, OBJECT_TYPE, FUNCTION_CLASS&gt;</a> &gt; processor( szDescription );</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    processor.<a class="code" href="class_c_parallel_loop_processor.html#a7d3cc76807a1dc593301f41d034e32a6">m_ItemProcessor</a>.Init( pObject, pfnProcess, pfnBegin, pfnEnd );</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    processor.<a class="code" href="class_c_parallel_loop_processor.html#aaabd2d28ac6a4a4f82abd43a5ace0548">Run</a>( lBegin, nItems, nMaxParallel );</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;}</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> Derived&gt;</div><div class="line"><a name="l01071"></a><span class="lineno"><a class="line" href="class_c_parallel_processor_base.html"> 1071</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_parallel_processor_base.html">CParallelProcessorBase</a></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;{</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l01074"></a><span class="lineno"><a class="line" href="class_c_parallel_processor_base.html#a70e8a2e5f3018234fafef5f2a3b76bcf"> 1074</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="class_c_parallel_processor_base.html">CParallelProcessorBase&lt;Derived&gt;</a> <a class="code" href="class_c_parallel_processor_base.html#a70e8a2e5f3018234fafef5f2a3b76bcf">ThisParallelProcessorBase_t</a>;</div><div class="line"><a name="l01075"></a><span class="lineno"><a class="line" href="class_c_parallel_processor_base.html#aef158d61ffd876125dd2933de52d1ed8"> 1075</a></span>&#160;    <span class="keyword">typedef</span> Derived <a class="code" href="class_c_parallel_processor_base.html#aef158d61ffd876125dd2933de52d1ed8">ThisParallelProcessorDerived_t</a>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l01078"></a><span class="lineno"><a class="line" href="class_c_parallel_processor_base.html#a43ed5acdf0660bdf1cf5b86a110df276"> 1078</a></span>&#160;    <a class="code" href="class_c_parallel_processor_base.html#a43ed5acdf0660bdf1cf5b86a110df276">CParallelProcessorBase</a>()</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        m_nActive = 0;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        m_szDescription = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    }</div><div class="line"><a name="l01083"></a><span class="lineno"><a class="line" href="class_c_parallel_processor_base.html#a1e6b310b5125c734d3c6fa8f97caa3e8"> 1083</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_parallel_processor_base.html#a1e6b310b5125c734d3c6fa8f97caa3e8">SetDescription</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDescription )</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        m_szDescription = pszDescription;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="class_c_parallel_processor_base.html#a85e74f30694c28fc1cdd2aee9403efe9"> 1089</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_parallel_processor_base.html#a85e74f30694c28fc1cdd2aee9403efe9">Run</a>( <span class="keywordtype">int</span> nMaxParallel = INT_MAX, <span class="keywordtype">int</span> threadOverride = -1 )</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = <a class="code" href="jobthread_8h.html#a3025f8802dabb05faf3b7223726a7686">g_pThreadPool</a>-&gt;NumIdleThreads();</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span> ( nMaxParallel &lt; <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a>)</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> = nMaxParallel;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">while</span>( <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> -- &gt; 0 )</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <span class="keywordflow">if</span> (  threadOverride == -1 || <a class="code" href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a> == threadOverride - 1 )</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                ++ m_nActive;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                <a class="code" href="jobthread_8h.html#aeaee9ab399d8b47e622d9c4073273158">ThreadExecute</a>( <span class="keyword">this</span>, &amp;ThisParallelProcessorBase_t::DoExecute )-&gt;Release();</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        }</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="keywordflow">if</span> (  threadOverride == -1 || threadOverride == 0 )</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            ++ m_nActive;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            DoExecute();</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">while</span> ( m_nActive )</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <a class="code" href="threadtools_8h.html#a391787a2f33dde1ece5549c1565033b3">ThreadPause</a>();</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="class_c_parallel_processor_base.html#a8bea885c28b4c8ff33d38aaa3ea18fde"> 1120</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_parallel_processor_base.html#a8bea885c28b4c8ff33d38aaa3ea18fde">OnBegin</a>() {}</div><div class="line"><a name="l01121"></a><span class="lineno"><a class="line" href="class_c_parallel_processor_base.html#afd3942632cb5f03ccc11e3c9e81e8eb2"> 1121</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_parallel_processor_base.html#afd3942632cb5f03ccc11e3c9e81e8eb2">OnProcess</a>() { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div><div class="line"><a name="l01122"></a><span class="lineno"><a class="line" href="class_c_parallel_processor_base.html#a832cd4b922e505154ddab494ea4a215a"> 1122</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_parallel_processor_base.html#a832cd4b922e505154ddab494ea4a215a">OnEnd</a>() {}</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordtype">void</span> DoExecute()</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <a class="code" href="tmapi__dummy_8h.html#aec1bea702cd5a15ce0605b5efbfeb88b">tmZone</a>( TELEMETRY_LEVEL0, TMZF_NONE, <span class="stringliteral">&quot;DoExecute %s&quot;</span>, m_szDescription );</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keyword">static_cast&lt;</span>Derived *<span class="keyword">&gt;</span>( this )-&gt;<a class="code" href="class_c_parallel_processor_base.html#a8bea885c28b4c8ff33d38aaa3ea18fde">OnBegin</a>();</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="keywordflow">while</span> ( static_cast&lt;Derived *&gt;( <span class="keyword">this</span> )-&gt;OnProcess() )</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="keyword">static_cast&lt;</span>Derived *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="class_c_parallel_processor_base.html#a832cd4b922e505154ddab494ea4a215a">OnEnd</a>();</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        -- m_nActive;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    }</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="class_c_interlocked_int_t.html">CInterlockedInt</a>             m_nActive;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *                m_szDescription;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;};</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">// Raw thread launching</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="jobthread_8h.html#acaf1b0042d84e3d28e530347df47a1cc"> 1150</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="jobthread_8h.html#acaf1b0042d84e3d28e530347df47a1cc">FunctorExecuteThread</a>( <span class="keywordtype">void</span> *pParam )</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;{</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <a class="code" href="functors_8h.html#a4a69e8e3de9c540974f71fb20eb35c3a">CFunctor</a> *pFunctor = (<a class="code" href="functors_8h.html#a4a69e8e3de9c540974f71fb20eb35c3a">CFunctor</a> *)pParam;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    (*pFunctor)();</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    pFunctor-&gt;Release();</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;}</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad"> 1158</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( <a class="code" href="functors_8h.html#a4a69e8e3de9c540974f71fb20eb35c3a">CFunctor</a> *pFunctor, <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName = <a class="code" href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;{</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    ThreadHandle_t hThread;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <a class="code" href="threadtools_8h.html#a8125c9b7ab2649b75d9dee1bc04a5326">ThreadId_t</a> threadId;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    hThread = <a class="code" href="threadtools_8h.html#a5092325165a2de177d2d6a6d7c3aa3e7">CreateSimpleThread</a>( <a class="code" href="jobthread_8h.html#acaf1b0042d84e3d28e530347df47a1cc">FunctorExecuteThread</a>, pFunctor, &amp;threadId );</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">if</span> ( pszName )</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <a class="code" href="threadtools_8h.html#aa9b869e6b785afadc2a1aca94b4c13e7">ThreadSetDebugName</a>( threadId, pszName );</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">return</span> hThread;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251"> 1170</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a>( <a class="code" href="class_c_job.html">CJob</a> *pJob ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateFunctor( pJob, &amp;<a class="code" href="class_c_job.html#a867999296019786bbb2b8f7b2fcd4abe">CJob::Execute</a> ), pJob-&gt;<a class="code" href="class_c_job.html#ad1f68d8ff719bd713b382fd0b2a43590">Describe</a>()  ); }</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1&gt;                                                                                              </div><div class="line"><a name="l01173"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a0bb00bcce5d56c266b122a3fe005bf95"> 1173</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateFunctor( a1 ), pszName  ); }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;                                                                                 </div><div class="line"><a name="l01176"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a3ffe80db3f7a758274c31ff2a49f106c"> 1176</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateFunctor( a1, a2 ), pszName  ); }</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3&gt;                                                                    </div><div class="line"><a name="l01179"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a6094a56f50a96f3f6a4535ef8fdf9fa7"> 1179</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateFunctor( a1, a2, a3 ), pszName  ); }</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4&gt;                                                       </div><div class="line"><a name="l01182"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a5890106d9b85ea9f9282f05207f974d8"> 1182</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateFunctor( a1, a2, a3, a4 ), pszName  ); }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4, <span class="keyword">typename</span> T5&gt;                                          </div><div class="line"><a name="l01185"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a92ff8e206b0f2a03f4f63a4d494b0793"> 1185</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4, T5 a5 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateFunctor( a1, a2, a3, a4, a5 ), pszName  ); }</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4, <span class="keyword">typename</span> T5, <span class="keyword">typename</span> T6&gt;                             </div><div class="line"><a name="l01188"></a><span class="lineno"><a class="line" href="jobthread_8h.html#aa4eed4dd5a4fb957c82478d1b49d9ac1"> 1188</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4, T5 a5, T6 a6 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateFunctor( a1, a2, a3, a4, a5, a6 ), pszName  ); }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4, <span class="keyword">typename</span> T5, <span class="keyword">typename</span> T6, <span class="keyword">typename</span> T7&gt;                </div><div class="line"><a name="l01191"></a><span class="lineno"><a class="line" href="jobthread_8h.html#af94ab19b7b408314dca676cd70a5e0a2"> 1191</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4, T5 a5, T6 a6, T7 a7 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateFunctor( a1, a2, a3, a4, a5, a6, a7 ), pszName  ); }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4, <span class="keyword">typename</span> T5, <span class="keyword">typename</span> T6, <span class="keyword">typename</span> T7, <span class="keyword">typename</span> T8&gt;   </div><div class="line"><a name="l01194"></a><span class="lineno"><a class="line" href="jobthread_8h.html#aba81084efb7366f4f8fff1b170ed9529"> 1194</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4, T5 a5, T6 a6, T7 a7, T8 a8 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateFunctor( a1, a2, a3, a4, a5, a6, a7, a8 ), pszName  ); }</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;                                                                                 </div><div class="line"><a name="l01197"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ad29e2394c50d3cc551ccafe4b408a871"> 1197</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#ad29e2394c50d3cc551ccafe4b408a871">ThreadExecuteSoloRef</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateRefCountingFunctor(a1, a2 ), pszName  ); }</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3&gt;                                                                    </div><div class="line"><a name="l01200"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ac0a0e1836090a921919db0c1e7ec9ddd"> 1200</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#ad29e2394c50d3cc551ccafe4b408a871">ThreadExecuteSoloRef</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateRefCountingFunctor(a1, a2, a3 ), pszName  ); }</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4&gt;                                                       </div><div class="line"><a name="l01203"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ad23b76e8c3c9535801fa56c9bf35e2de"> 1203</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#ad29e2394c50d3cc551ccafe4b408a871">ThreadExecuteSoloRef</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateRefCountingFunctor(a1, a2, a3, a4 ), pszName  ); }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4, <span class="keyword">typename</span> T5&gt;                                          </div><div class="line"><a name="l01206"></a><span class="lineno"><a class="line" href="jobthread_8h.html#afa8810f006906129f5b4dc1220ca0e73"> 1206</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#ad29e2394c50d3cc551ccafe4b408a871">ThreadExecuteSoloRef</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4, T5 a5 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateRefCountingFunctor(a1, a2, a3, a4, a5 ), pszName  ); }</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4, <span class="keyword">typename</span> T5, <span class="keyword">typename</span> T6&gt;                             </div><div class="line"><a name="l01209"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a30bcff1d4d32df68a76de0151ab63d72"> 1209</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#ad29e2394c50d3cc551ccafe4b408a871">ThreadExecuteSoloRef</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4, T5 a5, T6 a6 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateRefCountingFunctor(a1, a2, a3, a4, a5, a6 ), pszName  ); }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4, <span class="keyword">typename</span> T5, <span class="keyword">typename</span> T6, <span class="keyword">typename</span> T7&gt;                </div><div class="line"><a name="l01212"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ae1578f5143e00f7e249f2e6c198212f7"> 1212</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#ad29e2394c50d3cc551ccafe4b408a871">ThreadExecuteSoloRef</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4, T5 a5, T6 a6, T7 a7 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateRefCountingFunctor(a1, a2, a3, a4, a5, a6, a7 ), pszName  ); }</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2, <span class="keyword">typename</span> T3, <span class="keyword">typename</span> T4, <span class="keyword">typename</span> T5, <span class="keyword">typename</span> T6, <span class="keyword">typename</span> T7, <span class="keyword">typename</span> T8&gt;   </div><div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ac94f6d41819c0ca9daffc1646104b0ab"> 1215</a></span>&#160;<span class="keyword">inline</span> ThreadHandle_t <a class="code" href="jobthread_8h.html#ad29e2394c50d3cc551ccafe4b408a871">ThreadExecuteSoloRef</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *pszName, T1 a1, T2 a2, T3 a3, T4 a4, T5 a5, T6 a6, T7 a7, T8 a8 ) { <span class="keywordflow">return</span> <a class="code" href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a>( CreateRefCountingFunctor(a1, a2, a3, a4, a5, a6, a7, a8 ), pszName  ); }</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"><a class="line" href="jobthread_8h.html#ac85a72444c3a2e76458fb73d103dd01f"> 1219</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="jobthread_8h.html#a7d461eee6e1498ee1694ab4d36b8c7b3">IThreadPool::YieldWait</a>( <a class="code" href="class_c_thread_event.html">CThreadEvent</a> &amp;event, <span class="keywordtype">unsigned</span> timeout )</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;{</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <a class="code" href="class_c_thread_event.html">CThreadEvent</a> *pEvent = &amp;event;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="jobthread_8h.html#a7d461eee6e1498ee1694ab4d36b8c7b3">YieldWait</a>( &amp;pEvent, 1, <span class="keyword">true</span>, timeout ) != <a class="code" href="threadtools_8h.html#aa4e6169ba793ccbbf4f7bb7fb97fddf9a3a5bb774545a3c01a472cb04d11ff83d">TW_TIMEOUT</a> );</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"><a class="line" href="jobthread_8h.html#a98a89de87c4a5c7f806c8f1e1b787e89"> 1225</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="jobthread_8h.html#a7d461eee6e1498ee1694ab4d36b8c7b3">IThreadPool::YieldWait</a>( <a class="code" href="class_c_job.html">CJob</a> *pJob, <span class="keywordtype">unsigned</span> timeout )</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;{</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="jobthread_8h.html#a7d461eee6e1498ee1694ab4d36b8c7b3">YieldWait</a>( &amp;pJob, 1, <span class="keyword">true</span>, timeout ) != <a class="code" href="threadtools_8h.html#aa4e6169ba793ccbbf4f7bb7fb97fddf9a3a5bb774545a3c01a472cb04d11ff83d">TW_TIMEOUT</a> );</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="class_c_job.html#a867999296019786bbb2b8f7b2fcd4abe"> 1232</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_job.html#a867999296019786bbb2b8f7b2fcd4abe">CJob::Execute</a>()</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;{</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="class_c_job.html#a3369ccd7e945b07663f8f559edae752f">IsFinished</a>() )</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordflow">return</span> m_status;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <a class="code" href="tmapi__dummy_8h.html#aec1bea702cd5a15ce0605b5efbfeb88b">tmZone</a>( TELEMETRY_LEVEL0, TMZF_NONE, <span class="stringliteral">&quot;%s %s %d&quot;</span>, __FUNCTION__, <a class="code" href="class_c_job.html#ad1f68d8ff719bd713b382fd0b2a43590">Describe</a>(), m_status );</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <a class="code" href="threadtools_8h.html#a98cd01277fb34cc1727571bed339d9a4">AUTO_LOCK</a>( m_mutex );</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="class_c_ref_counted1.html#ad313926df23bf7d5163cca9addc4fe45">AddRef</a>();</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> result;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">switch</span> ( m_status )</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a92e09aa9ba0a2acedba1de86916bccfb">JOB_STATUS_UNSERVICED</a>:</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84aa4dbdf81bd456cab3707bba1d4122209">JOB_STATUS_PENDING</a>:</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <span class="comment">// Service it</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            m_status = <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84ab0a033d526ecc47379d5d8cd6e772210">JOB_STATUS_INPROGRESS</a>;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            result = m_status = DoExecute();</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            DoCleanup();</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            m_CompleteEvent.<a class="code" href="class_c_thread_event.html#a0e31c2cdc8b9f7f2336df4d7d5ec6128">Set</a>();</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        }</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84ab0a033d526ecc47379d5d8cd6e772210">JOB_STATUS_INPROGRESS</a>:</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <a class="code" href="dbg_8h.html#a6460c166d367d9b2da35493f9f21f8ab">AssertMsg</a>(0, <span class="stringliteral">&quot;Mutex Should have protected use while processing&quot;</span>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="comment">// fall through...</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2">JOB_OK</a>:</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a9a5bf31f62fc158d7e2222b7c1b10126">JOB_STATUS_ABORTED</a>:</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        result = m_status;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <a class="code" href="dbg_8h.html#a6460c166d367d9b2da35493f9f21f8ab">AssertMsg</a>( m_status &lt; <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2">JOB_OK</a>, <span class="stringliteral">&quot;Unknown job state&quot;</span>);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        result = m_status;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    }</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <a class="code" href="class_c_ref_counted1.html#a3196e6e34288bb17fdd40b0e0afd860d">Release</a>();</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"><a class="line" href="class_c_job.html#ac23f06a647e349eeb213eaa58b47faf2"> 1281</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_job.html#ac23f06a647e349eeb213eaa58b47faf2">CJob::TryExecute</a>()</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;{</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="tmapi__dummy_8h.html#aec1bea702cd5a15ce0605b5efbfeb88b">tmZone</a>( TELEMETRY_LEVEL0, TMZF_NONE, <span class="stringliteral">&quot;%s %s %d&quot;</span>, __FUNCTION__, <a class="code" href="class_c_job.html#ad1f68d8ff719bd713b382fd0b2a43590">Describe</a>(), m_status );</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">// TryLock() would only fail if another thread has entered</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="comment">// Execute() or Abort()</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="class_c_job.html#a3369ccd7e945b07663f8f559edae752f">IsFinished</a>() &amp;&amp; <a class="code" href="class_c_job.html#a76e715f51f935c8aa969c22031af99f9">TryLock</a>() )</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    {</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="comment">// ...service the request</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <a class="code" href="class_c_job.html#a867999296019786bbb2b8f7b2fcd4abe">Execute</a>();</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <a class="code" href="class_c_job.html#acca9286be73e0ab2b8a96222eb3af58f">Unlock</a>();</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">return</span> m_status;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;}</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"><a class="line" href="class_c_job.html#a2ca884d6865bcc9db34df36a81405327"> 1298</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> <a class="code" href="class_c_job.html#a2ca884d6865bcc9db34df36a81405327">CJob::Abort</a>( <span class="keywordtype">bool</span> bDiscard )</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;{</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="class_c_job.html#a3369ccd7e945b07663f8f559edae752f">IsFinished</a>() )</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    {</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <span class="keywordflow">return</span> m_status;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    }</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="tmapi__dummy_8h.html#aec1bea702cd5a15ce0605b5efbfeb88b">tmZone</a>( TELEMETRY_LEVEL0, TMZF_NONE, <span class="stringliteral">&quot;%s %s %d&quot;</span>, __FUNCTION__, <a class="code" href="class_c_job.html#ad1f68d8ff719bd713b382fd0b2a43590">Describe</a>(), m_status );</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <a class="code" href="threadtools_8h.html#a98cd01277fb34cc1727571bed339d9a4">AUTO_LOCK</a>( m_mutex );</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <a class="code" href="class_c_ref_counted1.html#ad313926df23bf7d5163cca9addc4fe45">AddRef</a>();</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <a class="code" href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a> result;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">switch</span> ( m_status )</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    {</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a92e09aa9ba0a2acedba1de86916bccfb">JOB_STATUS_UNSERVICED</a>:</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84aa4dbdf81bd456cab3707bba1d4122209">JOB_STATUS_PENDING</a>:</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        {</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <a class="code" href="tmapi__dummy_8h.html#aec1bea702cd5a15ce0605b5efbfeb88b">tmZone</a>( TELEMETRY_LEVEL0, TMZF_NONE, <span class="stringliteral">&quot;CJob::DoAbort&quot;</span> );</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            result = m_status = DoAbort( bDiscard );</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <span class="keywordflow">if</span> ( bDiscard )</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                DoCleanup();</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            m_CompleteEvent.<a class="code" href="class_c_thread_event.html#a0e31c2cdc8b9f7f2336df4d7d5ec6128">Set</a>();</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a9a5bf31f62fc158d7e2222b7c1b10126">JOB_STATUS_ABORTED</a>:</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84ab0a033d526ecc47379d5d8cd6e772210">JOB_STATUS_INPROGRESS</a>:</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2">JOB_OK</a>:</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        result = m_status;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <a class="code" href="dbg_8h.html#a6460c166d367d9b2da35493f9f21f8ab">AssertMsg</a>( m_status &lt; <a class="code" href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2">JOB_OK</a>, <span class="stringliteral">&quot;Unknown job state&quot;</span>);</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        result = m_status;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    }</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <a class="code" href="class_c_ref_counted1.html#a3196e6e34288bb17fdd40b0e0afd860d">Release</a>();</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;}</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="preprocessor">#endif // JOBTHREAD_H</span></div><div class="ttc" id="jobthread_8h_html_a48e720a8999d2628017a0b7337b53102"><div class="ttname"><a href="jobthread_8h.html#a48e720a8999d2628017a0b7337b53102">JobFilter_t</a></div><div class="ttdeci">bool(* JobFilter_t)(CJob *)</div><div class="ttdef"><b>Definition:</b> jobthread.h:136</div></div>
<div class="ttc" id="class_c_job_html_a9c7765a0f7b30e2b5fc7ece5a4d9f79c"><div class="ttname"><a href="class_c_job.html#a9c7765a0f7b30e2b5fc7ece5a4d9f79c">CJob::GetStatus</a></div><div class="ttdeci">JobStatus_t GetStatus() const</div><div class="ttdef"><b>Definition:</b> jobthread.h:478</div></div>
<div class="ttc" id="glfuncs_8h_html_ac86d871be14fc81b82317273a0137feb"><div class="ttname"><a href="glfuncs_8h.html#ac86d871be14fc81b82317273a0137feb">true</a></div><div class="ttdeci">true</div><div class="ttdef"><b>Definition:</b> glfuncs.h:27</div></div>
<div class="ttc" id="jobthread_8h_html_a19737a101dfe32ead3905805c74b3d8a"><div class="ttname"><a href="jobthread_8h.html#a19737a101dfe32ead3905805c74b3d8a">DEFINE_MEMBER_ADD_CALL</a></div><div class="ttdeci">#define DEFINE_MEMBER_ADD_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:248</div></div>
<div class="ttc" id="jobthread_8h_html_a1dc9a20475762831c4861c92083db54d"><div class="ttname"><a href="jobthread_8h.html#a1dc9a20475762831c4861c92083db54d">TP_MAX_POOL_THREADS</a></div><div class="ttdeci">#define TP_MAX_POOL_THREADS</div><div class="ttdef"><b>Definition:</b> jobthread.h:98</div></div>
<div class="ttc" id="class_c_parallel_loop_processor_html"><div class="ttname"><a href="class_c_parallel_loop_processor.html">CParallelLoopProcessor</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:980</div></div>
<div class="ttc" id="class_c_job_html_a64fdf79076779fa424b7d252936011bd"><div class="ttname"><a href="class_c_job.html#a64fdf79076779fa424b7d252936011bd">CJob::CanExecute</a></div><div class="ttdeci">bool CanExecute() const</div><div class="ttdef"><b>Definition:</b> jobthread.h:476</div></div>
<div class="ttc" id="class_c_member_func_job_item_processor_html"><div class="ttname"><a href="class_c_member_func_job_item_processor.html">CMemberFuncJobItemProcessor</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:827</div></div>
<div class="ttc" id="jobthread_8h_html_a95b44679ac39b463ea872c93e28fc251"><div class="ttname"><a href="jobthread_8h.html#a95b44679ac39b463ea872c93e28fc251">ThreadExecuteSolo</a></div><div class="ttdeci">ThreadHandle_t ThreadExecuteSolo(CJob *pJob)</div><div class="ttdef"><b>Definition:</b> jobthread.h:1170</div></div>
<div class="ttc" id="class_c_ref_ptr_html"><div class="ttname"><a href="class_c_ref_ptr.html">CRefPtr&lt; CFunctor &gt;</a></div></div>
<div class="ttc" id="class_c_thread_event_html_a0e31c2cdc8b9f7f2336df4d7d5ec6128"><div class="ttname"><a href="class_c_thread_event.html#a0e31c2cdc8b9f7f2336df4d7d5ec6128">CThreadEvent::Set</a></div><div class="ttdeci">bool Set()</div></div>
<div class="ttc" id="class_c_job_html_a1169c3014fd3805122d71582060a063f"><div class="ttname"><a href="class_c_job.html#a1169c3014fd3805122d71582060a063f">CJob::ExecuteAndRelease</a></div><div class="ttdeci">JobStatus_t ExecuteAndRelease()</div><div class="ttdef"><b>Definition:</b> jobthread.h:504</div></div>
<div class="ttc" id="glfuncs_8h_html_aa6c93bd4221a61daf80570d28f06267c"><div class="ttname"><a href="glfuncs_8h.html#aa6c93bd4221a61daf80570d28f06267c">flags</a></div><div class="ttdeci">GLenum a GLhandleARB GLhandleARB b GLhandleARB GLuint const GLcharARB c GLenum GLuint b GLclampf GLclampf GLclampf GLclampf d GLenum GLenum b GLbitfield a GLclampd a GLenum const GLdouble b GLhandleARB a GLenum GLint GLenum GLsizei GLsizei GLsizei GLint GLsizei const GLvoid i GLenum a GLhandleARB a GLsizei const GLuint b GLsizei const GLuint b GLboolean a GLhandleARB GLhandleARB b GLuint a GLenum a GLenum GLuint GLuint GLsizei GLenum const GLvoid f GLenum a GLsizei GLuint b GLsizei GLuint b GLenum GLboolean b GLenum GLdouble b GLhandleARB GLsizei GLsizei GLcharARB d GLhandleARB GLenum GLint c const GLubyte GLenum a GLhandleARB const GLcharARB b GLuint a GLvoid GLenum GLenum b GLenum GLint b GLfloat GLfloat b GLenum GLenum GLsizei const GLvoid d GLenum a GLhandleARB GLsizei const GLcharARB const GLint d GLuint a GLfloat GLfloat b GLenum GLint GLint GLsizei GLsizei GLsizei GLint GLenum GLenum const GLvoid j GLenum GLenum GLint c GLint GLfloat b GLint GLint b GLenum a GLfloat GLfloat GLfloat c GLint GLint GLsizei GLsizei d GLenum a GLint GLenum GLsizei const GLvoid d GLenum GLuint GLsizei const GLfloat d GLenum GLenum GLenum GLenum d GLenum GLint GLenum GLint d GLenum GLuint b GLenum a GLenum GLenum GLenum GLuint d GLenum GLenum GLenum GLuint GLint GLint f GLsizei GLuint b GLint GLint GLint GLint GLint GLint GLint GLint GLbitfield GLenum j GLuint a GLuint a GLsizei GLuint b GLuint GLenum b GLsizei const GLuint b GLuint GLboolean GLboolean GLboolean GLboolean e GLenum GLuint b GLuint GLint GLuint c GLenum GLenum b GLenum GLintptr GLsizeiptr c GLenum GLintptr GLsizeiptr c GLenum GLuint b GLuint GLenum GLint c GLenum GLsizei void c GLenum GLuint b GLenum a GLenum GLenum GLenum GLuint d GLenum GLenum GLenum GLuint GLint GLint f GLsizei GLuint b GLint GLint GLint GLint GLint GLint GLint GLint GLbitfield GLenum j GLsizei const void b GLenum GLenum GLenum GLsizei const GLuint GLboolean f GLuint GLuint b GLuint GLuint b GLuint GLenum GLfloat c GLuint texture GLuint64 handle GLint GLuint64 value GLuint GLint GLuint64 value GLuint64 handle GLsizei const GLuint ids GLenum target GLuint GLenum GLint params GLenum GLenum GLintptr GLintptr GLsizeiptr size GLsizei GLuint arrays GLbitfield a GLenum GLsizeiptr const void GLbitfield flags</div><div class="ttdef"><b>Definition:</b> glfuncs.h:270</div></div>
<div class="ttc" id="jobthread_8h_html_a46a47af036476ee457867aa69de2c893"><div class="ttname"><a href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893">JobFlags_t</a></div><div class="ttdeci">JobFlags_t</div><div class="ttdef"><b>Definition:</b> jobthread.h:83</div></div>
<div class="ttc" id="jobthread_8h_html_a800d00ea312fa5ffb4fe14bbfd197aa4"><div class="ttname"><a href="jobthread_8h.html#a800d00ea312fa5ffb4fe14bbfd197aa4">DEFINE_CONST_MEMBER_QUEUE_CALL</a></div><div class="ttdeci">#define DEFINE_CONST_MEMBER_QUEUE_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:350</div></div>
<div class="ttc" id="threadtools_8h_html_aa9b869e6b785afadc2a1aca94b4c13e7"><div class="ttname"><a href="threadtools_8h.html#aa9b869e6b785afadc2a1aca94b4c13e7">ThreadSetDebugName</a></div><div class="ttdeci">PLATFORM_INTERFACE void ThreadSetDebugName(ThreadId_t id, const char *pszName)</div></div>
<div class="ttc" id="class_c_ref_counted1_html"><div class="ttname"><a href="class_c_ref_counted1.html">CRefCounted1</a></div><div class="ttdef"><b>Definition:</b> refcount.h:324</div></div>
<div class="ttc" id="class_c_parallel_processor_html_a5ba699cb745eeac0e5e1812d3ab465ff"><div class="ttname"><a href="class_c_parallel_processor.html#a5ba699cb745eeac0e5e1812d3ab465ff">CParallelProcessor::CParallelProcessor</a></div><div class="ttdeci">CParallelProcessor(const char *pszDescription)</div><div class="ttdef"><b>Definition:</b> jobthread.h:853</div></div>
<div class="ttc" id="jobthread_8h_html_a16b0d8bee8de10777d74fb7f85cb6a01affd1b463a93c925b4b47082fc11dd881"><div class="ttname"><a href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01affd1b463a93c925b4b47082fc11dd881">TPM_RUNFUNCTOR</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:145</div></div>
<div class="ttc" id="jobthread_8h_html_ad7c34aef46c8e539586d06c20cce559ca1e983dfcd13fad25a5267e047cd2037e"><div class="ttname"><a href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559ca1e983dfcd13fad25a5267e047cd2037e">JP_HIGH</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:95</div></div>
<div class="ttc" id="jobthread_8h_html_acd24ca0dd5d08d03eacdf9ceb03be225"><div class="ttname"><a href="jobthread_8h.html#acd24ca0dd5d08d03eacdf9ceb03be225">DEFINE_CONST_MEMBER_ADD_CALL</a></div><div class="ttdeci">#define DEFINE_CONST_MEMBER_ADD_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:268</div></div>
<div class="ttc" id="class_c_member_func_job_item_processor_html_a17210c4a62210663a26787226a25e522"><div class="ttname"><a href="class_c_member_func_job_item_processor.html#a17210c4a62210663a26787226a25e522">CMemberFuncJobItemProcessor::m_pfnBegin</a></div><div class="ttdeci">void(FUNCTION_CLASS::* m_pfnBegin)()</div><div class="ttdef"><b>Definition:</b> jobthread.h:845</div></div>
<div class="ttc" id="basetypes_8h_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="basetypes_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdef"><b>Definition:</b> basetypes.h:87</div></div>
<div class="ttc" id="jobthread_8h_html_a8ec06279af0ba66841b60764dfc6c17a"><div class="ttname"><a href="jobthread_8h.html#a8ec06279af0ba66841b60764dfc6c17a">DEFINE_NONMEMBER_ADD_CALL</a></div><div class="ttdeci">#define DEFINE_NONMEMBER_ADD_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:228</div></div>
<div class="ttc" id="jobthread_8h_html_aeaee9ab399d8b47e622d9c4073273158"><div class="ttname"><a href="jobthread_8h.html#aeaee9ab399d8b47e622d9c4073273158">ThreadExecute</a></div><div class="ttdeci">#define ThreadExecute</div><div class="ttdef"><b>Definition:</b> jobthread.h:699</div></div>
<div class="ttc" id="jobthread_8h_html_a7d461eee6e1498ee1694ab4d36b8c7b3"><div class="ttname"><a href="jobthread_8h.html#a7d461eee6e1498ee1694ab4d36b8c7b3">YieldWait</a></div><div class="ttdeci">virtual int YieldWait(CThreadEvent **pEvents, int nEvents, bool bWaitAll=true, unsigned timeout=TT_INFINITE)=0</div></div>
<div class="ttc" id="refcount_8h_html"><div class="ttname"><a href="refcount_8h.html">refcount.h</a></div></div>
<div class="ttc" id="class_c_job_item_processor_html"><div class="ttname"><a href="class_c_job_item_processor.html">CJobItemProcessor</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:795</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_a3aef79d158390257d7177203f7a6d52d"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#a3aef79d158390257d7177203f7a6d52d">ThreadPoolStartParams_t::bUseAffinityTable</a></div><div class="ttdeci">bool bUseAffinityTable</div><div class="ttdef"><b>Definition:</b> jobthread.h:126</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_a1bbfa55101d03a9364f83d2a9fb813e7"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#a1bbfa55101d03a9364f83d2a9fb813e7">ThreadPoolStartParams_t::nThreadsMax</a></div><div class="ttdeci">int nThreadsMax</div><div class="ttdef"><b>Definition:</b> jobthread.h:119</div></div>
<div class="ttc" id="class_c_job_item_processor_html_ab4eba4fc446b3cf508dc634fe5d4e484"><div class="ttname"><a href="class_c_job_item_processor.html#ab4eba4fc446b3cf508dc634fe5d4e484">CJobItemProcessor::End</a></div><div class="ttdeci">void End()</div><div class="ttdef"><b>Definition:</b> jobthread.h:801</div></div>
<div class="ttc" id="class_c_func_job_item_processor_html_a91462b1a0fb37a0a71a2b249dccfeafb"><div class="ttname"><a href="class_c_func_job_item_processor.html#a91462b1a0fb37a0a71a2b249dccfeafb">CFuncJobItemProcessor::Process</a></div><div class="ttdeci">void Process(T &amp;item)</div><div class="ttdef"><b>Definition:</b> jobthread.h:817</div></div>
<div class="ttc" id="class_c_interlocked_int_t_html"><div class="ttname"><a href="class_c_interlocked_int_t.html">CInterlockedIntT&lt; int &gt;</a></div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_a52a596a865ac21a088a1ebc59b9598b4"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#a52a596a865ac21a088a1ebc59b9598b4">ThreadPoolStartParams_t::iAffinityTable</a></div><div class="ttdeci">int iAffinityTable[TP_MAX_POOL_THREADS]</div><div class="ttdef"><b>Definition:</b> jobthread.h:123</div></div>
<div class="ttc" id="jobthread_8h_html_a46a47af036476ee457867aa69de2c893a638c913fd80c13d4977a5aebfd085ccd"><div class="ttname"><a href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893a638c913fd80c13d4977a5aebfd085ccd">JF_QUEUE</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:88</div></div>
<div class="ttc" id="steamtypes_8h_html_a4f44b79851297d71fd90a3c87786c725"><div class="ttname"><a href="steamtypes_8h.html#a4f44b79851297d71fd90a3c87786c725">uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdef"><b>Definition:</b> steamtypes.h:64</div></div>
<div class="ttc" id="class_c_ref_counted1_html_ad313926df23bf7d5163cca9addc4fe45"><div class="ttname"><a href="class_c_ref_counted1.html#ad313926df23bf7d5163cca9addc4fe45">CRefCounted1&lt; IRefCounted, CRefCountServiceMT &gt;::AddRef</a></div><div class="ttdeci">int AddRef()</div><div class="ttdef"><b>Definition:</b> refcount.h:329</div></div>
<div class="ttc" id="class_c_job_html_a1d15475847fcea0551d5c8374bf57b81"><div class="ttname"><a href="class_c_job.html#a1d15475847fcea0551d5c8374bf57b81">CJob::AccessEvent</a></div><div class="ttdeci">CThreadEvent * AccessEvent()</div><div class="ttdef"><b>Definition:</b> jobthread.h:497</div></div>
<div class="ttc" id="threadtools_8h_html_a391787a2f33dde1ece5549c1565033b3"><div class="ttname"><a href="threadtools_8h.html#a391787a2f33dde1ece5549c1565033b3">ThreadPause</a></div><div class="ttdeci">void ThreadPause()</div><div class="ttdef"><b>Definition:</b> threadtools.h:105</div></div>
<div class="ttc" id="class_c_parallel_processor_html_a4eabe08c976bfe8e63f95e4b5952786b"><div class="ttname"><a href="class_c_parallel_processor.html#a4eabe08c976bfe8e63f95e4b5952786b">CParallelProcessor::m_ItemProcessor</a></div><div class="ttdeci">ITEM_PROCESSOR_TYPE m_ItemProcessor</div><div class="ttdef"><b>Definition:</b> jobthread.h:918</div></div>
<div class="ttc" id="jobthread_8h_html_a3025f8802dabb05faf3b7223726a7686"><div class="ttname"><a href="jobthread_8h.html#a3025f8802dabb05faf3b7223726a7686">g_pThreadPool</a></div><div class="ttdeci">JOB_INTERFACE IThreadPool * g_pThreadPool</div><div class="ttdef"><b>Definition:</b> jobthread.h:431</div></div>
<div class="ttc" id="jobthread_8h_html_a3f474596bb1e4a9f9788b22b6e9a5255"><div class="ttname"><a href="jobthread_8h.html#a3f474596bb1e4a9f9788b22b6e9a5255">ChangePriority</a></div><div class="ttdeci">virtual void ChangePriority(CJob *p, JobPriority_t priority)=0</div></div>
<div class="ttc" id="class_c_parallel_processor_html_abfd635636cc71b0fbf4b463d1a4da63c"><div class="ttname"><a href="class_c_parallel_processor.html#abfd635636cc71b0fbf4b463d1a4da63c">CParallelProcessor::Run</a></div><div class="ttdeci">void Run(ITEM_TYPE *pItems, unsigned nItems, int nMaxParallel=INT_MAX, IThreadPool *pThreadPool=NULL)</div><div class="ttdef"><b>Definition:</b> jobthread.h:859</div></div>
<div class="ttc" id="class_c_job_html_a9ce71dff960cc92565203ea1831b097b"><div class="ttname"><a href="class_c_job.html#a9ce71dff960cc92565203ea1831b097b">CJob::Executed</a></div><div class="ttdeci">bool Executed() const</div><div class="ttdef"><b>Definition:</b> jobthread.h:475</div></div>
<div class="ttc" id="class_c_parallel_processor_base_html_a85e74f30694c28fc1cdd2aee9403efe9"><div class="ttname"><a href="class_c_parallel_processor_base.html#a85e74f30694c28fc1cdd2aee9403efe9">CParallelProcessorBase::Run</a></div><div class="ttdeci">void Run(int nMaxParallel=INT_MAX, int threadOverride=-1)</div><div class="ttdef"><b>Definition:</b> jobthread.h:1089</div></div>
<div class="ttc" id="jobthread_8h_html_ad7c34aef46c8e539586d06c20cce559c"><div class="ttname"><a href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559c">JobPriority_t</a></div><div class="ttdeci">JobPriority_t</div><div class="ttdef"><b>Definition:</b> jobthread.h:91</div></div>
<div class="ttc" id="jobthread_8h_html_ad78a4a7ee01b6605dc60ca2dda8e39f1"><div class="ttname"><a href="jobthread_8h.html#ad78a4a7ee01b6605dc60ca2dda8e39f1">JOB_INTERFACE</a></div><div class="ttdeci">#define JOB_INTERFACE</div><div class="ttdef"><b>Definition:</b> jobthread.h:53</div></div>
<div class="ttc" id="class_c_job_set_html_a6b91d7dd26bed26f3fc29eb2a9325143"><div class="ttname"><a href="class_c_job_set.html#a6b91d7dd26bed26f3fc29eb2a9325143">CJobSet::Execute</a></div><div class="ttdeci">void Execute(bool bRelease=true)</div><div class="ttdef"><b>Definition:</b> jobthread.h:625</div></div>
<div class="ttc" id="class_c_member_func_job_item_processor_html_a2f9ef97d1be7c65ec9a0278a2d5a6236"><div class="ttname"><a href="class_c_member_func_job_item_processor.html#a2f9ef97d1be7c65ec9a0278a2d5a6236">CMemberFuncJobItemProcessor::m_pfnEnd</a></div><div class="ttdeci">void(FUNCTION_CLASS::* m_pfnEnd)()</div><div class="ttdef"><b>Definition:</b> jobthread.h:846</div></div>
<div class="ttc" id="basetypes_8h_html_afa0d335ed0b412aeae9eabcbafc7fc23a727fcb8dc827b0fe0228e55142411d32"><div class="ttname"><a href="basetypes_8h.html#afa0d335ed0b412aeae9eabcbafc7fc23a727fcb8dc827b0fe0228e55142411d32">TRS_TRUE</a></div><div class="ttdef"><b>Definition:</b> basetypes.h:153</div></div>
<div class="ttc" id="tmapi__dummy_8h_html_aec1bea702cd5a15ce0605b5efbfeb88b"><div class="ttname"><a href="tmapi__dummy_8h.html#aec1bea702cd5a15ce0605b5efbfeb88b">tmZone</a></div><div class="ttdeci">#define tmZone(...)</div><div class="ttdef"><b>Definition:</b> tmapi_dummy.h:31</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_aab6ce0fc57b4ab1a1a358ed3734d530e"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#aab6ce0fc57b4ab1a1a358ed3734d530e">ThreadPoolStartParams_t::iThreadPriority</a></div><div class="ttdeci">int iThreadPriority</div><div class="ttdef"><b>Definition:</b> jobthread.h:122</div></div>
<div class="ttc" id="class_c_job_html_acca9286be73e0ab2b8a96222eb3af58f"><div class="ttname"><a href="class_c_job.html#acca9286be73e0ab2b8a96222eb3af58f">CJob::Unlock</a></div><div class="ttdeci">void Unlock()</div><div class="ttdef"><b>Definition:</b> jobthread.h:490</div></div>
<div class="ttc" id="class_c_job_html_a8fc4f700218de57f1611cb5ed7f5bebf"><div class="ttname"><a href="class_c_job.html#a8fc4f700218de57f1611cb5ed7f5bebf">CJob::SetPriority</a></div><div class="ttdeci">void SetPriority(JobPriority_t priority)</div><div class="ttdef"><b>Definition:</b> jobthread.h:458</div></div>
<div class="ttc" id="class_c_functor_job_html_a2fbcf94ed5be3275356d86afebb63ff1"><div class="ttname"><a href="class_c_functor_job.html#a2fbcf94ed5be3275356d86afebb63ff1">CFunctorJob::DoExecute</a></div><div class="ttdeci">virtual JobStatus_t DoExecute()</div><div class="ttdef"><b>Definition:</b> jobthread.h:568</div></div>
<div class="ttc" id="jobthread_8h_html_a79d33c807024eff0f0f61bc66799cdad"><div class="ttname"><a href="jobthread_8h.html#a79d33c807024eff0f0f61bc66799cdad">ThreadExecuteSoloImpl</a></div><div class="ttdeci">ThreadHandle_t ThreadExecuteSoloImpl(CFunctor *pFunctor, const char *pszName=NULL)</div><div class="ttdef"><b>Definition:</b> jobthread.h:1158</div></div>
<div class="ttc" id="class_c_job_html"><div class="ttname"><a href="class_c_job.html">CJob</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:440</div></div>
<div class="ttc" id="class_c_job_html_a867999296019786bbb2b8f7b2fcd4abe"><div class="ttname"><a href="class_c_job.html#a867999296019786bbb2b8f7b2fcd4abe">CJob::Execute</a></div><div class="ttdeci">JobStatus_t Execute()</div><div class="ttdef"><b>Definition:</b> jobthread.h:1232</div></div>
<div class="ttc" id="class_c_member_func_job_item_processor_html_a8c21a2448201e9be1820083926a6ef36"><div class="ttname"><a href="class_c_member_func_job_item_processor.html#a8c21a2448201e9be1820083926a6ef36">CMemberFuncJobItemProcessor::Process</a></div><div class="ttdeci">void Process(T &amp;item)</div><div class="ttdef"><b>Definition:</b> jobthread.h:839</div></div>
<div class="ttc" id="vprof__telemetry_8h_html"><div class="ttname"><a href="vprof__telemetry_8h.html">vprof_telemetry.h</a></div></div>
<div class="ttc" id="class_c_parallel_loop_processor_html_a8e6a3c9415ece3af392fb231c6370c84"><div class="ttname"><a href="class_c_parallel_loop_processor.html#a8e6a3c9415ece3af392fb231c6370c84">CParallelLoopProcessor::CParallelLoopProcessor</a></div><div class="ttdeci">CParallelLoopProcessor(const char *pszDescription)</div><div class="ttdef"><b>Definition:</b> jobthread.h:983</div></div>
<div class="ttc" id="jobthread_8h_html_a2b61118805c66c1b425c0acb52e99c0a"><div class="ttname"><a href="jobthread_8h.html#a2b61118805c66c1b425c0acb52e99c0a">DestroyThreadPool</a></div><div class="ttdeci">JOB_INTERFACE void DestroyThreadPool(IThreadPool *pPool)</div></div>
<div class="ttc" id="threadtools_8h_html_a5092325165a2de177d2d6a6d7c3aa3e7"><div class="ttname"><a href="threadtools_8h.html#a5092325165a2de177d2d6a6d7c3aa3e7">CreateSimpleThread</a></div><div class="ttdeci">PLATFORM_OVERLOAD ThreadHandle_t CreateSimpleThread(ThreadFunc_t, void *pParam, ThreadId_t *pID, unsigned stackSize=0)</div></div>
<div class="ttc" id="utllinkedlist_8h_html"><div class="ttname"><a href="utllinkedlist_8h.html">utllinkedlist.h</a></div></div>
<div class="ttc" id="class_c_utl_vector_html_a72771ac1761e735b01ca05e223a1eaa9"><div class="ttname"><a href="class_c_utl_vector.html#a72771ac1761e735b01ca05e223a1eaa9">CUtlVector::AddMultipleToTail</a></div><div class="ttdeci">int AddMultipleToTail(int num, const T *pToCopy=NULL)</div><div class="ttdef"><b>Definition:</b> utlvector.h:932</div></div>
<div class="ttc" id="jobthread_8h_html_ad7c34aef46c8e539586d06c20cce559ca06e3229bc79bbc2011b49366b1dcfe72"><div class="ttname"><a href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559ca06e3229bc79bbc2011b49366b1dcfe72">JP_LOW</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:93</div></div>
<div class="ttc" id="jobthread_8h_html_a1c7dd0bc184f5a80f15a47f1564d76b7"><div class="ttname"><a href="jobthread_8h.html#a1c7dd0bc184f5a80f15a47f1564d76b7">GetJobCount</a></div><div class="ttdeci">virtual unsigned GetJobCount()=0</div></div>
<div class="ttc" id="isteamhtmlsurface_8h_html_ad7a5adb15ac603220f56da3e41a6e506"><div class="ttname"><a href="isteamhtmlsurface_8h.html#ad7a5adb15ac603220f56da3e41a6e506">bool</a></div><div class="ttdeci">unBrowserHandle unWide unUpdateX unUpdateWide unScrollX flPageScale unBrowserHandle const char pchTarget bool</div><div class="ttdef"><b>Definition:</b> isteamhtmlsurface.h:239</div></div>
<div class="ttc" id="glfuncs_8h_html_aa7a90bbb7984c3b9323618418fde71f7"><div class="ttname"><a href="glfuncs_8h.html#aa7a90bbb7984c3b9323618418fde71f7">void</a></div><div class="ttdeci">GLenum a GLhandleARB GLhandleARB b GLhandleARB GLuint const GLcharARB c GLenum GLuint b GLclampf GLclampf GLclampf GLclampf d GLenum GLenum b GLbitfield a GLclampd a GLenum const GLdouble b GLhandleARB a GLenum GLint GLenum GLsizei GLsizei GLsizei GLint GLsizei const GLvoid i GLenum a GLhandleARB a GLsizei const GLuint b GLsizei const GLuint b GLboolean a GLhandleARB GLhandleARB b GLuint a GLenum a GLenum GLuint GLuint GLsizei GLenum const GLvoid f GLenum a void</div><div class="ttdef"><b>Definition:</b> glfuncs.h:71</div></div>
<div class="ttc" id="jobthread_8h_html_ad15fe84b7ee4c8d8851d3df362c36883"><div class="ttname"><a href="jobthread_8h.html#ad15fe84b7ee4c8d8851d3df362c36883">ResumeExecution</a></div><div class="ttdeci">virtual int ResumeExecution()=0</div></div>
<div class="ttc" id="class_c_func_job_item_processor_html_a4802f8c4bface092b1273d6072663ef0"><div class="ttname"><a href="class_c_func_job_item_processor.html#a4802f8c4bface092b1273d6072663ef0">CFuncJobItemProcessor::Init</a></div><div class="ttdeci">void Init(void(*pfnProcess)(T &amp;), void(*pfnBegin)()=NULL, void(*pfnEnd)()=NULL)</div><div class="ttdef"><b>Definition:</b> jobthread.h:808</div></div>
<div class="ttc" id="strtools_8h_html_aa202e650fe16914f8c0446247bffd9e8"><div class="ttname"><a href="strtools_8h.html#aa202e650fe16914f8c0446247bffd9e8">Q_strncpy</a></div><div class="ttdeci">#define Q_strncpy</div><div class="ttdef"><b>Definition:</b> strtools.h:1037</div></div>
<div class="ttc" id="jobthread_8h_html_a28f6723ba6984f6c54042efe27688c86"><div class="ttname"><a href="jobthread_8h.html#a28f6723ba6984f6c54042efe27688c86">ExecuteAll</a></div><div class="ttdeci">int ExecuteAll(JobFilter_t pfnFilter=NULL)</div><div class="ttdef"><b>Definition:</b> jobthread.h:209</div></div>
<div class="ttc" id="class_c_utl_vector_html_a5d631c52d330cdfe44e4ad32cd7a6e3b"><div class="ttname"><a href="class_c_utl_vector.html#a5d631c52d330cdfe44e4ad32cd7a6e3b">CUtlVector::RemoveAll</a></div><div class="ttdeci">void RemoveAll()</div><div class="ttdef"><b>Definition:</b> utlvector.h:1147</div></div>
<div class="ttc" id="jobthread_8h_html_a6eb5bd3051a2d535d4d60209e9dfe31f"><div class="ttname"><a href="jobthread_8h.html#a6eb5bd3051a2d535d4d60209e9dfe31f">DEFINE_REF_COUNTING_MEMBER_QUEUE_CALL</a></div><div class="ttdeci">#define DEFINE_REF_COUNTING_MEMBER_QUEUE_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:361</div></div>
<div class="ttc" id="functors_8h_html"><div class="ttname"><a href="functors_8h.html">functors.h</a></div></div>
<div class="ttc" id="class_c_parallel_processor_base_html"><div class="ttname"><a href="class_c_parallel_processor_base.html">CParallelProcessorBase</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:1071</div></div>
<div class="ttc" id="class_c_job_html_adb55846202ff425646946332b0ee05de"><div class="ttname"><a href="class_c_job.html#adb55846202ff425646946332b0ee05de">CJob::GetPriority</a></div><div class="ttdeci">JobPriority_t GetPriority() const</div><div class="ttdef"><b>Definition:</b> jobthread.h:459</div></div>
<div class="ttc" id="threadtools_8h_html_a8125c9b7ab2649b75d9dee1bc04a5326"><div class="ttname"><a href="threadtools_8h.html#a8125c9b7ab2649b75d9dee1bc04a5326">ThreadId_t</a></div><div class="ttdeci">unsigned long ThreadId_t</div><div class="ttdef"><b>Definition:</b> threadtools.h:68</div></div>
<div class="ttc" id="class_c_job_set_html_a1248eafd7ab5b3e92491b0a9b6836b5d"><div class="ttname"><a href="class_c_job_set.html#a1248eafd7ab5b3e92491b0a9b6836b5d">CJobSet::Abort</a></div><div class="ttdeci">void Abort(bool bRelease=true)</div><div class="ttdef"><b>Definition:</b> jobthread.h:642</div></div>
<div class="ttc" id="jobthread_8h_html_af7213d278f1a1e3c101395246756dac4"><div class="ttname"><a href="jobthread_8h.html#af7213d278f1a1e3c101395246756dac4">Yield</a></div><div class="ttdeci">virtual void Yield(unsigned timeout)=0</div></div>
<div class="ttc" id="class_c_job_html_a2ed50d7fdad6765ae2bf7ad3ef04ed16"><div class="ttname"><a href="class_c_job.html#a2ed50d7fdad6765ae2bf7ad3ef04ed16">CJob::SlamStatus</a></div><div class="ttdeci">void SlamStatus(JobStatus_t s)</div><div class="ttdef"><b>Definition:</b> jobthread.h:483</div></div>
<div class="ttc" id="jobthread_8h_html_a2135d152c0c63774bfdab359e443fba7"><div class="ttname"><a href="jobthread_8h.html#a2135d152c0c63774bfdab359e443fba7">FUNC_GENERATE_ALL</a></div><div class="ttdeci">FUNC_GENERATE_ALL(DEFINE_NONMEMBER_ADD_CALL)</div></div>
<div class="ttc" id="class_c_utl_vector_html_ab2121fe63ed0d82600f7424c19cdaf63"><div class="ttname"><a href="class_c_utl_vector.html#ab2121fe63ed0d82600f7424c19cdaf63">CUtlVector::Count</a></div><div class="ttdeci">int Count() const</div><div class="ttdef"><b>Definition:</b> utlvector.h:716</div></div>
<div class="ttc" id="jobthread_8h_html_a93743477aef204f1a24be1b5c0197e24"><div class="ttname"><a href="jobthread_8h.html#a93743477aef204f1a24be1b5c0197e24">DEFINE_MEMBER_ITER_RANGE_PARALLEL</a></div><div class="ttdeci">#define DEFINE_MEMBER_ITER_RANGE_PARALLEL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:755</div></div>
<div class="ttc" id="class_c_func_job_item_processor_html_ac08ddfa96b637624de0f3c52240e31de"><div class="ttname"><a href="class_c_func_job_item_processor.html#ac08ddfa96b637624de0f3c52240e31de">CFuncJobItemProcessor::m_pfnEnd</a></div><div class="ttdeci">void(* m_pfnEnd)()</div><div class="ttdef"><b>Definition:</b> jobthread.h:823</div></div>
<div class="ttc" id="class_c_job_set_html_a3f17d2a5b8d0a503d8d79297609e9705"><div class="ttname"><a href="class_c_job_set.html#a3f17d2a5b8d0a503d8d79297609e9705">CJobSet::operator-=</a></div><div class="ttdeci">void operator-=(CJob *pJob)</div><div class="ttdef"><b>Definition:</b> jobthread.h:620</div></div>
<div class="ttc" id="functors_8h_html_a4a69e8e3de9c540974f71fb20eb35c3a"><div class="ttname"><a href="functors_8h.html#a4a69e8e3de9c540974f71fb20eb35c3a">CFunctor</a></div><div class="ttdeci">abstract_class CFunctor</div><div class="ttdef"><b>Definition:</b> functors.h:285</div></div>
<div class="ttc" id="jobthread_8h_html_a1a782aa7ee8221d1ee846e51bb20e778"><div class="ttname"><a href="jobthread_8h.html#a1a782aa7ee8221d1ee846e51bb20e778">ExecuteHighPriorityFunctor</a></div><div class="ttdeci">virtual void ExecuteHighPriorityFunctor(CFunctor *pFunctor)=0</div></div>
<div class="ttc" id="jobthread_8h_html_a16b0d8bee8de10777d74fb7f85cb6a01a887532806c41d9028837b771fe8494bb"><div class="ttname"><a href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01a887532806c41d9028837b771fe8494bb">TPM_EXIT</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:143</div></div>
<div class="ttc" id="jobthread_8h_html_ac3172abae0b08a697ad7262b6a3be432"><div class="ttname"><a href="jobthread_8h.html#ac3172abae0b08a697ad7262b6a3be432">DEFINE_NON_MEMBER_ITER_RANGE_PARALLEL</a></div><div class="ttdeci">#define DEFINE_NON_MEMBER_ITER_RANGE_PARALLEL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:720</div></div>
<div class="ttc" id="class_c_job_html_a3369ccd7e945b07663f8f559edae752f"><div class="ttname"><a href="class_c_job.html#a3369ccd7e945b07663f8f559edae752f">CJob::IsFinished</a></div><div class="ttdeci">bool IsFinished() const</div><div class="ttdef"><b>Definition:</b> jobthread.h:477</div></div>
<div class="ttc" id="jobthread_8h_html_ae99f3594a36ac8d3165dd0223db90c2e"><div class="ttname"><a href="jobthread_8h.html#ae99f3594a36ac8d3165dd0223db90c2e">RunThreadPoolTests</a></div><div class="ttdeci">JOB_INTERFACE void RunThreadPoolTests()</div></div>
<div class="ttc" id="vstdlib_8h_html"><div class="ttname"><a href="vstdlib_8h.html">vstdlib.h</a></div></div>
<div class="ttc" id="jobthread_8h_html_a65bef4b88b367879c5b2a1383d2ea901"><div class="ttname"><a href="jobthread_8h.html#a65bef4b88b367879c5b2a1383d2ea901">Distribute</a></div><div class="ttdeci">virtual void Distribute(bool bDistribute=true, int *pAffinityTable=NULL)=0</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html"><div class="ttname"><a href="struct_thread_pool_start_params__t.html">ThreadPoolStartParams_t</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:99</div></div>
<div class="ttc" id="class_c_member_func_job_item_processor_html_a20a6e74bbf369a495c877416c6f8a9a0"><div class="ttname"><a href="class_c_member_func_job_item_processor.html#a20a6e74bbf369a495c877416c6f8a9a0">CMemberFuncJobItemProcessor::m_pObject</a></div><div class="ttdeci">OBJECT_TYPE * m_pObject</div><div class="ttdef"><b>Definition:</b> jobthread.h:843</div></div>
<div class="ttc" id="class_c_func_job_item_processor_html_aa6d69e359937781cbbc3fcc01fd3d90d"><div class="ttname"><a href="class_c_func_job_item_processor.html#aa6d69e359937781cbbc3fcc01fd3d90d">CFuncJobItemProcessor::Begin</a></div><div class="ttdeci">void Begin()</div><div class="ttdef"><b>Definition:</b> jobthread.h:816</div></div>
<div class="ttc" id="jobthread_8h_html_aee472a78893cd630b00ca3a49a4e026b"><div class="ttname"><a href="jobthread_8h.html#aee472a78893cd630b00ca3a49a4e026b">DECLARE_POINTER_HANDLE</a></div><div class="ttdeci">DECLARE_POINTER_HANDLE(ThreadPoolData_t)</div></div>
<div class="ttc" id="class_c_parallel_processor_base_html_aef158d61ffd876125dd2933de52d1ed8"><div class="ttname"><a href="class_c_parallel_processor_base.html#aef158d61ffd876125dd2933de52d1ed8">CParallelProcessorBase::ThisParallelProcessorDerived_t</a></div><div class="ttdeci">Derived ThisParallelProcessorDerived_t</div><div class="ttdef"><b>Definition:</b> jobthread.h:1075</div></div>
<div class="ttc" id="jobthread_8h_html_a3565f29ba32c92ed680597196a907634"><div class="ttname"><a href="jobthread_8h.html#a3565f29ba32c92ed680597196a907634">DEFINE_MEMBER_QUEUE_CALL</a></div><div class="ttdeci">#define DEFINE_MEMBER_QUEUE_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:339</div></div>
<div class="ttc" id="class_c_thread_mutex_html_aa3819aed8c29b55a9d82b1a48de3f2ba"><div class="ttname"><a href="class_c_thread_mutex.html#aa3819aed8c29b55a9d82b1a48de3f2ba">CThreadMutex::Unlock</a></div><div class="ttdeci">void Unlock()</div></div>
<div class="ttc" id="jobthread_8h_html_a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2"><div class="ttname"><a href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a7807cec7647ba409604979d4eb59a3c2">JOB_OK</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:74</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_ae68de40a9f3a8b04a595b635b16ca400"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#ae68de40a9f3a8b04a595b635b16ca400">ThreadPoolStartParams_t::fDistribute</a></div><div class="ttdeci">ThreeState_t fDistribute</div><div class="ttdef"><b>Definition:</b> jobthread.h:120</div></div>
<div class="ttc" id="class_c_job_html_aec18a17f2fd57ed966d1d436c1ef2d76"><div class="ttname"><a href="class_c_job.html#aec18a17f2fd57ed966d1d436c1ef2d76">CJob::SetFlags</a></div><div class="ttdeci">void SetFlags(unsigned flags)</div><div class="ttdef"><b>Definition:</b> jobthread.h:463</div></div>
<div class="ttc" id="jobthread_8h_html_ad7c34aef46c8e539586d06c20cce559caa872989cfe5f01d95f726e1752b23a86"><div class="ttname"><a href="jobthread_8h.html#ad7c34aef46c8e539586d06c20cce559caa872989cfe5f01d95f726e1752b23a86">JP_NORMAL</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:94</div></div>
<div class="ttc" id="threadtools_8h_html"><div class="ttname"><a href="threadtools_8h.html">threadtools.h</a></div></div>
<div class="ttc" id="class_c_job_set_html_a9f4e92c62897bd510927d7f7ac0c1d2c"><div class="ttname"><a href="class_c_job_set.html#a9f4e92c62897bd510927d7f7ac0c1d2c">CJobSet::operator+=</a></div><div class="ttdeci">void operator+=(CJob *pJob)</div><div class="ttdef"><b>Definition:</b> jobthread.h:615</div></div>
<div class="ttc" id="threadtools_8h_html_a98cd01277fb34cc1727571bed339d9a4"><div class="ttname"><a href="threadtools_8h.html#a98cd01277fb34cc1727571bed339d9a4">AUTO_LOCK</a></div><div class="ttdeci">#define AUTO_LOCK(mutex)</div><div class="ttdef"><b>Definition:</b> threadtools.h:900</div></div>
<div class="ttc" id="class_c_func_job_item_processor_html_ae6ca4d330686285fecb122f8615c6d55"><div class="ttname"><a href="class_c_func_job_item_processor.html#ae6ca4d330686285fecb122f8615c6d55">CFuncJobItemProcessor::End</a></div><div class="ttdeci">void End()</div><div class="ttdef"><b>Definition:</b> jobthread.h:818</div></div>
<div class="ttc" id="class_i_ref_counted_html"><div class="ttname"><a href="class_i_ref_counted.html">IRefCounted</a></div><div class="ttdef"><b>Definition:</b> refcount.h:57</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_ac0aacfc43232c70a3bcc3fbe43c6d78c"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#ac0aacfc43232c70a3bcc3fbe43c6d78c">ThreadPoolStartParams_t::nThreads</a></div><div class="ttdeci">int nThreads</div><div class="ttdef"><b>Definition:</b> jobthread.h:118</div></div>
<div class="ttc" id="jobthread_8h_html_ad29e2394c50d3cc551ccafe4b408a871"><div class="ttname"><a href="jobthread_8h.html#ad29e2394c50d3cc551ccafe4b408a871">ThreadExecuteSoloRef</a></div><div class="ttdeci">ThreadHandle_t ThreadExecuteSoloRef(const char *pszName, T1 a1, T2 a2)</div><div class="ttdef"><b>Definition:</b> jobthread.h:1197</div></div>
<div class="ttc" id="jobthread_8h_html_a856466f5476a9d20d9a7e1c4ea654a84a92e09aa9ba0a2acedba1de86916bccfb"><div class="ttname"><a href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a92e09aa9ba0a2acedba1de86916bccfb">JOB_STATUS_UNSERVICED</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:78</div></div>
<div class="ttc" id="jobthread_8h_html_a3462381a08acfb15a6e3fb2aa4a4834d"><div class="ttname"><a href="jobthread_8h.html#a3462381a08acfb15a6e3fb2aa4a4834d">Reserved1</a></div><div class="ttdeci">virtual void Reserved1()=0</div></div>
<div class="ttc" id="class_c_parallel_processor_base_html_a1e6b310b5125c734d3c6fa8f97caa3e8"><div class="ttname"><a href="class_c_parallel_processor_base.html#a1e6b310b5125c734d3c6fa8f97caa3e8">CParallelProcessorBase::SetDescription</a></div><div class="ttdeci">void SetDescription(const char *pszDescription)</div><div class="ttdef"><b>Definition:</b> jobthread.h:1083</div></div>
<div class="ttc" id="platform_8h_html_a81ca50c3427d19bbb1aae0dd73e56431"><div class="ttname"><a href="platform_8h.html#a81ca50c3427d19bbb1aae0dd73e56431">abstract_class</a></div><div class="ttdeci">#define abstract_class</div><div class="ttdef"><b>Definition:</b> platform.h:317</div></div>
<div class="ttc" id="class_c_job_html_aeb49cb5d4dbdaedbbf60a2afb6e32f78"><div class="ttname"><a href="class_c_job.html#aeb49cb5d4dbdaedbbf60a2afb6e32f78">CJob::CJob</a></div><div class="ttdeci">CJob(JobPriority_t priority=JP_NORMAL)</div><div class="ttdef"><b>Definition:</b> jobthread.h:443</div></div>
<div class="ttc" id="dbg_8h_html_a6460c166d367d9b2da35493f9f21f8ab"><div class="ttname"><a href="dbg_8h.html#a6460c166d367d9b2da35493f9f21f8ab">AssertMsg</a></div><div class="ttdeci">#define AssertMsg(_exp, _msg,...)</div><div class="ttdef"><b>Definition:</b> dbg.h:367</div></div>
<div class="ttc" id="class_c_member_func_job_item_processor_html_a7d507558819ad266d57ccb6a459f5f17"><div class="ttname"><a href="class_c_member_func_job_item_processor.html#a7d507558819ad266d57ccb6a459f5f17">CMemberFuncJobItemProcessor::m_pfnProcess</a></div><div class="ttdeci">void(FUNCTION_CLASS::* m_pfnProcess)(T &amp;)</div><div class="ttdef"><b>Definition:</b> jobthread.h:844</div></div>
<div class="ttc" id="jobthread_8h_html_a28a9dbb22fc1505827021359463407fb"><div class="ttname"><a href="jobthread_8h.html#a28a9dbb22fc1505827021359463407fb">DEFINE_REF_COUNTING_CONST_MEMBER_QUEUE_CALL</a></div><div class="ttdeci">#define DEFINE_REF_COUNTING_CONST_MEMBER_QUEUE_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:372</div></div>
<div class="ttc" id="class_c_functor_job_html_a7912c6e0b2e383bbfd300308a5de509c"><div class="ttname"><a href="class_c_functor_job.html#a7912c6e0b2e383bbfd300308a5de509c">CFunctorJob::Describe</a></div><div class="ttdeci">const char * Describe()</div><div class="ttdef"><b>Definition:</b> jobthread.h:574</div></div>
<div class="ttc" id="jobthread_8h_html_a856466f5476a9d20d9a7e1c4ea654a84aa4dbdf81bd456cab3707bba1d4122209"><div class="ttname"><a href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84aa4dbdf81bd456cab3707bba1d4122209">JOB_STATUS_PENDING</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:75</div></div>
<div class="ttc" id="class_c_job_html_ac23f06a647e349eeb213eaa58b47faf2"><div class="ttname"><a href="class_c_job.html#ac23f06a647e349eeb213eaa58b47faf2">CJob::TryExecute</a></div><div class="ttdeci">JobStatus_t TryExecute()</div><div class="ttdef"><b>Definition:</b> jobthread.h:1281</div></div>
<div class="ttc" id="class_c_thread_event_html"><div class="ttname"><a href="class_c_thread_event.html">CThreadEvent</a></div><div class="ttdef"><b>Definition:</b> threadtools.h:1029</div></div>
<div class="ttc" id="basetypes_8h_html_afa0d335ed0b412aeae9eabcbafc7fc23"><div class="ttname"><a href="basetypes_8h.html#afa0d335ed0b412aeae9eabcbafc7fc23">ThreeState_t</a></div><div class="ttdeci">ThreeState_t</div><div class="ttdef"><b>Definition:</b> basetypes.h:150</div></div>
<div class="ttc" id="class_c_thread_mutex_html"><div class="ttname"><a href="class_c_thread_mutex.html">CThreadMutex</a></div><div class="ttdef"><b>Definition:</b> threadtools.h:592</div></div>
<div class="ttc" id="jobthread_8h_html_a46a47af036476ee457867aa69de2c893abf851ea21543e38c12ab9423f09ac053"><div class="ttname"><a href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893abf851ea21543e38c12ab9423f09ac053">JF_SERIAL</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:87</div></div>
<div class="ttc" id="basetypes_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="basetypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> basetypes.h:42</div></div>
<div class="ttc" id="jobthread_8h_html_a16b0d8bee8de10777d74fb7f85cb6a01"><div class="ttname"><a href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01">ThreadPoolMessages_t</a></div><div class="ttdeci">ThreadPoolMessages_t</div><div class="ttdef"><b>Definition:</b> jobthread.h:141</div></div>
<div class="ttc" id="class_c_func_job_item_processor_html"><div class="ttname"><a href="class_c_func_job_item_processor.html">CFuncJobItemProcessor</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:805</div></div>
<div class="ttc" id="basetypes_8h_html_afa0d335ed0b412aeae9eabcbafc7fc23ac629bb3eb063aeff45d3d05b19c5a948"><div class="ttname"><a href="basetypes_8h.html#afa0d335ed0b412aeae9eabcbafc7fc23ac629bb3eb063aeff45d3d05b19c5a948">TRS_NONE</a></div><div class="ttdef"><b>Definition:</b> basetypes.h:154</div></div>
<div class="ttc" id="class_c_parallel_processor_html"><div class="ttname"><a href="class_c_parallel_processor.html">CParallelProcessor</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:850</div></div>
<div class="ttc" id="jobthread_8h_html_a5d6b8f0756b2e63b1a7683e750f145c1"><div class="ttname"><a href="jobthread_8h.html#a5d6b8f0756b2e63b1a7683e750f145c1">JOB_NO_DATA</a></div><div class="ttdeci">#define JOB_NO_DATA</div><div class="ttdef"><b>Definition:</b> jobthread.h:438</div></div>
<div class="ttc" id="class_c_job_html_a8d74fc0757cbe33cc1e0371c9f7da410"><div class="ttname"><a href="class_c_job.html#a8d74fc0757cbe33cc1e0371c9f7da410">CJob::ClearServiceThread</a></div><div class="ttdeci">void ClearServiceThread()</div><div class="ttdef"><b>Definition:</b> jobthread.h:470</div></div>
<div class="ttc" id="jobthread_8h_html_a5371e3990e9c2310e4ddf35fe79a9d4e"><div class="ttname"><a href="jobthread_8h.html#a5371e3990e9c2310e4ddf35fe79a9d4e">JobStatus_t</a></div><div class="ttdeci">int JobStatus_t</div><div class="ttdef"><b>Definition:</b> jobthread.h:81</div></div>
<div class="ttc" id="jobthread_8h_html_acd7af5eec524be36c62234eb458d14b9"><div class="ttname"><a href="jobthread_8h.html#acd7af5eec524be36c62234eb458d14b9">NumIdleThreads</a></div><div class="ttdeci">virtual int NumIdleThreads()=0</div></div>
<div class="ttc" id="jobthread_8h_html_a8c78545ef5776ef8636894fe83314949"><div class="ttname"><a href="jobthread_8h.html#a8c78545ef5776ef8636894fe83314949">Start</a></div><div class="ttdeci">virtual bool Start(const ThreadPoolStartParams_t &amp;startParams=ThreadPoolStartParams_t())=0</div></div>
<div class="ttc" id="jobthread_8h_html_acbfbcccdfe9ebfd8291ac67575f35467"><div class="ttname"><a href="jobthread_8h.html#acbfbcccdfe9ebfd8291ac67575f35467">ExecuteToPriority</a></div><div class="ttdeci">virtual int ExecuteToPriority(JobPriority_t toPriority, JobFilter_t pfnFilter=NULL)=0</div></div>
<div class="ttc" id="jobthread_8h_html_a060f7ecf7110ebd56e6f9365bbb6c511"><div class="ttname"><a href="jobthread_8h.html#a060f7ecf7110ebd56e6f9365bbb6c511">NumThreads</a></div><div class="ttdeci">virtual int NumThreads()=0</div></div>
<div class="ttc" id="class_c_job_html_a0be5ef74335616081f87250137a52fb1"><div class="ttname"><a href="class_c_job.html#a0be5ef74335616081f87250137a52fb1">CJob::SetServiceThread</a></div><div class="ttdeci">void SetServiceThread(int iServicingThread)</div><div class="ttdef"><b>Definition:</b> jobthread.h:468</div></div>
<div class="ttc" id="class_c_thread_mutex_html_a6bc5ae2ea6b75b37af5c9c6c6587e370"><div class="ttname"><a href="class_c_thread_mutex.html#a6bc5ae2ea6b75b37af5c9c6c6587e370">CThreadMutex::TryLock</a></div><div class="ttdeci">bool TryLock()</div></div>
<div class="ttc" id="jobthread_8h_html_ace87b942eaa7b091275032e66502adb5"><div class="ttname"><a href="jobthread_8h.html#ace87b942eaa7b091275032e66502adb5">AddJob</a></div><div class="ttdeci">virtual void AddJob(CJob *)=0</div></div>
<div class="ttc" id="class_c_job_html_a2ca884d6865bcc9db34df36a81405327"><div class="ttname"><a href="class_c_job.html#a2ca884d6865bcc9db34df36a81405327">CJob::Abort</a></div><div class="ttdeci">JobStatus_t Abort(bool bDiscard=true)</div><div class="ttdef"><b>Definition:</b> jobthread.h:1298</div></div>
<div class="ttc" id="class_c_job_html_a95e2ec218cf17c3eeff5f5a8f72ba249"><div class="ttname"><a href="class_c_job.html#a95e2ec218cf17c3eeff5f5a8f72ba249">CJob::CThreadPool</a></div><div class="ttdeci">friend class CThreadPool</div><div class="ttdef"><b>Definition:</b> jobthread.h:527</div></div>
<div class="ttc" id="jobthread_8h_html_a0c8d309d90664104c1f61a62d6c7f198"><div class="ttname"><a href="jobthread_8h.html#a0c8d309d90664104c1f61a62d6c7f198">DEFINE_REF_COUNTING_MEMBER_ADD_CALL</a></div><div class="ttdeci">#define DEFINE_REF_COUNTING_MEMBER_ADD_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:288</div></div>
<div class="ttc" id="class_c_utl_vector_fixed_html"><div class="ttname"><a href="class_c_utl_vector_fixed.html">CUtlVectorFixed&lt; CJob *, 16 &gt;</a></div></div>
<div class="ttc" id="class_c_member_func_job_item_processor_html_ab903ccda1b69196e693400af86953744"><div class="ttname"><a href="class_c_member_func_job_item_processor.html#ab903ccda1b69196e693400af86953744">CMemberFuncJobItemProcessor::Begin</a></div><div class="ttdeci">void Begin()</div><div class="ttdef"><b>Definition:</b> jobthread.h:838</div></div>
<div class="ttc" id="class_c_job_set_html_adea5df8b8a5cd838770f4b362d4a9103"><div class="ttname"><a href="class_c_job_set.html#adea5df8b8a5cd838770f4b362d4a9103">CJobSet::WaitForFinish</a></div><div class="ttdeci">void WaitForFinish(bool bRelease=true)</div><div class="ttdef"><b>Definition:</b> jobthread.h:659</div></div>
<div class="ttc" id="class_c_job_set_html_af71ad1ac30bd03dcecc9b232d0226a19"><div class="ttname"><a href="class_c_job_set.html#af71ad1ac30bd03dcecc9b232d0226a19">CJobSet::CJobSet</a></div><div class="ttdeci">CJobSet(CJob **ppJobs, int nJobs)</div><div class="ttdef"><b>Definition:</b> jobthread.h:599</div></div>
<div class="ttc" id="jobthread_8h_html_a76f8e944de1a48a985a14826b613fc95"><div class="ttname"><a href="jobthread_8h.html#a76f8e944de1a48a985a14826b613fc95">AddFunctor</a></div><div class="ttdeci">virtual void AddFunctor(CFunctor *pFunctor, CJob **ppJob=NULL, const char *pszDescription=NULL, unsigned flags=0)</div><div class="ttdef"><b>Definition:</b> jobthread.h:199</div></div>
<div class="ttc" id="class_c_job_html_a797bdfeda328f1b32047583ff0a5953e"><div class="ttname"><a href="class_c_job.html#a797bdfeda328f1b32047583ff0a5953e">CJob::Lock</a></div><div class="ttdeci">void Lock()</div><div class="ttdef"><b>Definition:</b> jobthread.h:489</div></div>
<div class="ttc" id="class_c_parallel_loop_processor_html_aaabd2d28ac6a4a4f82abd43a5ace0548"><div class="ttname"><a href="class_c_parallel_loop_processor.html#aaabd2d28ac6a4a4f82abd43a5ace0548">CParallelLoopProcessor::Run</a></div><div class="ttdeci">void Run(long lBegin, long nItems, int nMaxParallel=INT_MAX)</div><div class="ttdef"><b>Definition:</b> jobthread.h:990</div></div>
<div class="ttc" id="jobthread_8h_html_a856466f5476a9d20d9a7e1c4ea654a84ab0a033d526ecc47379d5d8cd6e772210"><div class="ttname"><a href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84ab0a033d526ecc47379d5d8cd6e772210">JOB_STATUS_INPROGRESS</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:76</div></div>
<div class="ttc" id="class_c_job_html_ad1f68d8ff719bd713b382fd0b2a43590"><div class="ttname"><a href="class_c_job.html#ad1f68d8ff719bd713b382fd0b2a43590">CJob::Describe</a></div><div class="ttdeci">virtual char const  * Describe()</div><div class="ttdef"><b>Definition:</b> jobthread.h:512</div></div>
<div class="ttc" id="threadtools_8h_html_a903b3deeb33ae9ae30e285b8c7a1796d"><div class="ttname"><a href="threadtools_8h.html#a903b3deeb33ae9ae30e285b8c7a1796d">TT_INFINITE</a></div><div class="ttdeci">const unsigned TT_INFINITE</div><div class="ttdef"><b>Definition:</b> threadtools.h:54</div></div>
<div class="ttc" id="class_c_job_set_html_a2226c9ce2553fd25ebe499a193da25f0"><div class="ttname"><a href="class_c_job_set.html#a2226c9ce2553fd25ebe499a193da25f0">CJobSet::CJobSet</a></div><div class="ttdeci">CJobSet(CJob *pJob=NULL)</div><div class="ttdef"><b>Definition:</b> jobthread.h:591</div></div>
<div class="ttc" id="class_c_func_job_item_processor_html_a3c70fc79a722c74b5c491a44227c6d23"><div class="ttname"><a href="class_c_func_job_item_processor.html#a3c70fc79a722c74b5c491a44227c6d23">CFuncJobItemProcessor::m_pfnProcess</a></div><div class="ttdeci">void(* m_pfnProcess)(T &amp;)</div><div class="ttdef"><b>Definition:</b> jobthread.h:821</div></div>
<div class="ttc" id="jobthread_8h_html_a5b7a414bb118e4586bf4debc190f696f"><div class="ttname"><a href="jobthread_8h.html#a5b7a414bb118e4586bf4debc190f696f">Stop</a></div><div class="ttdeci">virtual bool Stop(int timeout=TT_INFINITE)=0</div></div>
<div class="ttc" id="class_c_func_job_item_processor_html_a9cbf1f3d28a25fde53984cff0903b2ec"><div class="ttname"><a href="class_c_func_job_item_processor.html#a9cbf1f3d28a25fde53984cff0903b2ec">CFuncJobItemProcessor::m_pfnBegin</a></div><div class="ttdeci">void(* m_pfnBegin)()</div><div class="ttdef"><b>Definition:</b> jobthread.h:822</div></div>
<div class="ttc" id="jobthread_8h_html_a5f16a92181dc7b25f66543677b1ef325"><div class="ttname"><a href="jobthread_8h.html#a5f16a92181dc7b25f66543677b1ef325">DEFINE_REF_COUNTING_CONST_MEMBER_ADD_CALL</a></div><div class="ttdeci">#define DEFINE_REF_COUNTING_CONST_MEMBER_ADD_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:308</div></div>
<div class="ttc" id="class_c_functor_job_html"><div class="ttname"><a href="class_c_functor_job.html">CFunctorJob</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:552</div></div>
<div class="ttc" id="class_c_job_html_a75361c2e30f670a1dfa0f2d6cf4bcfed"><div class="ttname"><a href="class_c_job.html#a75361c2e30f670a1dfa0f2d6cf4bcfed">CJob::WaitForFinish</a></div><div class="ttdeci">bool WaitForFinish(uint32 dwTimeout=TT_INFINITE)</div><div class="ttdef"><b>Definition:</b> jobthread.h:495</div></div>
<div class="ttc" id="jobthread_8h_html_a16b0d8bee8de10777d74fb7f85cb6a01a37a350542a12aefca0fa6f40abd22570"><div class="ttname"><a href="jobthread_8h.html#a16b0d8bee8de10777d74fb7f85cb6a01a37a350542a12aefca0fa6f40abd22570">TPM_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:144</div></div>
<div class="ttc" id="class_c_member_func_job_item_processor_html_a160020b037d4fd70e0c2704258d90de1"><div class="ttname"><a href="class_c_member_func_job_item_processor.html#a160020b037d4fd70e0c2704258d90de1">CMemberFuncJobItemProcessor::End</a></div><div class="ttdeci">void End()</div><div class="ttdef"><b>Definition:</b> jobthread.h:840</div></div>
<div class="ttc" id="class_c_utl_vector_html_acc6e768eb5f791dff487d23195f95091"><div class="ttname"><a href="class_c_utl_vector.html#acc6e768eb5f791dff487d23195f95091">CUtlVector::AddToTail</a></div><div class="ttdeci">int AddToTail()</div><div class="ttdef"><b>Definition:</b> utlvector.h:855</div></div>
<div class="ttc" id="class_c_job_html_a4bc8c7427b32b672846c49a2ca04645f"><div class="ttname"><a href="class_c_job.html#a4bc8c7427b32b672846c49a2ca04645f">CJob::GetFlags</a></div><div class="ttdeci">unsigned GetFlags() const</div><div class="ttdef"><b>Definition:</b> jobthread.h:464</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_a21c3d9db3b3b56a4c609ac98495ea843"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#a21c3d9db3b3b56a4c609ac98495ea843">ThreadPoolStartParams_t::nStackSize</a></div><div class="ttdeci">int nStackSize</div><div class="ttdef"><b>Definition:</b> jobthread.h:121</div></div>
<div class="ttc" id="jobthread_8h_html_a46a47af036476ee457867aa69de2c893a785a00b41003a7f0324a868f928dde69"><div class="ttname"><a href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893a785a00b41003a7f0324a868f928dde69">JF_BOOST_THREAD</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:86</div></div>
<div class="ttc" id="jobthread_8h_html_a4ec997eabb5ac3b7bb7973b939ce896c"><div class="ttname"><a href="jobthread_8h.html#a4ec997eabb5ac3b7bb7973b939ce896c">SuspendExecution</a></div><div class="ttdeci">virtual int SuspendExecution()=0</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_a81418808769a82e3716d2aa570274a8c"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#a81418808769a82e3716d2aa570274a8c">ThreadPoolStartParams_t::bIOThreads</a></div><div class="ttdeci">bool bIOThreads</div><div class="ttdef"><b>Definition:</b> jobthread.h:125</div></div>
<div class="ttc" id="refcount_8h_html_a4216552ec5cd122cf8a7ad2594fe95dd"><div class="ttname"><a href="refcount_8h.html#a4216552ec5cd122cf8a7ad2594fe95dd">RetAddRef</a></div><div class="ttdeci">#define RetAddRef(p)</div><div class="ttdef"><b>Definition:</b> refcount.h:113</div></div>
<div class="ttc" id="jobthread_8h_html_a46a47af036476ee457867aa69de2c893a0e6988d9c843c4674b3c73f1295ff722"><div class="ttname"><a href="jobthread_8h.html#a46a47af036476ee457867aa69de2c893a0e6988d9c843c4674b3c73f1295ff722">JF_IO</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:85</div></div>
<div class="ttc" id="class_c_job_set_html_a675faa91ec65753cbac7fb43c065aa75"><div class="ttname"><a href="class_c_job_set.html#a675faa91ec65753cbac7fb43c065aa75">CJobSet::WaitForFinish</a></div><div class="ttdeci">void WaitForFinish(IThreadPool *pPool, bool bRelease=true)</div><div class="ttdef"><b>Definition:</b> jobthread.h:676</div></div>
<div class="ttc" id="jobthread_8h_html_a79ed2caf9881269b9f39978ffc1fb02f"><div class="ttname"><a href="jobthread_8h.html#a79ed2caf9881269b9f39978ffc1fb02f">IThreadPool</a></div><div class="ttdeci">abstract_class IThreadPool</div><div class="ttdef"><b>Definition:</b> jobthread.h:153</div></div>
<div class="ttc" id="class_c_job_html_a07b98a45097b08a61efe0875fc21ed41"><div class="ttname"><a href="class_c_job.html#a07b98a45097b08a61efe0875fc21ed41">CJob::TryExecuteAndRelease</a></div><div class="ttdeci">JobStatus_t TryExecuteAndRelease()</div><div class="ttdef"><b>Definition:</b> jobthread.h:505</div></div>
<div class="ttc" id="class_c_thread_mutex_html_a870b10e6865b8eadc18c9ddeb29a13d4"><div class="ttname"><a href="class_c_thread_mutex.html#a870b10e6865b8eadc18c9ddeb29a13d4">CThreadMutex::Lock</a></div><div class="ttdeci">void Lock()</div></div>
<div class="ttc" id="jobthread_8h_html_a9acb14f54322c771a0af85a9b9a67c79"><div class="ttname"><a href="jobthread_8h.html#a9acb14f54322c771a0af85a9b9a67c79">ParallelProcess</a></div><div class="ttdeci">void ParallelProcess(const char *pszDescription, ITEM_TYPE *pItems, unsigned nItems, void(*pfnProcess)(ITEM_TYPE &amp;), void(*pfnBegin)()=NULL, void(*pfnEnd)()=NULL, int nMaxParallel=INT_MAX)</div><div class="ttdef"><b>Definition:</b> jobthread.h:953</div></div>
<div class="ttc" id="class_c_interlocked_ptr_html"><div class="ttname"><a href="class_c_interlocked_ptr.html">CInterlockedPtr&lt; ITEM_TYPE &gt;</a></div></div>
<div class="ttc" id="jobthread_8h_html_a2af07c9cbc929e665b3d0e2509f0ba5d"><div class="ttname"><a href="jobthread_8h.html#a2af07c9cbc929e665b3d0e2509f0ba5d">AbortAll</a></div><div class="ttdeci">virtual int AbortAll()=0</div></div>
<div class="ttc" id="class_c_parallel_processor_base_html_a8bea885c28b4c8ff33d38aaa3ea18fde"><div class="ttname"><a href="class_c_parallel_processor_base.html#a8bea885c28b4c8ff33d38aaa3ea18fde">CParallelProcessorBase::OnBegin</a></div><div class="ttdeci">void OnBegin()</div><div class="ttdef"><b>Definition:</b> jobthread.h:1120</div></div>
<div class="ttc" id="class_c_ref_counted1_html_a3196e6e34288bb17fdd40b0e0afd860d"><div class="ttname"><a href="class_c_ref_counted1.html#a3196e6e34288bb17fdd40b0e0afd860d">CRefCounted1&lt; IRefCounted, CRefCountServiceMT &gt;::Release</a></div><div class="ttdeci">int Release()</div><div class="ttdef"><b>Definition:</b> refcount.h:330</div></div>
<div class="ttc" id="jobthread_8h_html_a582d004c8cb34086f27bdfde186af566"><div class="ttname"><a href="jobthread_8h.html#a582d004c8cb34086f27bdfde186af566">ParallelLoopProcess</a></div><div class="ttdeci">void ParallelLoopProcess(const char *szDescription, long lBegin, unsigned nItems, void(*pfnProcess)(long const &amp;), void(*pfnBegin)()=NULL, void(*pfnEnd)()=NULL, int nMaxParallel=INT_MAX)</div><div class="ttdef"><b>Definition:</b> jobthread.h:1053</div></div>
<div class="ttc" id="jobthread_8h_html_a496b4e164a1b95748ef0cd56a3cd466d"><div class="ttname"><a href="jobthread_8h.html#a496b4e164a1b95748ef0cd56a3cd466d">DEFINE_NONMEMBER_QUEUE_CALL</a></div><div class="ttdeci">#define DEFINE_NONMEMBER_QUEUE_CALL(N)</div><div class="ttdef"><b>Definition:</b> jobthread.h:328</div></div>
<div class="ttc" id="jobthread_8h_html_acaf1b0042d84e3d28e530347df47a1cc"><div class="ttname"><a href="jobthread_8h.html#acaf1b0042d84e3d28e530347df47a1cc">FunctorExecuteThread</a></div><div class="ttdeci">unsigned FunctorExecuteThread(void *pParam)</div><div class="ttdef"><b>Definition:</b> jobthread.h:1150</div></div>
<div class="ttc" id="class_c_job_html_ad87e0a9d392260030aac940353ef3794"><div class="ttname"><a href="class_c_job.html#ad87e0a9d392260030aac940353ef3794">CJob::GetServiceThread</a></div><div class="ttdeci">int GetServiceThread() const</div><div class="ttdef"><b>Definition:</b> jobthread.h:469</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_abb3b4840fb90d6154c258faa6db78724"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#abb3b4840fb90d6154c258faa6db78724">ThreadPoolStartParams_t::bExecOnThreadPoolThreadsOnly</a></div><div class="ttdeci">bool bExecOnThreadPoolThreadsOnly</div><div class="ttdef"><b>Definition:</b> jobthread.h:127</div></div>
<div class="ttc" id="class_c_parallel_loop_processor_html_a7d3cc76807a1dc593301f41d034e32a6"><div class="ttname"><a href="class_c_parallel_loop_processor.html#a7d3cc76807a1dc593301f41d034e32a6">CParallelLoopProcessor::m_ItemProcessor</a></div><div class="ttdeci">ITEM_PROCESSOR_TYPE m_ItemProcessor</div><div class="ttdef"><b>Definition:</b> jobthread.h:1019</div></div>
<div class="ttc" id="class_c_utl_vector_html_afda10b4c843c8844b9a9f19fd35bf6b6"><div class="ttname"><a href="class_c_utl_vector.html#afda10b4c843c8844b9a9f19fd35bf6b6">CUtlVector::Base</a></div><div class="ttdeci">T * Base()</div><div class="ttdef"><b>Definition:</b> utlvector.h:78</div></div>
<div class="ttc" id="utlvector_8h_html"><div class="ttname"><a href="utlvector_8h.html">utlvector.h</a></div></div>
<div class="ttc" id="jobthread_8h_html_a856466f5476a9d20d9a7e1c4ea654a84"><div class="ttname"><a href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84">JobStatusEnum_t</a></div><div class="ttdeci">JobStatusEnum_t</div><div class="ttdef"><b>Definition:</b> jobthread.h:71</div></div>
<div class="ttc" id="class_c_parallel_processor_base_html_a70e8a2e5f3018234fafef5f2a3b76bcf"><div class="ttname"><a href="class_c_parallel_processor_base.html#a70e8a2e5f3018234fafef5f2a3b76bcf">CParallelProcessorBase::ThisParallelProcessorBase_t</a></div><div class="ttdeci">CParallelProcessorBase&lt; Derived &gt; ThisParallelProcessorBase_t</div><div class="ttdef"><b>Definition:</b> jobthread.h:1074</div></div>
<div class="ttc" id="class_c_job_set_html"><div class="ttname"><a href="class_c_job_set.html">CJobSet</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:588</div></div>
<div class="ttc" id="struct_thread_pool_start_params__t_html_ab46e7b6391794d613b78175a7d077753"><div class="ttname"><a href="struct_thread_pool_start_params__t.html#ab46e7b6391794d613b78175a7d077753">ThreadPoolStartParams_t::ThreadPoolStartParams_t</a></div><div class="ttdeci">ThreadPoolStartParams_t(bool bIOThreads=false, unsigned nThreads=-1, int *pAffinities=NULL, ThreeState_t fDistribute=TRS_NONE, unsigned nStackSize=-1, int iThreadPriority=SHRT_MIN)</div><div class="ttdef"><b>Definition:</b> jobthread.h:101</div></div>
<div class="ttc" id="class_c_parallel_processor_base_html_afd3942632cb5f03ccc11e3c9e81e8eb2"><div class="ttname"><a href="class_c_parallel_processor_base.html#afd3942632cb5f03ccc11e3c9e81e8eb2">CParallelProcessorBase::OnProcess</a></div><div class="ttdeci">bool OnProcess()</div><div class="ttdef"><b>Definition:</b> jobthread.h:1121</div></div>
<div class="ttc" id="jobthread_8h_html_a4250ac44298b35b9d79dd5092fc8ed1a"><div class="ttname"><a href="jobthread_8h.html#a4250ac44298b35b9d79dd5092fc8ed1a">CreateThreadPool</a></div><div class="ttdeci">JOB_INTERFACE IThreadPool * CreateThreadPool()</div></div>
<div class="ttc" id="class_c_job_html_a5a50ff5390a60b0b61dce309ec470fe1"><div class="ttname"><a href="class_c_job.html#a5a50ff5390a60b0b61dce309ec470fe1">CJob::SetDescription</a></div><div class="ttdeci">virtual void SetDescription(const char *pszDescription)</div><div class="ttdef"><b>Definition:</b> jobthread.h:513</div></div>
<div class="ttc" id="threadtools_8h_html_aa4e6169ba793ccbbf4f7bb7fb97fddf9a3a5bb774545a3c01a472cb04d11ff83d"><div class="ttname"><a href="threadtools_8h.html#aa4e6169ba793ccbbf4f7bb7fb97fddf9a3a5bb774545a3c01a472cb04d11ff83d">TW_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> threadtools.h:134</div></div>
<div class="ttc" id="glfuncs_8h_html_a1310bd8b1dccaf8d4e4ed51fa4be91aa"><div class="ttname"><a href="glfuncs_8h.html#a1310bd8b1dccaf8d4e4ed51fa4be91aa">i</a></div><div class="ttdeci">GLenum a GLhandleARB GLhandleARB b GLhandleARB GLuint const GLcharARB c GLenum GLuint b GLclampf GLclampf GLclampf GLclampf d GLenum GLenum b GLbitfield a GLclampd a GLenum const GLdouble b GLhandleARB a GLenum GLint GLenum GLsizei GLsizei GLsizei GLint GLsizei const GLvoid * i</div><div class="ttdef"><b>Definition:</b> glfuncs.h:47</div></div>
<div class="ttc" id="class_c_utl_vector_html_a6a15535fb8f7f3321e99084f5c9d7f98"><div class="ttname"><a href="class_c_utl_vector.html#a6a15535fb8f7f3321e99084f5c9d7f98">CUtlVector::FindAndRemove</a></div><div class="ttdeci">bool FindAndRemove(const T &amp;src)</div><div class="ttdef"><b>Definition:</b> utlvector.h:1087</div></div>
<div class="ttc" id="class_c_job_html_a76e715f51f935c8aa969c22031af99f9"><div class="ttname"><a href="class_c_job.html#a76e715f51f935c8aa969c22031af99f9">CJob::TryLock</a></div><div class="ttdeci">bool TryLock()</div><div class="ttdef"><b>Definition:</b> jobthread.h:488</div></div>
<div class="ttc" id="class_c_job_item_processor_html_ac00d9282ce98ec5d20f7aa6e1e1187d7"><div class="ttname"><a href="class_c_job_item_processor.html#ac00d9282ce98ec5d20f7aa6e1e1187d7">CJobItemProcessor::Begin</a></div><div class="ttdeci">void Begin()</div><div class="ttdef"><b>Definition:</b> jobthread.h:799</div></div>
<div class="ttc" id="class_c_member_func_job_item_processor_html_a4fdfbd8bdc90534a079374dbf5e32aa4"><div class="ttname"><a href="class_c_member_func_job_item_processor.html#a4fdfbd8bdc90534a079374dbf5e32aa4">CMemberFuncJobItemProcessor::Init</a></div><div class="ttdeci">void Init(OBJECT_TYPE *pObject, void(FUNCTION_CLASS::*pfnProcess)(T &amp;), void(FUNCTION_CLASS::*pfnBegin)()=NULL, void(FUNCTION_CLASS::*pfnEnd)()=NULL)</div><div class="ttdef"><b>Definition:</b> jobthread.h:830</div></div>
<div class="ttc" id="class_c_functor_job_html_aa67c57660ab37cc29fe780d73034dc55"><div class="ttname"><a href="class_c_functor_job.html#aa67c57660ab37cc29fe780d73034dc55">CFunctorJob::CFunctorJob</a></div><div class="ttdeci">CFunctorJob(CFunctor *pFunctor, const char *pszDescription=NULL)</div><div class="ttdef"><b>Definition:</b> jobthread.h:555</div></div>
<div class="ttc" id="class_c_parallel_processor_base_html_a43ed5acdf0660bdf1cf5b86a110df276"><div class="ttname"><a href="class_c_parallel_processor_base.html#a43ed5acdf0660bdf1cf5b86a110df276">CParallelProcessorBase::CParallelProcessorBase</a></div><div class="ttdeci">CParallelProcessorBase()</div><div class="ttdef"><b>Definition:</b> jobthread.h:1078</div></div>
<div class="ttc" id="class_c_parallel_processor_base_html_a832cd4b922e505154ddab494ea4a215a"><div class="ttname"><a href="class_c_parallel_processor_base.html#a832cd4b922e505154ddab494ea4a215a">CParallelProcessorBase::OnEnd</a></div><div class="ttdeci">void OnEnd()</div><div class="ttdef"><b>Definition:</b> jobthread.h:1122</div></div>
<div class="ttc" id="class_c_job_set_html_a84b4d1296627d0c7d75ae7591ef41a48"><div class="ttname"><a href="class_c_job_set.html#a84b4d1296627d0c7d75ae7591ef41a48">CJobSet::~CJobSet</a></div><div class="ttdeci">~CJobSet()</div><div class="ttdef"><b>Definition:</b> jobthread.h:607</div></div>
<div class="ttc" id="class_c_job_item_processor_html_af842fdd1f38052868ca280ed79c741ec"><div class="ttname"><a href="class_c_job_item_processor.html#af842fdd1f38052868ca280ed79c741ec">CJobItemProcessor::ItemType_t</a></div><div class="ttdeci">T ItemType_t</div><div class="ttdef"><b>Definition:</b> jobthread.h:798</div></div>
<div class="ttc" id="class_c_job_html_ab5e38dc5b7ec63976a70e3f81eeca0b9"><div class="ttname"><a href="class_c_job.html#ab5e38dc5b7ec63976a70e3f81eeca0b9">CJob::WaitForFinishAndRelease</a></div><div class="ttdeci">bool WaitForFinishAndRelease(uint32 dwTimeout=TT_INFINITE)</div><div class="ttdef"><b>Definition:</b> jobthread.h:496</div></div>
<div class="ttc" id="jobthread_8h_html_a856466f5476a9d20d9a7e1c4ea654a84a9a5bf31f62fc158d7e2222b7c1b10126"><div class="ttname"><a href="jobthread_8h.html#a856466f5476a9d20d9a7e1c4ea654a84a9a5bf31f62fc158d7e2222b7c1b10126">JOB_STATUS_ABORTED</a></div><div class="ttdef"><b>Definition:</b> jobthread.h:77</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f832923ad3cb060bc87ad85e68b8a1c3.html">public</a></li><li class="navelem"><a class="el" href="dir_e37ee635fb485084283dfaa4c0f57416.html">vstdlib</a></li><li class="navelem"><a class="el" href="jobthread_8h.html">jobthread.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
